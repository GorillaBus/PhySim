{"version":3,"sources":["node_modules/browser-pack/_prelude.js","projects/easing/app.js","src/feature-toggle.js","src/lib/AnimationPlayer.js"],"names":[],"mappings":"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","file":"app.js","sourceRoot":"/source/","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","import AnimationPlayer from '../../src/lib/AnimationPlayer';\n\nwindow.onload = () => {\n    const canvas = document.getElementById(\"canvas\");\n    const ctx = canvas.getContext(\"2d\");\n    const width = window.innerWidth;\n    const height = window.innerHeight-4;\n    const center = { x: width/2, y: height/2 };\n\n    canvas.height = height;\n    canvas.width = width;\n\n    let player = new AnimationPlayer({ fps: 90 });\n    let target = {\n      x: center.x,\n      y: center.y\n    };\n    let point = {\n      x: 0,\n      y: 0\n    };\n    let ease = 0.1;\n\n    // Demo player setup\n    player.setUpdateFn(update);\n    player.play();\n\n    // Frame drawing function\n    function update() {\n        ctx.clearRect(0,0, width, height);\n\n        // Draw\n        ctx.beginPath();\n        ctx.arc(point.x, point.y, 4, 0, Math.PI * 2, false);\n        ctx.fillStyle = \"#000000\";\n        ctx.fill();\n        ctx.closePath();\n        ctx.stroke();\n\n        easeTo(point, target, ease);\n    }\n\n    function easeTo(position, target, ease) {\n      let dx = target.x - position.x;\n      let dy = target.y - position.y;\n      position.x += dx * ease;\n      position.y += dy * ease;\n      if (Math.abs(dx) < 0.1 && Math.abs(dy) < 0.1) {\n        position.x = target.x;\n        position.y = target.y;\n        return false;\n      }\n      return true;\n    }\n\n    // Mouse event\n    document.body.addEventListener(\"mousemove\", (e) => {\n      target.x = e.clientX;\n      target.y = e.clientY;\n    });\n\n    // Animation control: KeyDown\n    document.body.addEventListener(\"keydown\", (e) => {\n      //console.log(\"Key pressed: \", e.keyCode);\n      switch (e.keyCode) {\n        case 27:                        // Esc\n          if (player.playing) {\n              player.stop();\n              console.log(\"> Scene stopped\");\n          } else {\n              player.play();\n              console.log(\"> Playing scene\");\n          }\n          break;\n\n        default:\n          break;\n      }\n    });\n\n};\n","/*\n *  Feature Toggling\n *\n *  Activete/Hide features that are in process of development or under testing\n *  Once a feature is accepted to be includded must be removed from the\n *  feature toggle scheme\n */\n\n const FEATURE_TOGGLE = {\n   FPS_CONTROL: true                // FPS controll for AnimationPlayer class\n };\n\n export default FEATURE_TOGGLE;\n","import FEATURE_TOGGLE from '../../src/feature-toggle';\n\nexport default class AnimationPlayer {\n\n    constructor(settings) {\n        settings = settings || {};\n\n        this.window = settings.windowElement || window;\n        this.requestId = null;\n        this.playing = false;\n\n        // FPS control\n        if (FEATURE_TOGGLE.FPS_CONTROL) {\n          this.fps = settings.fps || 90;\n          this.now;\n          this.lastTime = Date.now();\n          this.interval = 1000/this.fps;\n          this.delta;\n        }\n\n    }\n\n    play() {\n        this.playing = true;\n        this.updateFn();\n    }\n\n    stop() {\n        if (!this.playing) {\n            return false;\n        }\n        this.window.cancelAnimationFrame(this.requestId);\n        this.playing = false;\n        this.requestId = null;\n    }\n\n    setUpdateFn(updateFn) {\n        this.updateFn = (\n            () => {\n                this.requestId = this.window.requestAnimationFrame(this.updateFn);\n\n                // FPS control\n                if (FEATURE_TOGGLE.FPS_CONTROL) {\n                  this.now = Date.now();\n                  this.delta = this.now - this.lastTime;\n\n                  if (this.delta > this.interval) {\n                    this.lastTime = this.now - (this.delta % this.interval);\n                    updateFn();\n                  }\n                  return;\n                }\n\n                updateFn();\n\n            });\n    }\n\n    updateFn() {\n        console.warn(\"Player update function has not been set.\");\n    }\n}\n"]}