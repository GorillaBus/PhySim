{"version":3,"sources":["node_modules/browser-pack/_prelude.js","projects/spaceship/app.js","src/feature-toggle.js","src/lib/AnimationPlayer.js","src/lib/Particle.js","src/lib/Vector.js"],"names":[],"mappings":"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","file":"app.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","import Particle from '../../src/lib/Particle';\nimport AnimationPlayer from '../../src/lib/AnimationPlayer';\nimport Vector from '../../src/lib/Vector';\n\nwindow.onload = () => {\n    const canvas = document.getElementById(\"canvas\");\n    const ctx = canvas.getContext(\"2d\");\n    const width = canvas.width = window.innerWidth-4;\n    const height = canvas.height = window.innerHeight-4;\n\n    let player = new AnimationPlayer();\n\n    // Ship movement & actions\n    let angle = 0;\n    let turningLeft = false;\n    let turningRight = false;\n    let thrusting = false;\n    let firing = false;\n\n    // Ship drawing\n    let shipSettings = {\n        x: width / 2,\n        y: height / 2,\n        friction: 0.99\n    };\n    let ship = new Particle(shipSettings);\n    let thrust = new Vector({ x: 0, y: 0 });\n    let bullets = [];\n    let numBullets = 0;\n\n    // Demo player\n    player.setUpdateFn(update);\n    player.play();\n\n    // Frame drawing function\n    function update() {\n        ctx.clearRect(0,0, width, height);\n\n        // Ship movement\n        if (turningLeft) {\n            angle -= 0.05;\n        }\n\n        if (turningRight) {\n            angle += 0.05;\n        }\n\n        if (thrusting) {\n            thrust.setAngle(angle);\n            thrust.setLength(0.1);\n        } else {\n            thrust.setLength(0);\n        }\n\n        // Firing adds more bullets\n        if (firing) {\n            let bulletSettings = {\n                x: ship.x,\n                y: ship.y,\n                speed: 1,\n                direction: angle\n            };\n\n            let impulseSettings = {\n                x: ship.x,\n                y: ship.y,\n                length: 1,\n                angle: angle\n            };\n\n            let newBullet = {\n                bullet: new Particle(bulletSettings),\n                impulse: new Vector(impulseSettings)\n            };\n\n            // Add new bullet to the queue\n            bullets.push(newBullet);\n            numBullets = bullets.length;\n        }\n\n        // Update ship position\n        ship.accelerate(thrust.getX(), thrust.getY());\n        ship.update();\n\n        // Draw ship\n        ctx.save();\n        ctx.translate(ship.x, ship.y);\n        ctx.rotate(angle);\n        ctx.beginPath();\n        ctx.moveTo(10, 0);\n        ctx.lineTo(-10, -7);\n        ctx.lineTo(-10, 7);\n        ctx.lineTo(10, 0);\n        ctx.closePath();\n        ctx.fillStyle = \"#000000\";\n        ctx.fill();\n\n        // Draw thrust\n        if (thrusting) {\n            ctx.beginPath();\n            ctx.moveTo(-10, 0);\n            ctx.lineTo(-18, 0);\n            ctx.closePath();\n            ctx.stroke();\n        }\n        ctx.restore();\n\n        // Draw bullets\n        if (numBullets > 0) {\n            for (let i=0;i<numBullets;i++) {\n                // Destroy bullet when it goes out of the screen\n                if (bullets[i].bullet.x > width || bullets[i].bullet.y > height || bullets[i].bullet.y < 0 || bullets[i].bullet.x < 0) {\n                    bullets.splice(i, 1);\n                    numBullets--;\n                    continue;\n                }\n\n                let bullet = bullets[i].bullet;\n                let impulse = bullets[i].impulse;\n\n                // Update bullet\n                bullet.accelerate(impulse.getX(), impulse.getY());\n                bullet.update();\n\n                // Draw bullet\n                ctx.beginPath();\n                ctx.arc(bullet.x, bullet.y, 4, 0, Math.PI * 2, false);\n                ctx.fillStyle = \"#FF0000\";\n                ctx.fill();\n                ctx.closePath();\n                ctx.stroke();\n            }\n        }\n\n\n        // Handle ship positioning when out of sight\n        if (ship.x > width) {\n            ship.x = 0;\n        }\n        if (ship.y > height) {\n            ship.y = 0;\n        }\n        if (ship.x < 0) {\n            ship.x = width;\n        }\n        if (ship.y < 0) {\n            ship.y = height;\n        }\n    }\n\n\n    // Animation control: KeyDown\n    document.body.addEventListener(\"keydown\", (e) => {\n        //console.log(\"Key pressed: \", e.keyCode);\n        switch (e.keyCode) {\n            case 38:                        // Up\n                thrusting = true;\n                break;\n            case 37:                        // Left\n                turningLeft = true;\n                break;\n            case 39:                        // Right\n                turningRight = true;\n                break;\n            case 27:                        // Esc\n                if (player.playing) {\n                    player.stop();\n                    console.log(\"> Scene stopped\");\n                } else {\n                    player.play();\n                    console.log(\"> Playing scene\");\n                }\n                break;\n            default:\n                break;\n        }\n    });\n\n    // Animation control: KeyUp\n    document.body.addEventListener(\"keyup\", (e) => {\n        switch (e.keyCode) {\n            case 38:                        // Up\n                thrusting = false;\n                break;\n            case 37:                        // Left\n                turningLeft = false;\n                break;\n            case 39:                        // Right\n                turningRight = false;\n                break;\n            case 32:                        // Space\n                firing = true;\n                setTimeout(function() {\n                    firing = false;\n                }, 20);\n                break;\n            default:\n                break;\n        }\n    });\n};\n","/*\n *  Feature Toggling\n *\n *  Activete/Hide features that are in process of development or under testing\n *  Once a feature is accepted to be includded must be removed from the\n *  feature toggle scheme\n */\n\n const FEATURE_TOGGLE = {\n   FPS_CONTROL: true                // FPS controll for AnimationPlayer class\n };\n\n export default FEATURE_TOGGLE;\n","import FEATURE_TOGGLE from '../../src/feature-toggle';\n\nexport default class AnimationPlayer {\n\n  constructor(settings) {\n    settings = settings || {};\n\n    this.window = settings.windowElement || window;\n    this.requestId = null;\n    this.playing = false;\n\n    // FPS control\n    this.fps = settings.fps || 90;\n    this.now;\n    this.lastTime = Date.now();\n    this.interval = 1000/this.fps;\n    this.delta;\n\n    this.registerEvents();\n  }\n\n  registerEvents() {\n    // Animation control: KeyDown\n    document.body.addEventListener(\"keydown\", (e) => {\n      //console.log(\"Key pressed: \", e.keyCode);\n      switch (e.keyCode) {\n        case 27:                        // Esc\n        if (this.playing) {\n          this.stop();\n          console.log(\"> Scene stopped\");\n        } else {\n          this.play();\n          console.log(\"> Playing scene\");\n        }\n        break;\n\n        case 13:\n        this.stop();\n        this.play();\n        this.stop();\n        console.log(\"> Step forward\");\n        break;\n\n        default:\n        break;\n      }\n    });\n  }\n\n  play() {\n    this.playing = true;\n    this.updateFn();\n  }\n\n  stop() {\n    if (!this.playing) {\n      return false;\n    }\n    this.window.cancelAnimationFrame(this.requestId);\n    this.playing = false;\n    this.requestId = null;\n  }\n\n  setUpdateFn(updateFn) {\n    this.updateFn = (\n      () => {\n        this.requestId = this.window.requestAnimationFrame(this.updateFn);\n        this.now = Date.now();\n        this.delta = this.now - this.lastTime;\n\n        if (this.delta > this.interval) {\n          this.lastTime = this.now - (this.delta % this.interval);\n          updateFn(this.delta, this.lastTime);\n        }\n        return;\n\n\n        updateFn();\n\n      });\n    }\n\n    updateFn() {\n      console.warn(\"Player update function has not been set.\");\n    }\n  }\n","import FEATURE_TOGGLE from '../../src/feature-toggle';\n\nexport default class Particle {\n\n  /*\n   *   Pass 'boxBounce' as { w: <with>, h: <height> } to make particle bounce inside a box\n   *\n   **/\n    constructor(settings) {\n        this.x = settings.x || 0;\n        this.y = settings.y || 0;\n        this.vx = (Math.cos(settings.direction) * settings.speed) || 0;\n        this.vy = (Math.sin(settings.direction) * settings.speed) || 0;\n        this.gravity = settings.gravity || 0;\n        this.mass = settings.mass || 1;\n        this.radius = settings.radius || settings.mass * 0.87;\n        this.friction = settings.friction || 1;\n        this.springs = [];\n        this.gravitations = [];\n        this.positionUpdated = false;\n        this.color = settings.color || 'rgba(0,0,0,0.6)';\n        this.boxBounce = settings.boxBounce || false;\n    }\n\n    /*\n     *  Updates the state of the particle\n     */\n    update() {\n        let x = this.x;\n        let y = this.y;\n\n        this.handleSprings();\n        this.handleGravitations();\n        this.vy += this.gravity;\n        this.vx *= this.friction;\n        this.vy *= this.friction;\n        this.x += this.vx;\n        this.y += this.vy;\n\n        if (this.boxBounce) {\n          this.checkBorders(this.boxBounce.w, this.boxBounce.h);\n        }\n\n        if (x !== this.x && y !== this.y) {\n          this.positionUpdated = true;\n        } else {\n\n        }\n    }\n\n    /*\n     *  Gets the length of the velocity vector, which equals to the hypotenuse\n     */\n    getSpeed() {\n        return Math.sqrt(this.vx * this.vx + this.vy * this.vy);\n    }\n\n    /*\n     *  Using the actual Velocity vector's angle, sets a new length for it\n     */\n    setSpeed(speed) {\n        let heading = this.getHeading();\n        this.vx = Math.cos(heading) * speed;\n        this.vy = Math.sin(heading) * speed;\n    }\n\n    /*\n     *  Gets the angle direction of the velocity vector\n     */\n    getHeading() {\n        return Math.atan2(this.vy, this.vx);\n    }\n\n    /*\n     *  Changes the Velocity vector's angle and recalculate coordinates\n     */\n    setHeading(heading) {\n        let speed = this.getSpeed();\n        this.vx = Math.cos(heading) * speed;\n        this.vy = Math.sin(heading) * speed;\n    }\n\n    /*\n     *  Sums to the Velocity vector x and y values\n     */\n    accelerate(x, y) {\n        this.vx += x;\n        this.vy += y;\n    }\n\n    /*\n    *  Bounce if the particle hits the box (i.e. screen) borders\n    */\n    checkBorders(width, height) {\n      if (this.x + this.radius >= width) {\n        this.x = width - this.radius;\n        this.vx *=  -1;\n      } else if (this.x - this.radius <= 0) {\n        this.x = this.radius;\n        this.vx *= -1;\n      }\n\n      if (this.y + this.radius >= height) {\n        this.y = height - this.radius;\n        this.vy *=  -1;\n      } else if (this.y - this.radius <= 0) {\n        this.y = this.radius;\n        this.vy *= -1;\n      }\n    }\n\n    /*\n     *  Calculates the angle between this particle and 'p2'\n     */\n    angleTo(p2) {\n        return Math.atan2(p2.y - this.y, p2.x - this.x);\n    }\n\n    /*\n     *  Calculates the distance to a given particle\n     */\n    distanceTo(p) {\n        let dx = p.x - this.x;\n        let dy = p.y - this.y;\n        return Math.sqrt(dx * dx + dy * dy);\n    }\n\n    /*\n     *  Calculates and applies a gravitation vector to a given particle\n     */\n     gravitateTo(p, gravityFactor) {\n         gravityFactor = gravityFactor || 0.04;\n\n         let radiusSum = this.radius + p.radius;\n         let massFactor = this.mass * p.mass;\n\n         let dx = p.x - this.x;\n         let dy = p.y - this.y;\n         let distSQ = (dx * dx) + (dy * dy);\n         let dist = Math.sqrt(distSQ);\n         let surfaceDist = dist - radiusSum;\n\n         // Cancel gravitation once objects collide\n         // TODO: Verify if we can save the Math.sqrt() comparing squares\n         if (dist < radiusSum + 5) {\n           return;\n         }\n\n         //let force = (p.mass) / distSQ; // Force = mass / square of the distance\n         let force = gravityFactor * massFactor / (surfaceDist * surfaceDist);\n\n         let ax = (dx / surfaceDist) * force;\n         let ay = (dy / surfaceDist) * force;\n\n         this.vx += ax;\n         this.vy += ay;\n     }\n\n    /*\n     *  Registers a particle to gravitate to\n     */\n    addGravitation(p) {\n        this.removeGravitation(p);\n        this.gravitations.push(p);\n    }\n\n    /*\n     *  Unregisters a gravitation particle\n     */\n    removeGravitation(p) {\n        let length = this.gravitations.length;\n        for (let i=0; i<length; i++){\n            if (this.gravitations[i] === p) {\n                this.gravitations.slice(i, 1);\n                return true;\n            }\n        }\n    }\n\n    /*\n     *  Gravitates to each registered gravitation particle\n     */\n    handleGravitations() {\n        let length = this.gravitations.length;\n        for (let i=0; i<length; i++){\n            this.gravitateTo(this.gravitations[i]);\n        }\n    }\n\n    /*\n     *  Calculates and applies a spring vector to a given point\n     */\n    springTo(point, k, length) {\n        let dx = point.x - this.x;\n        let dy = point.y - this.y;\n        let distance = Math.sqrt(dx * dx + dy * dy);\n        let force = (distance - length || 0) * k;\n        // Instead of getting cos / sin of angle, divide sides by hypotenuse\n        this.vx += (dx / distance) * force;\n        this.vy += (dy / distance) * force;\n    }\n\n    /*\n     *  Registers a new spring point\n     */\n    addSpring(point, k, length) {\n        this.removeSpring(point);\n        this.springs.push({\n            point: point,\n            k: k,\n            length: length || 0\n        });\n    }\n\n    /*\n     *  Unregisters a spring point\n     */\n    removeSpring(point) {\n        let length = this.springs.length;\n        for (let i=0; i<length; i++){\n            if (this.springs[i].point === point) {\n                this.springs.splice(i, 1);\n                return;\n            }\n        }\n    }\n\n\n    /*\n     *  Springs to each registered spring point\n     */\n    handleSprings() {\n        let length = this.springs.length;\n        for (let i=0; i<length; i++){\n            let spring = this.springs[i];\n            this.springTo(spring.point, spring.k, spring.length);\n        }\n    }\n}\n","import FEATURE_TOGGLE from '../../src/feature-toggle';\n\nexport default class Vector {\n\n  constructor(settings) {\n    settings = settings || {};\n    settings.x = settings.x || 0;\n    settings.y = settings.y || 0;\n    settings.length = settings.length || 0;\n    settings.angle = settings.angle || 0;\n\n    this._x = settings.x;\n    this._y = settings.y;\n\n    if (settings.length) {\n      this.setLength(settings.length);\n    }\n    if (settings.angle) {\n      this.setAngle(settings.angle);\n    }\n  }\n\n  setX(value) {\n    this._x = value;\n  }\n\n  getX(value) {\n    return this._x;\n  }\n\n  setY(value) {\n    this._y = value;\n  }\n\n  getY(value) {\n    return this._y;\n  }\n\n  setAngle(angle) {\n    let length = this.getLength();\n    this._x = Math.cos(angle) * length;\n    this._y = Math.sin(angle) * length;\n  }\n\n  getAngle() {\n    return Math.atan2(this._y, this._x);\n  }\n\n  setLength(length) {\n    let angle = this.getAngle();\n    this._x = Math.cos(angle) * length;\n    this._y = Math.sin(angle) * length;\n  }\n\n  getLength() {\n    return Math.sqrt(this._x * this._x + this._y * this._y);\n  }\n\n  add(vector) {\n    return new Vector({ x: this._x + vector.getX(), y: this._y + vector.getY() });\n  }\n\n  substract(vector) {\n    return new Vector({ x: this._x - vector.getX(), y: this._y - vector.getY() });\n  }\n\n  multiply(value) {\n    return new Vector({ x: this._x * value, y: this._y * value });\n  }\n\n  divide(value) {\n    return new Vector({ x: this._x / value, y: this._y / value });\n  }\n\n  addTo(vector) {\n    this._x += vector.getX();\n    this._y += vector.getY();\n  }\n\n  substractFrom(vector) {\n    this._x -= vector.getX();\n    this._y -= vector.getY();\n  }\n\n  multiplyBy(value) {\n    this._x *= value;\n    this._y *= value;\n  }\n\n  divideBy(value) {\n    this._x /= value;\n    this._y /= value;\n  }\n\n  copy() {\n    return new Vector({\n      x: this.getX(),\n      y: this.getY()\n    });\n  }\n\n  normalize() {\n    var length = this.getLength();\n    if (length != 0) {\n      this.divideBy(length);\n    }\n  }\n\n  limit(n) {\n    if (this.getLength() > n) {\n      this.setLength(n);\n    }\n  }\n};\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJwcm9qZWN0cy9zcGFjZXNoaXAvYXBwLmpzIiwic3JjL2ZlYXR1cmUtdG9nZ2xlLmpzIiwic3JjL2xpYi9BbmltYXRpb25QbGF5ZXIuanMiLCJzcmMvbGliL1BhcnRpY2xlLmpzIiwic3JjL2xpYi9WZWN0b3IuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7OztBQ0FBOzs7O0FBQ0E7Ozs7QUFDQTs7Ozs7O0FBRUEsT0FBTyxNQUFQLEdBQWdCLFlBQU07QUFDbEIsUUFBTSxTQUFTLFNBQVMsY0FBVCxDQUF3QixRQUF4QixDQUFmO0FBQ0EsUUFBTSxNQUFNLE9BQU8sVUFBUCxDQUFrQixJQUFsQixDQUFaO0FBQ0EsUUFBTSxRQUFRLE9BQU8sS0FBUCxHQUFlLE9BQU8sVUFBUCxHQUFrQixDQUEvQztBQUNBLFFBQU0sU0FBUyxPQUFPLE1BQVAsR0FBZ0IsT0FBTyxXQUFQLEdBQW1CLENBQWxEOztBQUVBLFFBQUksU0FBUywrQkFBYjs7QUFFQTtBQUNBLFFBQUksUUFBUSxDQUFaO0FBQ0EsUUFBSSxjQUFjLEtBQWxCO0FBQ0EsUUFBSSxlQUFlLEtBQW5CO0FBQ0EsUUFBSSxZQUFZLEtBQWhCO0FBQ0EsUUFBSSxTQUFTLEtBQWI7O0FBRUE7QUFDQSxRQUFJLGVBQWU7QUFDZixXQUFHLFFBQVEsQ0FESTtBQUVmLFdBQUcsU0FBUyxDQUZHO0FBR2Ysa0JBQVU7QUFISyxLQUFuQjtBQUtBLFFBQUksT0FBTyx1QkFBYSxZQUFiLENBQVg7QUFDQSxRQUFJLFNBQVMscUJBQVcsRUFBRSxHQUFHLENBQUwsRUFBUSxHQUFHLENBQVgsRUFBWCxDQUFiO0FBQ0EsUUFBSSxVQUFVLEVBQWQ7QUFDQSxRQUFJLGFBQWEsQ0FBakI7O0FBRUE7QUFDQSxXQUFPLFdBQVAsQ0FBbUIsTUFBbkI7QUFDQSxXQUFPLElBQVA7O0FBRUE7QUFDQSxhQUFTLE1BQVQsR0FBa0I7QUFDZCxZQUFJLFNBQUosQ0FB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QUwsSUFBVyxPQUFPLElBQVAsRUFBWDtBQUNBLFdBQUssRUFBTCxJQUFXLE9BQU8sSUFBUCxFQUFYO0FBQ0Q7OztrQ0FFYSxNLEVBQVE7QUFDcEIsV0FBSyxFQUFMLElBQVcsT0FBTyxJQUFQLEVBQVg7QUFDQSxXQUFLLEVBQUwsSUFBVyxPQUFPLElBQVAsRUFBWDtBQUNEOzs7K0JBRVUsSyxFQUFPO0FBQ2hCLFdBQUssRUFBTCxJQUFXLEtBQVg7QUFDQSxXQUFLLEVBQUwsSUFBVyxLQUFYO0FBQ0Q7Ozs2QkFFUSxLLEVBQU87QUFDZCxXQUFLLEVBQUwsSUFBVyxLQUFYO0FBQ0EsV0FBSyxFQUFMLElBQVcsS0FBWDtBQUNEOzs7MkJBRU07QUFDTCxhQUFPLElBQUksTUFBSixDQUFXO0FBQ2hCLFdBQUcsS0FBSyxJQUFMLEVBRGE7QUFFaEIsV0FBRyxLQUFLLElBQUw7QUFGYSxPQUFYLENBQVA7QUFJRDs7O2dDQUVXO0FBQ1YsVUFBSSxTQUFTLEtBQUssU0FBTCxFQUFiO0FBQ0EsVUFBSSxVQUFVLENBQWQsRUFBaUI7QUFDZixhQUFLLFFBQUwsQ0FBYyxNQUFkO0FBQ0Q7QUFDRjs7OzBCQUVLLEMsRUFBRztBQUNQLFVBQUksS0FBSyxTQUFMLEtBQW1CLENBQXZCLEVBQTBCO0FBQ3hCLGFBQUssU0FBTCxDQUFlLENBQWY7QUFDRDtBQUNGOzs7Ozs7a0JBOUdrQixNO0FBK0dwQiIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJpbXBvcnQgUGFydGljbGUgZnJvbSAnLi4vLi4vc3JjL2xpYi9QYXJ0aWNsZSc7XG5pbXBvcnQgQW5pbWF0aW9uUGxheWVyIGZyb20gJy4uLy4uL3NyYy9saWIvQW5pbWF0aW9uUGxheWVyJztcbmltcG9ydCBWZWN0b3IgZnJvbSAnLi4vLi4vc3JjL2xpYi9WZWN0b3InO1xuXG53aW5kb3cub25sb2FkID0gKCkgPT4ge1xuICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2FudmFzXCIpO1xuICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XG4gICAgY29uc3Qgd2lkdGggPSBjYW52YXMud2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aC00O1xuICAgIGNvbnN0IGhlaWdodCA9IGNhbnZhcy5oZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQtNDtcblxuICAgIGxldCBwbGF5ZXIgPSBuZXcgQW5pbWF0aW9uUGxheWVyKCk7XG5cbiAgICAvLyBTaGlwIG1vdmVtZW50ICYgYWN0aW9uc1xuICAgIGxldCBhbmdsZSA9IDA7XG4gICAgbGV0IHR1cm5pbmdMZWZ0ID0gZmFsc2U7XG4gICAgbGV0IHR1cm5pbmdSaWdodCA9IGZhbHNlO1xuICAgIGxldCB0aHJ1c3RpbmcgPSBmYWxzZTtcbiAgICBsZXQgZmlyaW5nID0gZmFsc2U7XG5cbiAgICAvLyBTaGlwIGRyYXdpbmdcbiAgICBsZXQgc2hpcFNldHRpbmdzID0ge1xuICAgICAgICB4OiB3aWR0aCAvIDIsXG4gICAgICAgIHk6IGhlaWdodCAvIDIsXG4gICAgICAgIGZyaWN0aW9uOiAwLjk5XG4gICAgfTtcbiAgICBsZXQgc2hpcCA9IG5ldyBQYXJ0aWNsZShzaGlwU2V0dGluZ3MpO1xuICAgIGxldCB0aHJ1c3QgPSBuZXcgVmVjdG9yKHsgeDogMCwgeTogMCB9KTtcbiAgICBsZXQgYnVsbGV0cyA9IFtdO1xuICAgIGxldCBudW1CdWxsZXRzID0gMDtcblxuICAgIC8vIERlbW8gcGxheWVyXG4gICAgcGxheWVyLnNldFVwZGF0ZUZuKHVwZGF0ZSk7XG4gICAgcGxheWVyLnBsYXkoKTtcblxuICAgIC8vIEZyYW1lIGRyYXdpbmcgZnVuY3Rpb25cbiAgICBmdW5jdGlvbiB1cGRhdGUoKSB7XG4gICAgICAgIGN0eC5jbGVhclJlY3QoMCwwLCB3aWR0aCwgaGVpZ2h0KTtcblxuICAgICAgICAvLyBTaGlwIG1vdmVtZW50XG4gICAgICAgIGlmICh0dXJuaW5nTGVmdCkge1xuICAgICAgICAgICAgYW5nbGUgLT0gMC4wNTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0dXJuaW5nUmlnaHQpIHtcbiAgICAgICAgICAgIGFuZ2xlICs9IDAuMDU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhydXN0aW5nKSB7XG4gICAgICAgICAgICB0aHJ1c3Quc2V0QW5nbGUoYW5nbGUpO1xuICAgICAgICAgICAgdGhydXN0LnNldExlbmd0aCgwLjEpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhydXN0LnNldExlbmd0aCgwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEZpcmluZyBhZGRzIG1vcmUgYnVsbGV0c1xuICAgICAgICBpZiAoZmlyaW5nKSB7XG4gICAgICAgICAgICBsZXQgYnVsbGV0U2V0dGluZ3MgPSB7XG4gICAgICAgICAgICAgICAgeDogc2hpcC54LFxuICAgICAgICAgICAgICAgIHk6IHNoaXAueSxcbiAgICAgICAgICAgICAgICBzcGVlZDogMSxcbiAgICAgICAgICAgICAgICBkaXJlY3Rpb246IGFuZ2xlXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBsZXQgaW1wdWxzZVNldHRpbmdzID0ge1xuICAgICAgICAgICAgICAgIHg6IHNoaXAueCxcbiAgICAgICAgICAgICAgICB5OiBzaGlwLnksXG4gICAgICAgICAgICAgICAgbGVuZ3RoOiAxLFxuICAgICAgICAgICAgICAgIGFuZ2xlOiBhbmdsZVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgbGV0IG5ld0J1bGxldCA9IHtcbiAgICAgICAgICAgICAgICBidWxsZXQ6IG5ldyBQYXJ0aWNsZShidWxsZXRTZXR0aW5ncyksXG4gICAgICAgICAgICAgICAgaW1wdWxzZTogbmV3IFZlY3RvcihpbXB1bHNlU2V0dGluZ3MpXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvLyBBZGQgbmV3IGJ1bGxldCB0byB0aGUgcXVldWVcbiAgICAgICAgICAgIGJ1bGxldHMucHVzaChuZXdCdWxsZXQpO1xuICAgICAgICAgICAgbnVtQnVsbGV0cyA9IGJ1bGxldHMubGVuZ3RoO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gVXBkYXRlIHNoaXAgcG9zaXRpb25cbiAgICAgICAgc2hpcC5hY2NlbGVyYXRlKHRocnVzdC5nZXRYKCksIHRocnVzdC5nZXRZKCkpO1xuICAgICAgICBzaGlwLnVwZGF0ZSgpO1xuXG4gICAgICAgIC8vIERyYXcgc2hpcFxuICAgICAgICBjdHguc2F2ZSgpO1xuICAgICAgICBjdHgudHJhbnNsYXRlKHNoaXAueCwgc2hpcC55KTtcbiAgICAgICAgY3R4LnJvdGF0ZShhbmdsZSk7XG4gICAgICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgY3R4Lm1vdmVUbygxMCwgMCk7XG4gICAgICAgIGN0eC5saW5lVG8oLTEwLCAtNyk7XG4gICAgICAgIGN0eC5saW5lVG8oLTEwLCA3KTtcbiAgICAgICAgY3R4LmxpbmVUbygxMCwgMCk7XG4gICAgICAgIGN0eC5jbG9zZVBhdGgoKTtcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9IFwiIzAwMDAwMFwiO1xuICAgICAgICBjdHguZmlsbCgpO1xuXG4gICAgICAgIC8vIERyYXcgdGhydXN0XG4gICAgICAgIGlmICh0aHJ1c3RpbmcpIHtcbiAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgICAgIGN0eC5tb3ZlVG8oLTEwLCAwKTtcbiAgICAgICAgICAgIGN0eC5saW5lVG8oLTE4LCAwKTtcbiAgICAgICAgICAgIGN0eC5jbG9zZVBhdGgoKTtcbiAgICAgICAgICAgIGN0eC5zdHJva2UoKTtcbiAgICAgICAgfVxuICAgICAgICBjdHgucmVzdG9yZSgpO1xuXG4gICAgICAgIC8vIERyYXcgYnVsbGV0c1xuICAgICAgICBpZiAobnVtQnVsbGV0cyA+IDApIHtcbiAgICAgICAgICAgIGZvciAobGV0IGk9MDtpPG51bUJ1bGxldHM7aSsrKSB7XG4gICAgICAgICAgICAgICAgLy8gRGVzdHJveSBidWxsZXQgd2hlbiBpdCBnb2VzIG91dCBvZiB0aGUgc2NyZWVuXG4gICAgICAgICAgICAgICAgaWYgKGJ1bGxldHNbaV0uYnVsbGV0LnggPiB3aWR0aCB8fCBidWxsZXRzW2ldLmJ1bGxldC55ID4gaGVpZ2h0IHx8IGJ1bGxldHNbaV0uYnVsbGV0LnkgPCAwIHx8IGJ1bGxldHNbaV0uYnVsbGV0LnggPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGJ1bGxldHMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgICAgICBudW1CdWxsZXRzLS07XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGxldCBidWxsZXQgPSBidWxsZXRzW2ldLmJ1bGxldDtcbiAgICAgICAgICAgICAgICBsZXQgaW1wdWxzZSA9IGJ1bGxldHNbaV0uaW1wdWxzZTtcblxuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBidWxsZXRcbiAgICAgICAgICAgICAgICBidWxsZXQuYWNjZWxlcmF0ZShpbXB1bHNlLmdldFgoKSwgaW1wdWxzZS5nZXRZKCkpO1xuICAgICAgICAgICAgICAgIGJ1bGxldC51cGRhdGUoKTtcblxuICAgICAgICAgICAgICAgIC8vIERyYXcgYnVsbGV0XG4gICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICAgICAgICAgIGN0eC5hcmMoYnVsbGV0LngsIGJ1bGxldC55LCA0LCAwLCBNYXRoLlBJICogMiwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBcIiNGRjAwMDBcIjtcbiAgICAgICAgICAgICAgICBjdHguZmlsbCgpO1xuICAgICAgICAgICAgICAgIGN0eC5jbG9zZVBhdGgoKTtcbiAgICAgICAgICAgICAgICBjdHguc3Ryb2tlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8vIEhhbmRsZSBzaGlwIHBvc2l0aW9uaW5nIHdoZW4gb3V0IG9mIHNpZ2h0XG4gICAgICAgIGlmIChzaGlwLnggPiB3aWR0aCkge1xuICAgICAgICAgICAgc2hpcC54ID0gMDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2hpcC55ID4gaGVpZ2h0KSB7XG4gICAgICAgICAgICBzaGlwLnkgPSAwO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzaGlwLnggPCAwKSB7XG4gICAgICAgICAgICBzaGlwLnggPSB3aWR0aDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2hpcC55IDwgMCkge1xuICAgICAgICAgICAgc2hpcC55ID0gaGVpZ2h0O1xuICAgICAgICB9XG4gICAgfVxuXG5cbiAgICAvLyBBbmltYXRpb24gY29udHJvbDogS2V5RG93blxuICAgIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgKGUpID0+IHtcbiAgICAgICAgLy9jb25zb2xlLmxvZyhcIktleSBwcmVzc2VkOiBcIiwgZS5rZXlDb2RlKTtcbiAgICAgICAgc3dpdGNoIChlLmtleUNvZGUpIHtcbiAgICAgICAgICAgIGNhc2UgMzg6ICAgICAgICAgICAgICAgICAgICAgICAgLy8gVXBcbiAgICAgICAgICAgICAgICB0aHJ1c3RpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAzNzogICAgICAgICAgICAgICAgICAgICAgICAvLyBMZWZ0XG4gICAgICAgICAgICAgICAgdHVybmluZ0xlZnQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAzOTogICAgICAgICAgICAgICAgICAgICAgICAvLyBSaWdodFxuICAgICAgICAgICAgICAgIHR1cm5pbmdSaWdodCA9IHRydWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDI3OiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVzY1xuICAgICAgICAgICAgICAgIGlmIChwbGF5ZXIucGxheWluZykge1xuICAgICAgICAgICAgICAgICAgICBwbGF5ZXIuc3RvcCgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIj4gU2NlbmUgc3RvcHBlZFwiKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBwbGF5ZXIucGxheSgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIj4gUGxheWluZyBzY2VuZVwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBBbmltYXRpb24gY29udHJvbDogS2V5VXBcbiAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCAoZSkgPT4ge1xuICAgICAgICBzd2l0Y2ggKGUua2V5Q29kZSkge1xuICAgICAgICAgICAgY2FzZSAzODogICAgICAgICAgICAgICAgICAgICAgICAvLyBVcFxuICAgICAgICAgICAgICAgIHRocnVzdGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAzNzogICAgICAgICAgICAgICAgICAgICAgICAvLyBMZWZ0XG4gICAgICAgICAgICAgICAgdHVybmluZ0xlZnQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMzk6ICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmlnaHRcbiAgICAgICAgICAgICAgICB0dXJuaW5nUmlnaHQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMzI6ICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3BhY2VcbiAgICAgICAgICAgICAgICBmaXJpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIGZpcmluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH0sIDIwKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9KTtcbn07XG4iLCIvKlxuICogIEZlYXR1cmUgVG9nZ2xpbmdcbiAqXG4gKiAgQWN0aXZldGUvSGlkZSBmZWF0dXJlcyB0aGF0IGFyZSBpbiBwcm9jZXNzIG9mIGRldmVsb3BtZW50IG9yIHVuZGVyIHRlc3RpbmdcbiAqICBPbmNlIGEgZmVhdHVyZSBpcyBhY2NlcHRlZCB0byBiZSBpbmNsdWRkZWQgbXVzdCBiZSByZW1vdmVkIGZyb20gdGhlXG4gKiAgZmVhdHVyZSB0b2dnbGUgc2NoZW1lXG4gKi9cblxuIGNvbnN0IEZFQVRVUkVfVE9HR0xFID0ge1xuICAgRlBTX0NPTlRST0w6IHRydWUgICAgICAgICAgICAgICAgLy8gRlBTIGNvbnRyb2xsIGZvciBBbmltYXRpb25QbGF5ZXIgY2xhc3NcbiB9O1xuXG4gZXhwb3J0IGRlZmF1bHQgRkVBVFVSRV9UT0dHTEU7XG4iLCJpbXBvcnQgRkVBVFVSRV9UT0dHTEUgZnJvbSAnLi4vLi4vc3JjL2ZlYXR1cmUtdG9nZ2xlJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQW5pbWF0aW9uUGxheWVyIHtcblxuICBjb25zdHJ1Y3RvcihzZXR0aW5ncykge1xuICAgIHNldHRpbmdzID0gc2V0dGluZ3MgfHwge307XG5cbiAgICB0aGlzLndpbmRvdyA9IHNldHRpbmdzLndpbmRvd0VsZW1lbnQgfHwgd2luZG93O1xuICAgIHRoaXMucmVxdWVzdElkID0gbnVsbDtcbiAgICB0aGlzLnBsYXlpbmcgPSBmYWxzZTtcblxuICAgIC8vIEZQUyBjb250cm9sXG4gICAgdGhpcy5mcHMgPSBzZXR0aW5ncy5mcHMgfHwgOTA7XG4gICAgdGhpcy5ub3c7XG4gICAgdGhpcy5sYXN0VGltZSA9IERhdGUubm93KCk7XG4gICAgdGhpcy5pbnRlcnZhbCA9IDEwMDAvdGhpcy5mcHM7XG4gICAgdGhpcy5kZWx0YTtcblxuICAgIHRoaXMucmVnaXN0ZXJFdmVudHMoKTtcbiAgfVxuXG4gIHJlZ2lzdGVyRXZlbnRzKCkge1xuICAgIC8vIEFuaW1hdGlvbiBjb250cm9sOiBLZXlEb3duXG4gICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCAoZSkgPT4ge1xuICAgICAgLy9jb25zb2xlLmxvZyhcIktleSBwcmVzc2VkOiBcIiwgZS5rZXlDb2RlKTtcbiAgICAgIHN3aXRjaCAoZS5rZXlDb2RlKSB7XG4gICAgICAgIGNhc2UgMjc6ICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXNjXG4gICAgICAgIGlmICh0aGlzLnBsYXlpbmcpIHtcbiAgICAgICAgICB0aGlzLnN0b3AoKTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIj4gU2NlbmUgc3RvcHBlZFwiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnBsYXkoKTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIj4gUGxheWluZyBzY2VuZVwiKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIDEzOlxuICAgICAgICB0aGlzLnN0b3AoKTtcbiAgICAgICAgdGhpcy5wbGF5KCk7XG4gICAgICAgIHRoaXMuc3RvcCgpO1xuICAgICAgICBjb25zb2xlLmxvZyhcIj4gU3RlcCBmb3J3YXJkXCIpO1xuICAgICAgICBicmVhaztcblxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHBsYXkoKSB7XG4gICAgdGhpcy5wbGF5aW5nID0gdHJ1ZTtcbiAgICB0aGlzLnVwZGF0ZUZuKCk7XG4gIH1cblxuICBzdG9wKCkge1xuICAgIGlmICghdGhpcy5wbGF5aW5nKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHRoaXMud2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMucmVxdWVzdElkKTtcbiAgICB0aGlzLnBsYXlpbmcgPSBmYWxzZTtcbiAgICB0aGlzLnJlcXVlc3RJZCA9IG51bGw7XG4gIH1cblxuICBzZXRVcGRhdGVGbih1cGRhdGVGbikge1xuICAgIHRoaXMudXBkYXRlRm4gPSAoXG4gICAgICAoKSA9PiB7XG4gICAgICAgIHRoaXMucmVxdWVzdElkID0gdGhpcy53aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMudXBkYXRlRm4pO1xuICAgICAgICB0aGlzLm5vdyA9IERhdGUubm93KCk7XG4gICAgICAgIHRoaXMuZGVsdGEgPSB0aGlzLm5vdyAtIHRoaXMubGFzdFRpbWU7XG5cbiAgICAgICAgaWYgKHRoaXMuZGVsdGEgPiB0aGlzLmludGVydmFsKSB7XG4gICAgICAgICAgdGhpcy5sYXN0VGltZSA9IHRoaXMubm93IC0gKHRoaXMuZGVsdGEgJSB0aGlzLmludGVydmFsKTtcbiAgICAgICAgICB1cGRhdGVGbih0aGlzLmRlbHRhLCB0aGlzLmxhc3RUaW1lKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm47XG5cblxuICAgICAgICB1cGRhdGVGbigpO1xuXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICB1cGRhdGVGbigpIHtcbiAgICAgIGNvbnNvbGUud2FybihcIlBsYXllciB1cGRhdGUgZnVuY3Rpb24gaGFzIG5vdCBiZWVuIHNldC5cIik7XG4gICAgfVxuICB9XG4iLCJpbXBvcnQgRkVBVFVSRV9UT0dHTEUgZnJvbSAnLi4vLi4vc3JjL2ZlYXR1cmUtdG9nZ2xlJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGFydGljbGUge1xuXG4gIC8qXG4gICAqICAgUGFzcyAnYm94Qm91bmNlJyBhcyB7IHc6IDx3aXRoPiwgaDogPGhlaWdodD4gfSB0byBtYWtlIHBhcnRpY2xlIGJvdW5jZSBpbnNpZGUgYSBib3hcbiAgICpcbiAgICoqL1xuICAgIGNvbnN0cnVjdG9yKHNldHRpbmdzKSB7XG4gICAgICAgIHRoaXMueCA9IHNldHRpbmdzLnggfHwgMDtcbiAgICAgICAgdGhpcy55ID0gc2V0dGluZ3MueSB8fCAwO1xuICAgICAgICB0aGlzLnZ4ID0gKE1hdGguY29zKHNldHRpbmdzLmRpcmVjdGlvbikgKiBzZXR0aW5ncy5zcGVlZCkgfHwgMDtcbiAgICAgICAgdGhpcy52eSA9IChNYXRoLnNpbihzZXR0aW5ncy5kaXJlY3Rpb24pICogc2V0dGluZ3Muc3BlZWQpIHx8IDA7XG4gICAgICAgIHRoaXMuZ3Jhdml0eSA9IHNldHRpbmdzLmdyYXZpdHkgfHwgMDtcbiAgICAgICAgdGhpcy5tYXNzID0gc2V0dGluZ3MubWFzcyB8fCAxO1xuICAgICAgICB0aGlzLnJhZGl1cyA9IHNldHRpbmdzLnJhZGl1cyB8fCBzZXR0aW5ncy5tYXNzICogMC44NztcbiAgICAgICAgdGhpcy5mcmljdGlvbiA9IHNldHRpbmdzLmZyaWN0aW9uIHx8IDE7XG4gICAgICAgIHRoaXMuc3ByaW5ncyA9IFtdO1xuICAgICAgICB0aGlzLmdyYXZpdGF0aW9ucyA9IFtdO1xuICAgICAgICB0aGlzLnBvc2l0aW9uVXBkYXRlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmNvbG9yID0gc2V0dGluZ3MuY29sb3IgfHwgJ3JnYmEoMCwwLDAsMC42KSc7XG4gICAgICAgIHRoaXMuYm94Qm91bmNlID0gc2V0dGluZ3MuYm94Qm91bmNlIHx8IGZhbHNlO1xuICAgIH1cblxuICAgIC8qXG4gICAgICogIFVwZGF0ZXMgdGhlIHN0YXRlIG9mIHRoZSBwYXJ0aWNsZVxuICAgICAqL1xuICAgIHVwZGF0ZSgpIHtcbiAgICAgICAgbGV0IHggPSB0aGlzLng7XG4gICAgICAgIGxldCB5ID0gdGhpcy55O1xuXG4gICAgICAgIHRoaXMuaGFuZGxlU3ByaW5ncygpO1xuICAgICAgICB0aGlzLmhhbmRsZUdyYXZpdGF0aW9ucygpO1xuICAgICAgICB0aGlzLnZ5ICs9IHRoaXMuZ3Jhdml0eTtcbiAgICAgICAgdGhpcy52eCAqPSB0aGlzLmZyaWN0aW9uO1xuICAgICAgICB0aGlzLnZ5ICo9IHRoaXMuZnJpY3Rpb247XG4gICAgICAgIHRoaXMueCArPSB0aGlzLnZ4O1xuICAgICAgICB0aGlzLnkgKz0gdGhpcy52eTtcblxuICAgICAgICBpZiAodGhpcy5ib3hCb3VuY2UpIHtcbiAgICAgICAgICB0aGlzLmNoZWNrQm9yZGVycyh0aGlzLmJveEJvdW5jZS53LCB0aGlzLmJveEJvdW5jZS5oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh4ICE9PSB0aGlzLnggJiYgeSAhPT0gdGhpcy55KSB7XG4gICAgICAgICAgdGhpcy5wb3NpdGlvblVwZGF0ZWQgPSB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKlxuICAgICAqICBHZXRzIHRoZSBsZW5ndGggb2YgdGhlIHZlbG9jaXR5IHZlY3Rvciwgd2hpY2ggZXF1YWxzIHRvIHRoZSBoeXBvdGVudXNlXG4gICAgICovXG4gICAgZ2V0U3BlZWQoKSB7XG4gICAgICAgIHJldHVybiBNYXRoLnNxcnQodGhpcy52eCAqIHRoaXMudnggKyB0aGlzLnZ5ICogdGhpcy52eSk7XG4gICAgfVxuXG4gICAgLypcbiAgICAgKiAgVXNpbmcgdGhlIGFjdHVhbCBWZWxvY2l0eSB2ZWN0b3IncyBhbmdsZSwgc2V0cyBhIG5ldyBsZW5ndGggZm9yIGl0XG4gICAgICovXG4gICAgc2V0U3BlZWQoc3BlZWQpIHtcbiAgICAgICAgbGV0IGhlYWRpbmcgPSB0aGlzLmdldEhlYWRpbmcoKTtcbiAgICAgICAgdGhpcy52eCA9IE1hdGguY29zKGhlYWRpbmcpICogc3BlZWQ7XG4gICAgICAgIHRoaXMudnkgPSBNYXRoLnNpbihoZWFkaW5nKSAqIHNwZWVkO1xuICAgIH1cblxuICAgIC8qXG4gICAgICogIEdldHMgdGhlIGFuZ2xlIGRpcmVjdGlvbiBvZiB0aGUgdmVsb2NpdHkgdmVjdG9yXG4gICAgICovXG4gICAgZ2V0SGVhZGluZygpIHtcbiAgICAgICAgcmV0dXJuIE1hdGguYXRhbjIodGhpcy52eSwgdGhpcy52eCk7XG4gICAgfVxuXG4gICAgLypcbiAgICAgKiAgQ2hhbmdlcyB0aGUgVmVsb2NpdHkgdmVjdG9yJ3MgYW5nbGUgYW5kIHJlY2FsY3VsYXRlIGNvb3JkaW5hdGVzXG4gICAgICovXG4gICAgc2V0SGVhZGluZyhoZWFkaW5nKSB7XG4gICAgICAgIGxldCBzcGVlZCA9IHRoaXMuZ2V0U3BlZWQoKTtcbiAgICAgICAgdGhpcy52eCA9IE1hdGguY29zKGhlYWRpbmcpICogc3BlZWQ7XG4gICAgICAgIHRoaXMudnkgPSBNYXRoLnNpbihoZWFkaW5nKSAqIHNwZWVkO1xuICAgIH1cblxuICAgIC8qXG4gICAgICogIFN1bXMgdG8gdGhlIFZlbG9jaXR5IHZlY3RvciB4IGFuZCB5IHZhbHVlc1xuICAgICAqL1xuICAgIGFjY2VsZXJhdGUoeCwgeSkge1xuICAgICAgICB0aGlzLnZ4ICs9IHg7XG4gICAgICAgIHRoaXMudnkgKz0geTtcbiAgICB9XG5cbiAgICAvKlxuICAgICogIEJvdW5jZSBpZiB0aGUgcGFydGljbGUgaGl0cyB0aGUgYm94IChpLmUuIHNjcmVlbikgYm9yZGVyc1xuICAgICovXG4gICAgY2hlY2tCb3JkZXJzKHdpZHRoLCBoZWlnaHQpIHtcbiAgICAgIGlmICh0aGlzLnggKyB0aGlzLnJhZGl1cyA+PSB3aWR0aCkge1xuICAgICAgICB0aGlzLnggPSB3aWR0aCAtIHRoaXMucmFkaXVzO1xuICAgICAgICB0aGlzLnZ4ICo9ICAtMTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy54IC0gdGhpcy5yYWRpdXMgPD0gMCkge1xuICAgICAgICB0aGlzLnggPSB0aGlzLnJhZGl1cztcbiAgICAgICAgdGhpcy52eCAqPSAtMTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMueSArIHRoaXMucmFkaXVzID49IGhlaWdodCkge1xuICAgICAgICB0aGlzLnkgPSBoZWlnaHQgLSB0aGlzLnJhZGl1cztcbiAgICAgICAgdGhpcy52eSAqPSAgLTE7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMueSAtIHRoaXMucmFkaXVzIDw9IDApIHtcbiAgICAgICAgdGhpcy55ID0gdGhpcy5yYWRpdXM7XG4gICAgICAgIHRoaXMudnkgKj0gLTE7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLypcbiAgICAgKiAgQ2FsY3VsYXRlcyB0aGUgYW5nbGUgYmV0d2VlbiB0aGlzIHBhcnRpY2xlIGFuZCAncDInXG4gICAgICovXG4gICAgYW5nbGVUbyhwMikge1xuICAgICAgICByZXR1cm4gTWF0aC5hdGFuMihwMi55IC0gdGhpcy55LCBwMi54IC0gdGhpcy54KTtcbiAgICB9XG5cbiAgICAvKlxuICAgICAqICBDYWxjdWxhdGVzIHRoZSBkaXN0YW5jZSB0byBhIGdpdmVuIHBhcnRpY2xlXG4gICAgICovXG4gICAgZGlzdGFuY2VUbyhwKSB7XG4gICAgICAgIGxldCBkeCA9IHAueCAtIHRoaXMueDtcbiAgICAgICAgbGV0IGR5ID0gcC55IC0gdGhpcy55O1xuICAgICAgICByZXR1cm4gTWF0aC5zcXJ0KGR4ICogZHggKyBkeSAqIGR5KTtcbiAgICB9XG5cbiAgICAvKlxuICAgICAqICBDYWxjdWxhdGVzIGFuZCBhcHBsaWVzIGEgZ3Jhdml0YXRpb24gdmVjdG9yIHRvIGEgZ2l2ZW4gcGFydGljbGVcbiAgICAgKi9cbiAgICAgZ3Jhdml0YXRlVG8ocCwgZ3Jhdml0eUZhY3Rvcikge1xuICAgICAgICAgZ3Jhdml0eUZhY3RvciA9IGdyYXZpdHlGYWN0b3IgfHwgMC4wNDtcblxuICAgICAgICAgbGV0IHJhZGl1c1N1bSA9IHRoaXMucmFkaXVzICsgcC5yYWRpdXM7XG4gICAgICAgICBsZXQgbWFzc0ZhY3RvciA9IHRoaXMubWFzcyAqIHAubWFzcztcblxuICAgICAgICAgbGV0IGR4ID0gcC54IC0gdGhpcy54O1xuICAgICAgICAgbGV0IGR5ID0gcC55IC0gdGhpcy55O1xuICAgICAgICAgbGV0IGRpc3RTUSA9IChkeCAqIGR4KSArIChkeSAqIGR5KTtcbiAgICAgICAgIGxldCBkaXN0ID0gTWF0aC5zcXJ0KGRpc3RTUSk7XG4gICAgICAgICBsZXQgc3VyZmFjZURpc3QgPSBkaXN0IC0gcmFkaXVzU3VtO1xuXG4gICAgICAgICAvLyBDYW5jZWwgZ3Jhdml0YXRpb24gb25jZSBvYmplY3RzIGNvbGxpZGVcbiAgICAgICAgIC8vIFRPRE86IFZlcmlmeSBpZiB3ZSBjYW4gc2F2ZSB0aGUgTWF0aC5zcXJ0KCkgY29tcGFyaW5nIHNxdWFyZXNcbiAgICAgICAgIGlmIChkaXN0IDwgcmFkaXVzU3VtICsgNSkge1xuICAgICAgICAgICByZXR1cm47XG4gICAgICAgICB9XG5cbiAgICAgICAgIC8vbGV0IGZvcmNlID0gKHAubWFzcykgLyBkaXN0U1E7IC8vIEZvcmNlID0gbWFzcyAvIHNxdWFyZSBvZiB0aGUgZGlzdGFuY2VcbiAgICAgICAgIGxldCBmb3JjZSA9IGdyYXZpdHlGYWN0b3IgKiBtYXNzRmFjdG9yIC8gKHN1cmZhY2VEaXN0ICogc3VyZmFjZURpc3QpO1xuXG4gICAgICAgICBsZXQgYXggPSAoZHggLyBzdXJmYWNlRGlzdCkgKiBmb3JjZTtcbiAgICAgICAgIGxldCBheSA9IChkeSAvIHN1cmZhY2VEaXN0KSAqIGZvcmNlO1xuXG4gICAgICAgICB0aGlzLnZ4ICs9IGF4O1xuICAgICAgICAgdGhpcy52eSArPSBheTtcbiAgICAgfVxuXG4gICAgLypcbiAgICAgKiAgUmVnaXN0ZXJzIGEgcGFydGljbGUgdG8gZ3Jhdml0YXRlIHRvXG4gICAgICovXG4gICAgYWRkR3Jhdml0YXRpb24ocCkge1xuICAgICAgICB0aGlzLnJlbW92ZUdyYXZpdGF0aW9uKHApO1xuICAgICAgICB0aGlzLmdyYXZpdGF0aW9ucy5wdXNoKHApO1xuICAgIH1cblxuICAgIC8qXG4gICAgICogIFVucmVnaXN0ZXJzIGEgZ3Jhdml0YXRpb24gcGFydGljbGVcbiAgICAgKi9cbiAgICByZW1vdmVHcmF2aXRhdGlvbihwKSB7XG4gICAgICAgIGxldCBsZW5ndGggPSB0aGlzLmdyYXZpdGF0aW9ucy5sZW5ndGg7XG4gICAgICAgIGZvciAobGV0IGk9MDsgaTxsZW5ndGg7IGkrKyl7XG4gICAgICAgICAgICBpZiAodGhpcy5ncmF2aXRhdGlvbnNbaV0gPT09IHApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmdyYXZpdGF0aW9ucy5zbGljZShpLCAxKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qXG4gICAgICogIEdyYXZpdGF0ZXMgdG8gZWFjaCByZWdpc3RlcmVkIGdyYXZpdGF0aW9uIHBhcnRpY2xlXG4gICAgICovXG4gICAgaGFuZGxlR3Jhdml0YXRpb25zKCkge1xuICAgICAgICBsZXQgbGVuZ3RoID0gdGhpcy5ncmF2aXRhdGlvbnMubGVuZ3RoO1xuICAgICAgICBmb3IgKGxldCBpPTA7IGk8bGVuZ3RoOyBpKyspe1xuICAgICAgICAgICAgdGhpcy5ncmF2aXRhdGVUbyh0aGlzLmdyYXZpdGF0aW9uc1tpXSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKlxuICAgICAqICBDYWxjdWxhdGVzIGFuZCBhcHBsaWVzIGEgc3ByaW5nIHZlY3RvciB0byBhIGdpdmVuIHBvaW50XG4gICAgICovXG4gICAgc3ByaW5nVG8ocG9pbnQsIGssIGxlbmd0aCkge1xuICAgICAgICBsZXQgZHggPSBwb2ludC54IC0gdGhpcy54O1xuICAgICAgICBsZXQgZHkgPSBwb2ludC55IC0gdGhpcy55O1xuICAgICAgICBsZXQgZGlzdGFuY2UgPSBNYXRoLnNxcnQoZHggKiBkeCArIGR5ICogZHkpO1xuICAgICAgICBsZXQgZm9yY2UgPSAoZGlzdGFuY2UgLSBsZW5ndGggfHwgMCkgKiBrO1xuICAgICAgICAvLyBJbnN0ZWFkIG9mIGdldHRpbmcgY29zIC8gc2luIG9mIGFuZ2xlLCBkaXZpZGUgc2lkZXMgYnkgaHlwb3RlbnVzZVxuICAgICAgICB0aGlzLnZ4ICs9IChkeCAvIGRpc3RhbmNlKSAqIGZvcmNlO1xuICAgICAgICB0aGlzLnZ5ICs9IChkeSAvIGRpc3RhbmNlKSAqIGZvcmNlO1xuICAgIH1cblxuICAgIC8qXG4gICAgICogIFJlZ2lzdGVycyBhIG5ldyBzcHJpbmcgcG9pbnRcbiAgICAgKi9cbiAgICBhZGRTcHJpbmcocG9pbnQsIGssIGxlbmd0aCkge1xuICAgICAgICB0aGlzLnJlbW92ZVNwcmluZyhwb2ludCk7XG4gICAgICAgIHRoaXMuc3ByaW5ncy5wdXNoKHtcbiAgICAgICAgICAgIHBvaW50OiBwb2ludCxcbiAgICAgICAgICAgIGs6IGssXG4gICAgICAgICAgICBsZW5ndGg6IGxlbmd0aCB8fCAwXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qXG4gICAgICogIFVucmVnaXN0ZXJzIGEgc3ByaW5nIHBvaW50XG4gICAgICovXG4gICAgcmVtb3ZlU3ByaW5nKHBvaW50KSB7XG4gICAgICAgIGxldCBsZW5ndGggPSB0aGlzLnNwcmluZ3MubGVuZ3RoO1xuICAgICAgICBmb3IgKGxldCBpPTA7IGk8bGVuZ3RoOyBpKyspe1xuICAgICAgICAgICAgaWYgKHRoaXMuc3ByaW5nc1tpXS5wb2ludCA9PT0gcG9pbnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNwcmluZ3Muc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuXG4gICAgLypcbiAgICAgKiAgU3ByaW5ncyB0byBlYWNoIHJlZ2lzdGVyZWQgc3ByaW5nIHBvaW50XG4gICAgICovXG4gICAgaGFuZGxlU3ByaW5ncygpIHtcbiAgICAgICAgbGV0IGxlbmd0aCA9IHRoaXMuc3ByaW5ncy5sZW5ndGg7XG4gICAgICAgIGZvciAobGV0IGk9MDsgaTxsZW5ndGg7IGkrKyl7XG4gICAgICAgICAgICBsZXQgc3ByaW5nID0gdGhpcy5zcHJpbmdzW2ldO1xuICAgICAgICAgICAgdGhpcy5zcHJpbmdUbyhzcHJpbmcucG9pbnQsIHNwcmluZy5rLCBzcHJpbmcubGVuZ3RoKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCBGRUFUVVJFX1RPR0dMRSBmcm9tICcuLi8uLi9zcmMvZmVhdHVyZS10b2dnbGUnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBWZWN0b3Ige1xuXG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzKSB7XG4gICAgc2V0dGluZ3MgPSBzZXR0aW5ncyB8fCB7fTtcbiAgICBzZXR0aW5ncy54ID0gc2V0dGluZ3MueCB8fCAwO1xuICAgIHNldHRpbmdzLnkgPSBzZXR0aW5ncy55IHx8IDA7XG4gICAgc2V0dGluZ3MubGVuZ3RoID0gc2V0dGluZ3MubGVuZ3RoIHx8IDA7XG4gICAgc2V0dGluZ3MuYW5nbGUgPSBzZXR0aW5ncy5hbmdsZSB8fCAwO1xuXG4gICAgdGhpcy5feCA9IHNldHRpbmdzLng7XG4gICAgdGhpcy5feSA9IHNldHRpbmdzLnk7XG5cbiAgICBpZiAoc2V0dGluZ3MubGVuZ3RoKSB7XG4gICAgICB0aGlzLnNldExlbmd0aChzZXR0aW5ncy5sZW5ndGgpO1xuICAgIH1cbiAgICBpZiAoc2V0dGluZ3MuYW5nbGUpIHtcbiAgICAgIHRoaXMuc2V0QW5nbGUoc2V0dGluZ3MuYW5nbGUpO1xuICAgIH1cbiAgfVxuXG4gIHNldFgodmFsdWUpIHtcbiAgICB0aGlzLl94ID0gdmFsdWU7XG4gIH1cblxuICBnZXRYKHZhbHVlKSB7XG4gICAgcmV0dXJuIHRoaXMuX3g7XG4gIH1cblxuICBzZXRZKHZhbHVlKSB7XG4gICAgdGhpcy5feSA9IHZhbHVlO1xuICB9XG5cbiAgZ2V0WSh2YWx1ZSkge1xuICAgIHJldHVybiB0aGlzLl95O1xuICB9XG5cbiAgc2V0QW5nbGUoYW5nbGUpIHtcbiAgICBsZXQgbGVuZ3RoID0gdGhpcy5nZXRMZW5ndGgoKTtcbiAgICB0aGlzLl94ID0gTWF0aC5jb3MoYW5nbGUpICogbGVuZ3RoO1xuICAgIHRoaXMuX3kgPSBNYXRoLnNpbihhbmdsZSkgKiBsZW5ndGg7XG4gIH1cblxuICBnZXRBbmdsZSgpIHtcbiAgICByZXR1cm4gTWF0aC5hdGFuMih0aGlzLl95LCB0aGlzLl94KTtcbiAgfVxuXG4gIHNldExlbmd0aChsZW5ndGgpIHtcbiAgICBsZXQgYW5nbGUgPSB0aGlzLmdldEFuZ2xlKCk7XG4gICAgdGhpcy5feCA9IE1hdGguY29zKGFuZ2xlKSAqIGxlbmd0aDtcbiAgICB0aGlzLl95ID0gTWF0aC5zaW4oYW5nbGUpICogbGVuZ3RoO1xuICB9XG5cbiAgZ2V0TGVuZ3RoKCkge1xuICAgIHJldHVybiBNYXRoLnNxcnQodGhpcy5feCAqIHRoaXMuX3ggKyB0aGlzLl95ICogdGhpcy5feSk7XG4gIH1cblxuICBhZGQodmVjdG9yKSB7XG4gICAgcmV0dXJuIG5ldyBWZWN0b3IoeyB4OiB0aGlzLl94ICsgdmVjdG9yLmdldFgoKSwgeTogdGhpcy5feSArIHZlY3Rvci5nZXRZKCkgfSk7XG4gIH1cblxuICBzdWJzdHJhY3QodmVjdG9yKSB7XG4gICAgcmV0dXJuIG5ldyBWZWN0b3IoeyB4OiB0aGlzLl94IC0gdmVjdG9yLmdldFgoKSwgeTogdGhpcy5feSAtIHZlY3Rvci5nZXRZKCkgfSk7XG4gIH1cblxuICBtdWx0aXBseSh2YWx1ZSkge1xuICAgIHJldHVybiBuZXcgVmVjdG9yKHsgeDogdGhpcy5feCAqIHZhbHVlLCB5OiB0aGlzLl95ICogdmFsdWUgfSk7XG4gIH1cblxuICBkaXZpZGUodmFsdWUpIHtcbiAgICByZXR1cm4gbmV3IFZlY3Rvcih7IHg6IHRoaXMuX3ggLyB2YWx1ZSwgeTogdGhpcy5feSAvIHZhbHVlIH0pO1xuICB9XG5cbiAgYWRkVG8odmVjdG9yKSB7XG4gICAgdGhpcy5feCArPSB2ZWN0b3IuZ2V0WCgpO1xuICAgIHRoaXMuX3kgKz0gdmVjdG9yLmdldFkoKTtcbiAgfVxuXG4gIHN1YnN0cmFjdEZyb20odmVjdG9yKSB7XG4gICAgdGhpcy5feCAtPSB2ZWN0b3IuZ2V0WCgpO1xuICAgIHRoaXMuX3kgLT0gdmVjdG9yLmdldFkoKTtcbiAgfVxuXG4gIG11bHRpcGx5QnkodmFsdWUpIHtcbiAgICB0aGlzLl94ICo9IHZhbHVlO1xuICAgIHRoaXMuX3kgKj0gdmFsdWU7XG4gIH1cblxuICBkaXZpZGVCeSh2YWx1ZSkge1xuICAgIHRoaXMuX3ggLz0gdmFsdWU7XG4gICAgdGhpcy5feSAvPSB2YWx1ZTtcbiAgfVxuXG4gIGNvcHkoKSB7XG4gICAgcmV0dXJuIG5ldyBWZWN0b3Ioe1xuICAgICAgeDogdGhpcy5nZXRYKCksXG4gICAgICB5OiB0aGlzLmdldFkoKVxuICAgIH0pO1xuICB9XG5cbiAgbm9ybWFsaXplKCkge1xuICAgIHZhciBsZW5ndGggPSB0aGlzLmdldExlbmd0aCgpO1xuICAgIGlmIChsZW5ndGggIT0gMCkge1xuICAgICAgdGhpcy5kaXZpZGVCeShsZW5ndGgpO1xuICAgIH1cbiAgfVxuXG4gIGxpbWl0KG4pIHtcbiAgICBpZiAodGhpcy5nZXRMZW5ndGgoKSA+IG4pIHtcbiAgICAgIHRoaXMuc2V0TGVuZ3RoKG4pO1xuICAgIH1cbiAgfVxufTtcbiJdfQ=="}