{"version":3,"sources":["node_modules/browser-pack/_prelude.js","projects/solar-sys/app.js","projects/solar-sys/lib/CelestialBody.js","projects/solar-sys/lib/Planet.js","projects/solar-sys/lib/Star.js","src/feature-toggle.js","src/lib/AnimationPlayer.js","src/lib/Particle.js"],"names":[],"mappings":"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","file":"app.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","import Star from './lib/Star';\nimport Planet from './lib/Planet';\nimport AnimationPlayer from '../../src/lib/AnimationPlayer';\n\nwindow.onload = () => {\n    const canvas = document.getElementById(\"canvas\");\n    const ctx = canvas.getContext(\"2d\");\n    const width = canvas.width = window.innerWidth-4;\n    const height = canvas.height = window.innerHeight-4;\n    const center = {\n      x: width / 2,\n      y: height / 2\n    };\n\n    // World data\n    let world = {\n      ctx: ctx,\n      width: width,\n      height: height,\n      center: center,\n      scale: 1,\n      lastScale: 0,\n      trans_x: 0,\n      trans_y: 0,\n      needsUpdate: false,\n      update: function() {\n        this.needsUpdate = this.lastScale != this.scale;\n      }\n    };\n\n    let player = new AnimationPlayer({ fps: 60 });\n\n    let sunSetup = {\n        x: center.x,\n        y: center.y,\n        mass: 500,\n        speed: 0,\n        color: \"#D6D32D\",\n        center: false\n    };\n\n    let planetsSetup = [{\n        x: center.x + 504,\n        y: center.y,\n        speed: 1.428,\n        direction: Math.PI / 2,\n        color: '#FA1616',\n        mass: 25.5,\n        center: false\n     },{\n        x: center.x + 220,\n        y: center.y,\n        speed: 2.41876606819402505,\n        direction: Math.PI / 2,\n        color: '#808231',\n        mass: 10,\n        center: false\n    },{\n        x: center.x - 380,\n        y: center.y,\n        speed: 1.159,\n        direction: -Math.PI / 2,\n        color: '#4042A8',\n        mass: 10,\n        center: false\n    },{\n        x: center.x - 480,\n        y: center.y,\n        speed: 1.567,\n        direction: -Math.PI / 2,\n        color: '#47BFBD',\n        mass: 28,\n        center: false\n    },{\n        x: center.x - 620,\n        y: center.y,\n        speed: 2,\n        direction: -Math.PI / 2,\n        color: '#AB3A2B',\n        mass: 68,\n        center: true\n    },{\n        x: center.x + 2292,\n        y: center.y,\n        speed: 1.6,\n        direction: Math.PI / 2,\n        color: '#2B7523',\n        mass: 227,\n        center: false\n    },{\n        x: center.x + 960,\n        y: center.y,\n        speed: 1.5,\n        direction: Math.PI / 2,\n        color: '#6C29A3',\n        mass: 73,\n        center: false\n    },{\n        x: center.x + 1849,\n        y: center.y,\n        speed: 1.53,\n        direction: Math.PI / 2,\n        color: '#A7A2AB',\n        mass: 183,\n        center: false\n     }\n\n   ];\n\n\n    // Setup planets\n    let planets = createPlanets(planetsSetup);\n\n    // Setup sun\n    let sun = createSun(sunSetup);\n\n    // All celestial bodies\n    planets.push(sun);\n\n    // Demo player\n    player.setUpdateFn(update);\n    player.play();\n\n\n    // Reference framework\n    let ctxX;\n    let ctxY;\n    let centerObject;\n\n    // Frame drawing function\n    function update() {\n      ctx.clearRect(0, 0, world.width, world.height);\n\n      let totalPlanets = planets.length;\n\n      // Update planets\n      for (let i=0; i<totalPlanets; i++) {\n        let p = planets[i];\n        p.update();\n\n        if (p instanceof Planet) {\n          planets[i].gravitateTo(sun);\n        }\n\n        // Adjust reference framework to the center body: planet or sun\n        if (p.center) {\n          centerObject = p;\n          ctxX = (world.center.x - p.x) * world.scale + world.trans_x;\n          ctxY = (world.center.y - p.y) * world.scale + world.trans_y;\n        }\n\n      }\n\n      ctx.save();\n      ctx.translate(ctxX, ctxY);\n\n      // Draw planets\n      for (let i=0; i<totalPlanets; i++) {\n        let p = planets[i];\n\n        if (p.center) {\n          continue;\n        }\n\n        p.draw(sun);\n      }\n\n      ctx.restore();\n\n      // Draw center body\n      centerObject.draw(sun);\n\n      world.update();\n    }\n\n\n    /** Helpers **/\n\n    function createSun(config) {\n      return new Star(config, world);\n    }\n\n    function createPlanets(config) {\n        let total = config.length;\n        let planets = [];\n\n        for (let i=0; i<total; i++) {\n          let p = new Planet(config[i], world);\n          if (config[i].debugOrbit) {\n            p.debugOrbit = true;\n          }\n          planets.push(p);\n        }\n        return planets;\n    }\n\n\n\n    /** Events **/\n\n    // Animation control: KeyDown\n    document.body.addEventListener(\"keydown\", (e) => {\n        //console.log(\"Key pressed: \", e.keyCode);\n        switch (e.keyCode) {\n            case 27:                        // Esc\n              if (player.playing) {\n                  player.stop();\n                  console.log(\"> Scene stopped\");\n              } else {\n                  player.play();\n                  console.log(\"> Playing scene\");\n              }\n              break;\n              case 13:                        // Esc\n                if (player.playing) {\n                    player.stop();\n                }\n\n                player.play();\n                player.stop();\n\n                break;\n            default:\n                break;\n        }\n    });\n\n    document.body.addEventListener(\"mousewheel\", MouseWheelHandler, false);\n\n    function MouseWheelHandler(e) {\n      let delta = Math.max(-1, Math.min(1, (e.wheelDelta || -e.detail)));\n      let scaleFactor = world.scale * 0.1;\n      if(delta > 0){\n          world.scale += scaleFactor;\n      } else {\n          world.scale -= scaleFactor;\n      }\n    }\n\n};\n","import Particle from '../../../src/lib/Particle';\n\nexport default class CelestialBody extends Particle {\n\n  constructor(settings, world) {\n    super(settings);\n\n    this.world = world;\n    this.ctx = world.ctx;\n\n    this.color = this.hexToRGB(settings.color);\n    this.radius = settings.mass * 0.2;\n    this.center = settings.center;\n\n    this.scaledX = 0;\n    this.scaledY = 0;\n    this.scaledR = 0;\n\n    this.reScale();\n  }\n\n  reScale() {\n    this.scaledX = (this.x - this.world.center.x) * this.world.scale + this.world.center.x + this.world.trans_x;\n    this.scaledY = (this.y - this.world.center.y) * this.world.scale + this.world.center.y + this.world.trans_y;\n    this.scaledR = this.radius * this.world.scale;\n  }\n\n  draw() { }\n\n  drawShadow(lightSource) {\n\n    // Shadow props\n    let radius = this.scaledR;\n    let sX, sY;\n    let shadowRadius = radius * 2.7;\n    let shadowLineWidth = radius * 0.81;\n    let shadowBlur = shadowRadius * 0.6;\n\n    // Get the angle & distance depending on the reference framework\n    let dx, dy;\n    let dist = 0;\n    if (this.center) {\n      dx = this.x - lightSource.x;\n      dy = this.y - lightSource.y;\n    } else {\n      dx = this.scaledX - lightSource.scaledX;\n      dy = this.scaledY - lightSource.scaledY;\n      dist = Math.sqrt(dx * dx + dy * dy);\n    }\n\n    // Get distance from source\n    let angle = Math.atan2(dy, dx);\n\n    // Calculate shadow-circle's coordinates\n    let x = lightSource.x + Math.cos(angle) * (dist - shadowRadius + radius * 1);\n    let y = lightSource.y + Math.sin(angle) * (dist - shadowRadius + radius * 1);\n\n\n    // Shadow setup\n    this.ctx.save();\n\n    this.ctx.shadowOffsetX = 0;\n    this.ctx.shadowOffsetY = 0;\n    this.ctx.shadowBlur = shadowBlur;\n    this.ctx.shadowColor = 'rgba(0,0,0,1)';\n\n    //clip range by planet area.\n    this.ctx.clip();\n\n    // Draw shadow\n    this.ctx.beginPath();\n    this.ctx.lineWidth = shadowLineWidth;\n    this.ctx.strokeStyle = 'rgba(0,0,0,1)';\n    this.ctx.arc(x, y, shadowRadius, 0, Math.PI*2);\n    this.ctx.stroke();\n    this.ctx.stroke();\n    this.ctx.stroke();\n    this.ctx.stroke();\n    this.ctx.stroke();\n    this.ctx.stroke();\n\n    this.ctx.restore();\n  }\n\n  createGradient() {\n    let grad = this.ctx.createRadialGradient(this.scaledX, this.scaledY, this.scaledR/4, this.scaledX, this.scaledY, this.scaledR);\n    // grad.addColorStop(0,\"#FF7\");\n    // grad.addColorStop(0.6,\"#FF4\");\n    // grad.addColorStop(0.8,\"#FF0\");\n    // grad.addColorStop(1,\"#DC0\");\n\n    let step1 = {\n      r: this.color.r + Math.floor((255 - this.color.r) * 0.26),\n      g: this.color.g + Math.floor((255 - this.color.g) * 0.26),\n      b: this.color.b + Math.floor((255 - this.color.b) * 0.26)\n    };\n\n    let step2 = {\n      r: this.color.r +  + Math.floor((255 - this.color.r) * 0.17),\n      g: this.color.g +  + Math.floor((255 - this.color.r) * 0.17),\n      b: this.color.b +  + Math.floor((255 - this.color.r) * 0.17)\n    };\n\n    let step3 = {\n      r: this.color.r,\n      g: this.color.g,\n      b: this.color.b\n    };\n\n\n    grad.addColorStop(0.2, 'rgba('+ step1.r +', '+ step1.g +', '+ step1.b +', 1)');\n    grad.addColorStop(0.8, 'rgba('+ step2.r +', '+ step2.g +', '+ step2.b +', 1)');\n    grad.addColorStop(1, 'rgba('+ step3.r +', '+ step3.g +', '+ step3.b +', 1)');\n\n    return grad;\n  }\n\n  hexToRGB(hex) {\n    let result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n    return result ? {\n        r: parseInt(result[1], 16),\n        g: parseInt(result[2], 16),\n        b: parseInt(result[3], 16)\n    } : null;\n  }\n};\n","import CelestialBody from './CelestialBody';\n\nexport default class Planet extends CelestialBody {\n\n  constructor(settings, world) {\n    super(settings, world);\n\n    this.grad = this.createGradient();\n  }\n\n  draw(lightSource, drawShadow) {\n    lightSource = lightSource || null;\n    drawShadow = drawShadow == false ? false:true;\n\n    this.reScale();\n\n    if (this.world.needsUpdate) {\n      this.grad = this.createGradient();\n    }\n\n    if (this.scaledR < 0) {\n      return;\n    }\n\n    let x, y;\n    switch (this.center) {\n      case false:\n        x = this.scaledX;\n        y = this.scaledY;\n        break;\n      case true:\n        x = this.world.center.x;\n        y = this.world.center.y;\n        break;\n    }\n\n    this.ctx.beginPath();\n    this.ctx.fillStyle = this.grad;\n    this.ctx.arc(x, y, this.scaledR, 0, Math.PI * 2, false);\n    this.ctx.fill();\n\n    if (lightSource && drawShadow) {\n      this.drawShadow(lightSource);\n    }\n\n\n\n    // Debug draw orbit\n    if (this.debugOrbit && !this.center) {\n\n      // Show orbit prediction\n      let predict = new Planet({\n        x: this.x,\n        y: this.y,\n        mass: this.mass,\n        direction: this.getHeading(),\n        speed: this.getSpeed(),\n        color: \"#ffffff\",\n        center: false\n      }, this.world);\n\n      for (let pr=0; pr<=2000; pr++) {\n\n        predict.update();\n        predict.gravitateTo(lightSource);\n        predict.draw(lightSource, false);\n      }\n    }\n  }\n\n};\n","import CelestialBody from './CelestialBody';\n\nexport default class Planet extends CelestialBody {\n\n  constructor(settings, world) {\n    super(settings, world);\n\n    this.grad = this.createGradient();\n  }\n\n  draw() {\n    this.reScale();\n\n    if (this.scaledR < 0) {\n      return;\n    }\n\n    if (this.world.needsUpdate) {\n      this.grad = this.createGradient();\n    }\n\n    this.ctx.fillStyle = this.grad;\n    this.ctx.beginPath();\n    this.ctx.arc(this.scaledX, this.scaledY, this.scaledR, 0, Math.PI * 2);\n    this.ctx.fill();\n  }\n\n};\n","/*\n *  Feature Toggling\n *\n *  Activete/Hide features that are in process of development or under testing\n *  Once a feature is accepted to be includded must be removed from the\n *  feature toggle scheme\n */\n\n const FEATURE_TOGGLE = {\n   FPS_CONTROL: true                // FPS controll for AnimationPlayer class\n };\n\n export default FEATURE_TOGGLE;\n","import FEATURE_TOGGLE from '../../src/feature-toggle';\n\nexport default class AnimationPlayer {\n\n  constructor(settings) {\n    settings = settings || {};\n\n    this.window = settings.windowElement || window;\n    this.requestId = null;\n    this.playing = false;\n\n    // FPS control\n    this.fps = settings.fps || 90;\n    this.now;\n    this.lastTime = Date.now();\n    this.interval = 1000/this.fps;\n    this.delta;\n\n    this.registerEvents();\n  }\n\n  registerEvents() {\n    // Animation control: KeyDown\n    document.body.addEventListener(\"keydown\", (e) => {\n      //console.log(\"Key pressed: \", e.keyCode);\n      switch (e.keyCode) {\n        case 27:                        // Esc\n        if (this.playing) {\n          this.stop();\n          console.log(\"> Scene stopped\");\n        } else {\n          this.play();\n          console.log(\"> Playing scene\");\n        }\n        break;\n\n        case 13:\n        this.stop();\n        this.play();\n        this.stop();\n        console.log(\"> Step forward\");\n        break;\n\n        default:\n        break;\n      }\n    });\n  }\n\n  play() {\n    this.playing = true;\n    this.updateFn();\n  }\n\n  stop() {\n    if (!this.playing) {\n      return false;\n    }\n    this.window.cancelAnimationFrame(this.requestId);\n    this.playing = false;\n    this.requestId = null;\n  }\n\n  setUpdateFn(updateFn) {\n    this.updateFn = (\n      () => {\n        this.requestId = this.window.requestAnimationFrame(this.updateFn);\n        this.now = Date.now();\n        this.delta = this.now - this.lastTime;\n\n        if (this.delta > this.interval) {\n          this.lastTime = this.now - (this.delta % this.interval);\n          updateFn(this.delta, this.lastTime);\n        }\n        return;\n\n\n        updateFn();\n\n      });\n    }\n\n    updateFn() {\n      console.warn(\"Player update function has not been set.\");\n    }\n  }\n","import FEATURE_TOGGLE from '../../src/feature-toggle';\n\nexport default class Particle {\n\n  /*\n   *   Pass 'boxBounce' as { w: <with>, h: <height> } to make particle bounce inside a box\n   *\n   **/\n    constructor(settings) {\n        this.x = settings.x || 0;\n        this.y = settings.y || 0;\n        this.vx = (Math.cos(settings.direction) * settings.speed) || 0;\n        this.vy = (Math.sin(settings.direction) * settings.speed) || 0;\n        this.gravity = settings.gravity || 0;\n        this.mass = settings.mass || 1;\n        this.radius = settings.radius || settings.mass * 0.87;\n        this.friction = settings.friction || 1;\n        this.springs = [];\n        this.gravitations = [];\n        this.positionUpdated = false;\n        this.color = settings.color || 'rgba(0,0,0,0.6)';\n        this.boxBounce = settings.boxBounce || false;\n    }\n\n    /*\n     *  Updates the state of the particle\n     */\n    update() {\n        let x = this.x;\n        let y = this.y;\n\n        this.handleSprings();\n        this.handleGravitations();\n        this.vy += this.gravity;\n        this.vx *= this.friction;\n        this.vy *= this.friction;\n        this.x += this.vx;\n        this.y += this.vy;\n\n        if (this.boxBounce) {\n          this.checkBorders(this.boxBounce.w, this.boxBounce.h);\n        }\n\n        if (x !== this.x && y !== this.y) {\n          this.positionUpdated = true;\n        } else {\n\n        }\n    }\n\n    /*\n     *  Gets the length of the velocity vector, which equals to the hypotenuse\n     */\n    getSpeed() {\n        return Math.sqrt(this.vx * this.vx + this.vy * this.vy);\n    }\n\n    /*\n     *  Using the actual Velocity vector's angle, sets a new length for it\n     */\n    setSpeed(speed) {\n        let heading = this.getHeading();\n        this.vx = Math.cos(heading) * speed;\n        this.vy = Math.sin(heading) * speed;\n    }\n\n    /*\n     *  Gets the angle direction of the velocity vector\n     */\n    getHeading() {\n        return Math.atan2(this.vy, this.vx);\n    }\n\n    /*\n     *  Changes the Velocity vector's angle and recalculate coordinates\n     */\n    setHeading(heading) {\n        let speed = this.getSpeed();\n        this.vx = Math.cos(heading) * speed;\n        this.vy = Math.sin(heading) * speed;\n    }\n\n    /*\n     *  Sums to the Velocity vector x and y values\n     */\n    accelerate(x, y) {\n        this.vx += x;\n        this.vy += y;\n    }\n\n    /*\n    *  Bounce if the particle hits the box (i.e. screen) borders\n    */\n    checkBorders(width, height) {\n      if (this.x + this.radius >= width) {\n        this.x = width - this.radius;\n        this.vx *=  -1;\n      } else if (this.x - this.radius <= 0) {\n        this.x = this.radius;\n        this.vx *= -1;\n      }\n\n      if (this.y + this.radius >= height) {\n        this.y = height - this.radius;\n        this.vy *=  -1;\n      } else if (this.y - this.radius <= 0) {\n        this.y = this.radius;\n        this.vy *= -1;\n      }\n    }\n\n    /*\n     *  Calculates the angle between this particle and 'p2'\n     */\n    angleTo(p2) {\n        return Math.atan2(p2.y - this.y, p2.x - this.x);\n    }\n\n    /*\n     *  Calculates the distance to a given particle\n     */\n    distanceTo(p) {\n        let dx = p.x - this.x;\n        let dy = p.y - this.y;\n        return Math.sqrt(dx * dx + dy * dy);\n    }\n\n    /*\n     *  Calculates and applies a gravitation vector to a given particle\n     */\n     gravitateTo(p, gravityFactor) {\n         gravityFactor = gravityFactor || 0.04;\n\n         let radiusSum = this.radius + p.radius;\n         let massFactor = this.mass * p.mass;\n\n         let dx = p.x - this.x;\n         let dy = p.y - this.y;\n         let distSQ = (dx * dx) + (dy * dy);\n         let dist = Math.sqrt(distSQ);\n         let surfaceDist = dist - radiusSum;\n\n         // Cancel gravitation once objects collide\n         // TODO: Verify if we can save the Math.sqrt() comparing squares\n         if (dist < radiusSum + 5) {\n           return;\n         }\n\n         //let force = (p.mass) / distSQ; // Force = mass / square of the distance\n         let force = gravityFactor * massFactor / (surfaceDist * surfaceDist);\n\n         let ax = (dx / surfaceDist) * force;\n         let ay = (dy / surfaceDist) * force;\n\n         this.vx += ax;\n         this.vy += ay;\n     }\n\n    /*\n     *  Registers a particle to gravitate to\n     */\n    addGravitation(p) {\n        this.removeGravitation(p);\n        this.gravitations.push(p);\n    }\n\n    /*\n     *  Unregisters a gravitation particle\n     */\n    removeGravitation(p) {\n        let length = this.gravitations.length;\n        for (let i=0; i<length; i++){\n            if (this.gravitations[i] === p) {\n                this.gravitations.slice(i, 1);\n                return true;\n            }\n        }\n    }\n\n    /*\n     *  Gravitates to each registered gravitation particle\n     */\n    handleGravitations() {\n        let length = this.gravitations.length;\n        for (let i=0; i<length; i++){\n            this.gravitateTo(this.gravitations[i]);\n        }\n    }\n\n    /*\n     *  Calculates and applies a spring vector to a given point\n     */\n    springTo(point, k, length) {\n        let dx = point.x - this.x;\n        let dy = point.y - this.y;\n        let distance = Math.sqrt(dx * dx + dy * dy);\n        let force = (distance - length || 0) * k;\n        // Instead of getting cos / sin of angle, divide sides by hypotenuse\n        this.vx += (dx / distance) * force;\n        this.vy += (dy / distance) * force;\n    }\n\n    /*\n     *  Registers a new spring point\n     */\n    addSpring(point, k, length) {\n        this.removeSpring(point);\n        this.springs.push({\n            point: point,\n            k: k,\n            length: length || 0\n        });\n    }\n\n    /*\n     *  Unregisters a spring point\n     */\n    removeSpring(point) {\n        let length = this.springs.length;\n        for (let i=0; i<length; i++){\n            if (this.springs[i].point === point) {\n                this.springs.splice(i, 1);\n                return;\n            }\n        }\n    }\n\n\n    /*\n     *  Springs to each registered spring point\n     */\n    handleSprings() {\n        let length = this.springs.length;\n        for (let i=0; i<length; i++){\n            let spring = this.springs[i];\n            this.springTo(spring.point, spring.k, spring.length);\n        }\n    }\n}\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJwcm9qZWN0cy9zb2xhci1zeXMvYXBwLmpzIiwicHJvamVjdHMvc29sYXItc3lzL2xpYi9DZWxlc3RpYWxCb2R5LmpzIiwicHJvamVjdHMvc29sYXItc3lzL2xpYi9QbGFuZXQuanMiLCJwcm9qZWN0cy9zb2xhci1zeXMvbGliL1N0YXIuanMiLCJzcmMvZmVhdHVyZS10b2dnbGUuanMiLCJzcmMvbGliL0FuaW1hdGlvblBsYXllci5qcyIsInNyYy9saWIvUGFydGljbGUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7OztBQ0FBOzs7O0FBQ0E7Ozs7QUFDQTs7Ozs7O0FBRUEsT0FBTyxNQUFQLEdBQWdCLFlBQU07QUFDbEIsUUFBTSxTQUFTLFNBQVMsY0FBVCxDQUF3QixRQUF4QixDQUFmO0FBQ0EsUUFBTSxNQUFNLE9BQU8sVUFBUCxDQUFrQixJQUFsQixDQUFaO0FBQ0EsUUFBTSxRQUFRLE9BQU8sS0FBUCxHQUFlLE9BQU8sVUFBUCxHQUFrQixDQUEvQztBQUNBLFFBQU0sU0FBUyxPQUFPLE1BQVAsR0FBZ0IsT0FBTyxXQUFQLEdBQW1CLENBQWxEO0FBQ0EsUUFBTSxTQUFTO0FBQ2IsV0FBRyxRQUFRLENBREU7QUFFYixXQUFHLFNBQVM7QUFGQyxLQUFmOztBQUtBO0FBQ0EsUUFBSSxRQUFRO0FBQ1YsYUFBSyxHQURLO0FBRVYsZUFBTyxLQUZHO0FBR1YsZ0JBQVEsTUFIRTtBQUlWLGdCQUFRLE1BSkU7QUFLVixlQUFPLENBTEc7QUFNVixtQkFBVyxDQU5EO0FBT1YsaUJBQVMsQ0FQQztBQVFWLGlCQUFTLENBUkM7QUFTVixxQkFBYSxLQVRIO0FBVVYsZ0JBQVEsa0JBQVc7QUFDakIsaUJBQUssV0FBTCxHQUFtQixLQUFLLFNBQUwsSUFBa0IsS0FBSyxLQUExQztBQUNEO0FBWlMsS0FBWjs7QUFlQSxRQUFJLFNBQVMsOEJBQW9CLEVBQUUsS0FBSyxFQUFQLEVBQXBCLENB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Ozs7Ozs7a0JBM09nQixRIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsImltcG9ydCBTdGFyIGZyb20gJy4vbGliL1N0YXInO1xuaW1wb3J0IFBsYW5ldCBmcm9tICcuL2xpYi9QbGFuZXQnO1xuaW1wb3J0IEFuaW1hdGlvblBsYXllciBmcm9tICcuLi8uLi9zcmMvbGliL0FuaW1hdGlvblBsYXllcic7XG5cbndpbmRvdy5vbmxvYWQgPSAoKSA9PiB7XG4gICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjYW52YXNcIik7XG4gICAgY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcbiAgICBjb25zdCB3aWR0aCA9IGNhbnZhcy53aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoLTQ7XG4gICAgY29uc3QgaGVpZ2h0ID0gY2FudmFzLmhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodC00O1xuICAgIGNvbnN0IGNlbnRlciA9IHtcbiAgICAgIHg6IHdpZHRoIC8gMixcbiAgICAgIHk6IGhlaWdodCAvIDJcbiAgICB9O1xuXG4gICAgLy8gV29ybGQgZGF0YVxuICAgIGxldCB3b3JsZCA9IHtcbiAgICAgIGN0eDogY3R4LFxuICAgICAgd2lkdGg6IHdpZHRoLFxuICAgICAgaGVpZ2h0OiBoZWlnaHQsXG4gICAgICBjZW50ZXI6IGNlbnRlcixcbiAgICAgIHNjYWxlOiAxLFxuICAgICAgbGFzdFNjYWxlOiAwLFxuICAgICAgdHJhbnNfeDogMCxcbiAgICAgIHRyYW5zX3k6IDAsXG4gICAgICBuZWVkc1VwZGF0ZTogZmFsc2UsXG4gICAgICB1cGRhdGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLm5lZWRzVXBkYXRlID0gdGhpcy5sYXN0U2NhbGUgIT0gdGhpcy5zY2FsZTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgbGV0IHBsYXllciA9IG5ldyBBbmltYXRpb25QbGF5ZXIoeyBmcHM6IDYwIH0pO1xuXG4gICAgbGV0IHN1blNldHVwID0ge1xuICAgICAgICB4OiBjZW50ZXIueCxcbiAgICAgICAgeTogY2VudGVyLnksXG4gICAgICAgIG1hc3M6IDUwMCxcbiAgICAgICAgc3BlZWQ6IDAsXG4gICAgICAgIGNvbG9yOiBcIiNENkQzMkRcIixcbiAgICAgICAgY2VudGVyOiBmYWxzZVxuICAgIH07XG5cbiAgICBsZXQgcGxhbmV0c1NldHVwID0gW3tcbiAgICAgICAgeDogY2VudGVyLnggKyA1MDQsXG4gICAgICAgIHk6IGNlbnRlci55LFxuICAgICAgICBzcGVlZDogMS40MjgsXG4gICAgICAgIGRpcmVjdGlvbjogTWF0aC5QSSAvIDIsXG4gICAgICAgIGNvbG9yOiAnI0ZBMTYxNicsXG4gICAgICAgIG1hc3M6IDI1LjUsXG4gICAgICAgIGNlbnRlcjogZmFsc2VcbiAgICAgfSx7XG4gICAgICAgIHg6IGNlbnRlci54ICsgMjIwLFxuICAgICAgICB5OiBjZW50ZXIueSxcbiAgICAgICAgc3BlZWQ6IDIuNDE4NzY2MDY4MTk0MDI1MDUsXG4gICAgICAgIGRpcmVjdGlvbjogTWF0aC5QSSAvIDIsXG4gICAgICAgIGNvbG9yOiAnIzgwODIzMScsXG4gICAgICAgIG1hc3M6IDEwLFxuICAgICAgICBjZW50ZXI6IGZhbHNlXG4gICAgfSx7XG4gICAgICAgIHg6IGNlbnRlci54IC0gMzgwLFxuICAgICAgICB5OiBjZW50ZXIueSxcbiAgICAgICAgc3BlZWQ6IDEuMTU5LFxuICAgICAgICBkaXJlY3Rpb246IC1NYXRoLlBJIC8gMixcbiAgICAgICAgY29sb3I6ICcjNDA0MkE4JyxcbiAgICAgICAgbWFzczogMTAsXG4gICAgICAgIGNlbnRlcjogZmFsc2VcbiAgICB9LHtcbiAgICAgICAgeDogY2VudGVyLnggLSA0ODAsXG4gICAgICAgIHk6IGNlbnRlci55LFxuICAgICAgICBzcGVlZDogMS41NjcsXG4gICAgICAgIGRpcmVjdGlvbjogLU1hdGguUEkgLyAyLFxuICAgICAgICBjb2xvcjogJyM0N0JGQkQnLFxuICAgICAgICBtYXNzOiAyOCxcbiAgICAgICAgY2VudGVyOiBmYWxzZVxuICAgIH0se1xuICAgICAgICB4OiBjZW50ZXIueCAtIDYyMCxcbiAgICAgICAgeTogY2VudGVyLnksXG4gICAgICAgIHNwZWVkOiAyLFxuICAgICAgICBkaXJlY3Rpb246IC1NYXRoLlBJIC8gMixcbiAgICAgICAgY29sb3I6ICcjQUIzQTJCJyxcbiAgICAgICAgbWFzczogNjgsXG4gICAgICAgIGNlbnRlcjogdHJ1ZVxuICAgIH0se1xuICAgICAgICB4OiBjZW50ZXIueCArIDIyOTIsXG4gICAgICAgIHk6IGNlbnRlci55LFxuICAgICAgICBzcGVlZDogMS42LFxuICAgICAgICBkaXJlY3Rpb246IE1hdGguUEkgLyAyLFxuICAgICAgICBjb2xvcjogJyMyQjc1MjMnLFxuICAgICAgICBtYXNzOiAyMjcsXG4gICAgICAgIGNlbnRlcjogZmFsc2VcbiAgICB9LHtcbiAgICAgICAgeDogY2VudGVyLnggKyA5NjAsXG4gICAgICAgIHk6IGNlbnRlci55LFxuICAgICAgICBzcGVlZDogMS41LFxuICAgICAgICBkaXJlY3Rpb246IE1hdGguUEkgLyAyLFxuICAgICAgICBjb2xvcjogJyM2QzI5QTMnLFxuICAgICAgICBtYXNzOiA3MyxcbiAgICAgICAgY2VudGVyOiBmYWxzZVxuICAgIH0se1xuICAgICAgICB4OiBjZW50ZXIueCArIDE4NDksXG4gICAgICAgIHk6IGNlbnRlci55LFxuICAgICAgICBzcGVlZDogMS41MyxcbiAgICAgICAgZGlyZWN0aW9uOiBNYXRoLlBJIC8gMixcbiAgICAgICAgY29sb3I6ICcjQTdBMkFCJyxcbiAgICAgICAgbWFzczogMTgzLFxuICAgICAgICBjZW50ZXI6IGZhbHNlXG4gICAgIH1cblxuICAgXTtcblxuXG4gICAgLy8gU2V0dXAgcGxhbmV0c1xuICAgIGxldCBwbGFuZXRzID0gY3JlYXRlUGxhbmV0cyhwbGFuZXRzU2V0dXApO1xuXG4gICAgLy8gU2V0dXAgc3VuXG4gICAgbGV0IHN1biA9IGNyZWF0ZVN1bihzdW5TZXR1cCk7XG5cbiAgICAvLyBBbGwgY2VsZXN0aWFsIGJvZGllc1xuICAgIHBsYW5ldHMucHVzaChzdW4pO1xuXG4gICAgLy8gRGVtbyBwbGF5ZXJcbiAgICBwbGF5ZXIuc2V0VXBkYXRlRm4odXBkYXRlKTtcbiAgICBwbGF5ZXIucGxheSgpO1xuXG5cbiAgICAvLyBSZWZlcmVuY2UgZnJhbWV3b3JrXG4gICAgbGV0IGN0eFg7XG4gICAgbGV0IGN0eFk7XG4gICAgbGV0IGNlbnRlck9iamVjdDtcblxuICAgIC8vIEZyYW1lIGRyYXdpbmcgZnVuY3Rpb25cbiAgICBmdW5jdGlvbiB1cGRhdGUoKSB7XG4gICAgICBjdHguY2xlYXJSZWN0KDAsIDAsIHdvcmxkLndpZHRoLCB3b3JsZC5oZWlnaHQpO1xuXG4gICAgICBsZXQgdG90YWxQbGFuZXRzID0gcGxhbmV0cy5sZW5ndGg7XG5cbiAgICAgIC8vIFVwZGF0ZSBwbGFuZXRzXG4gICAgICBmb3IgKGxldCBpPTA7IGk8dG90YWxQbGFuZXRzOyBpKyspIHtcbiAgICAgICAgbGV0IHAgPSBwbGFuZXRzW2ldO1xuICAgICAgICBwLnVwZGF0ZSgpO1xuXG4gICAgICAgIGlmIChwIGluc3RhbmNlb2YgUGxhbmV0KSB7XG4gICAgICAgICAgcGxhbmV0c1tpXS5ncmF2aXRhdGVUbyhzdW4pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQWRqdXN0IHJlZmVyZW5jZSBmcmFtZXdvcmsgdG8gdGhlIGNlbnRlciBib2R5OiBwbGFuZXQgb3Igc3VuXG4gICAgICAgIGlmIChwLmNlbnRlcikge1xuICAgICAgICAgIGNlbnRlck9iamVjdCA9IHA7XG4gICAgICAgICAgY3R4WCA9ICh3b3JsZC5jZW50ZXIueCAtIHAueCkgKiB3b3JsZC5zY2FsZSArIHdvcmxkLnRyYW5zX3g7XG4gICAgICAgICAgY3R4WSA9ICh3b3JsZC5jZW50ZXIueSAtIHAueSkgKiB3b3JsZC5zY2FsZSArIHdvcmxkLnRyYW5zX3k7XG4gICAgICAgIH1cblxuICAgICAgfVxuXG4gICAgICBjdHguc2F2ZSgpO1xuICAgICAgY3R4LnRyYW5zbGF0ZShjdHhYLCBjdHhZKTtcblxuICAgICAgLy8gRHJhdyBwbGFuZXRzXG4gICAgICBmb3IgKGxldCBpPTA7IGk8dG90YWxQbGFuZXRzOyBpKyspIHtcbiAgICAgICAgbGV0IHAgPSBwbGFuZXRzW2ldO1xuXG4gICAgICAgIGlmIChwLmNlbnRlcikge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgcC5kcmF3KHN1bik7XG4gICAgICB9XG5cbiAgICAgIGN0eC5yZXN0b3JlKCk7XG5cbiAgICAgIC8vIERyYXcgY2VudGVyIGJvZHlcbiAgICAgIGNlbnRlck9iamVjdC5kcmF3KHN1bik7XG5cbiAgICAgIHdvcmxkLnVwZGF0ZSgpO1xuICAgIH1cblxuXG4gICAgLyoqIEhlbHBlcnMgKiovXG5cbiAgICBmdW5jdGlvbiBjcmVhdGVTdW4oY29uZmlnKSB7XG4gICAgICByZXR1cm4gbmV3IFN0YXIoY29uZmlnLCB3b3JsZCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlUGxhbmV0cyhjb25maWcpIHtcbiAgICAgICAgbGV0IHRvdGFsID0gY29uZmlnLmxlbmd0aDtcbiAgICAgICAgbGV0IHBsYW5ldHMgPSBbXTtcblxuICAgICAgICBmb3IgKGxldCBpPTA7IGk8dG90YWw7IGkrKykge1xuICAgICAgICAgIGxldCBwID0gbmV3IFBsYW5ldChjb25maWdbaV0sIHdvcmxkKTtcbiAgICAgICAgICBpZiAoY29uZmlnW2ldLmRlYnVnT3JiaXQpIHtcbiAgICAgICAgICAgIHAuZGVidWdPcmJpdCA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIHBsYW5ldHMucHVzaChwKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGxhbmV0cztcbiAgICB9XG5cblxuXG4gICAgLyoqIEV2ZW50cyAqKi9cblxuICAgIC8vIEFuaW1hdGlvbiBjb250cm9sOiBLZXlEb3duXG4gICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCAoZSkgPT4ge1xuICAgICAgICAvL2NvbnNvbGUubG9nKFwiS2V5IHByZXNzZWQ6IFwiLCBlLmtleUNvZGUpO1xuICAgICAgICBzd2l0Y2ggKGUua2V5Q29kZSkge1xuICAgICAgICAgICAgY2FzZSAyNzogICAgICAgICAgICAgICAgICAgICAgICAvLyBFc2NcbiAgICAgICAgICAgICAgaWYgKHBsYXllci5wbGF5aW5nKSB7XG4gICAgICAgICAgICAgICAgICBwbGF5ZXIuc3RvcCgpO1xuICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCI+IFNjZW5lIHN0b3BwZWRcIik7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICBwbGF5ZXIucGxheSgpO1xuICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCI+IFBsYXlpbmcgc2NlbmVcIik7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIGNhc2UgMTM6ICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXNjXG4gICAgICAgICAgICAgICAgaWYgKHBsYXllci5wbGF5aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIHBsYXllci5zdG9wKCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcGxheWVyLnBsYXkoKTtcbiAgICAgICAgICAgICAgICBwbGF5ZXIuc3RvcCgpO1xuXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXdoZWVsXCIsIE1vdXNlV2hlZWxIYW5kbGVyLCBmYWxzZSk7XG5cbiAgICBmdW5jdGlvbiBNb3VzZVdoZWVsSGFuZGxlcihlKSB7XG4gICAgICBsZXQgZGVsdGEgPSBNYXRoLm1heCgtMSwgTWF0aC5taW4oMSwgKGUud2hlZWxEZWx0YSB8fCAtZS5kZXRhaWwpKSk7XG4gICAgICBsZXQgc2NhbGVGYWN0b3IgPSB3b3JsZC5zY2FsZSAqIDAuMTtcbiAgICAgIGlmKGRlbHRhID4gMCl7XG4gICAgICAgICAgd29ybGQuc2NhbGUgKz0gc2NhbGVGYWN0b3I7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAgIHdvcmxkLnNjYWxlIC09IHNjYWxlRmFjdG9yO1xuICAgICAgfVxuICAgIH1cblxufTtcbiIsImltcG9ydCBQYXJ0aWNsZSBmcm9tICcuLi8uLi8uLi9zcmMvbGliL1BhcnRpY2xlJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2VsZXN0aWFsQm9keSBleHRlbmRzIFBhcnRpY2xlIHtcblxuICBjb25zdHJ1Y3RvcihzZXR0aW5ncywgd29ybGQpIHtcbiAgICBzdXBlcihzZXR0aW5ncyk7XG5cbiAgICB0aGlzLndvcmxkID0gd29ybGQ7XG4gICAgdGhpcy5jdHggPSB3b3JsZC5jdHg7XG5cbiAgICB0aGlzLmNvbG9yID0gdGhpcy5oZXhUb1JHQihzZXR0aW5ncy5jb2xvcik7XG4gICAgdGhpcy5yYWRpdXMgPSBzZXR0aW5ncy5tYXNzICogMC4yO1xuICAgIHRoaXMuY2VudGVyID0gc2V0dGluZ3MuY2VudGVyO1xuXG4gICAgdGhpcy5zY2FsZWRYID0gMDtcbiAgICB0aGlzLnNjYWxlZFkgPSAwO1xuICAgIHRoaXMuc2NhbGVkUiA9IDA7XG5cbiAgICB0aGlzLnJlU2NhbGUoKTtcbiAgfVxuXG4gIHJlU2NhbGUoKSB7XG4gICAgdGhpcy5zY2FsZWRYID0gKHRoaXMueCAtIHRoaXMud29ybGQuY2VudGVyLngpICogdGhpcy53b3JsZC5zY2FsZSArIHRoaXMud29ybGQuY2VudGVyLnggKyB0aGlzLndvcmxkLnRyYW5zX3g7XG4gICAgdGhpcy5zY2FsZWRZID0gKHRoaXMueSAtIHRoaXMud29ybGQuY2VudGVyLnkpICogdGhpcy53b3JsZC5zY2FsZSArIHRoaXMud29ybGQuY2VudGVyLnkgKyB0aGlzLndvcmxkLnRyYW5zX3k7XG4gICAgdGhpcy5zY2FsZWRSID0gdGhpcy5yYWRpdXMgKiB0aGlzLndvcmxkLnNjYWxlO1xuICB9XG5cbiAgZHJhdygpIHsgfVxuXG4gIGRyYXdTaGFkb3cobGlnaHRTb3VyY2UpIHtcblxuICAgIC8vIFNoYWRvdyBwcm9wc1xuICAgIGxldCByYWRpdXMgPSB0aGlzLnNjYWxlZFI7XG4gICAgbGV0IHNYLCBzWTtcbiAgICBsZXQgc2hhZG93UmFkaXVzID0gcmFkaXVzICogMi43O1xuICAgIGxldCBzaGFkb3dMaW5lV2lkdGggPSByYWRpdXMgKiAwLjgxO1xuICAgIGxldCBzaGFkb3dCbHVyID0gc2hhZG93UmFkaXVzICogMC42O1xuXG4gICAgLy8gR2V0IHRoZSBhbmdsZSAmIGRpc3RhbmNlIGRlcGVuZGluZyBvbiB0aGUgcmVmZXJlbmNlIGZyYW1ld29ya1xuICAgIGxldCBkeCwgZHk7XG4gICAgbGV0IGRpc3QgPSAwO1xuICAgIGlmICh0aGlzLmNlbnRlcikge1xuICAgICAgZHggPSB0aGlzLnggLSBsaWdodFNvdXJjZS54O1xuICAgICAgZHkgPSB0aGlzLnkgLSBsaWdodFNvdXJjZS55O1xuICAgIH0gZWxzZSB7XG4gICAgICBkeCA9IHRoaXMuc2NhbGVkWCAtIGxpZ2h0U291cmNlLnNjYWxlZFg7XG4gICAgICBkeSA9IHRoaXMuc2NhbGVkWSAtIGxpZ2h0U291cmNlLnNjYWxlZFk7XG4gICAgICBkaXN0ID0gTWF0aC5zcXJ0KGR4ICogZHggKyBkeSAqIGR5KTtcbiAgICB9XG5cbiAgICAvLyBHZXQgZGlzdGFuY2UgZnJvbSBzb3VyY2VcbiAgICBsZXQgYW5nbGUgPSBNYXRoLmF0YW4yKGR5LCBkeCk7XG5cbiAgICAvLyBDYWxjdWxhdGUgc2hhZG93LWNpcmNsZSdzIGNvb3JkaW5hdGVzXG4gICAgbGV0IHggPSBsaWdodFNvdXJjZS54ICsgTWF0aC5jb3MoYW5nbGUpICogKGRpc3QgLSBzaGFkb3dSYWRpdXMgKyByYWRpdXMgKiAxKTtcbiAgICBsZXQgeSA9IGxpZ2h0U291cmNlLnkgKyBNYXRoLnNpbihhbmdsZSkgKiAoZGlzdCAtIHNoYWRvd1JhZGl1cyArIHJhZGl1cyAqIDEpO1xuXG5cbiAgICAvLyBTaGFkb3cgc2V0dXBcbiAgICB0aGlzLmN0eC5zYXZlKCk7XG5cbiAgICB0aGlzLmN0eC5zaGFkb3dPZmZzZXRYID0gMDtcbiAgICB0aGlzLmN0eC5zaGFkb3dPZmZzZXRZID0gMDtcbiAgICB0aGlzLmN0eC5zaGFkb3dCbHVyID0gc2hhZG93Qmx1cjtcbiAgICB0aGlzLmN0eC5zaGFkb3dDb2xvciA9ICdyZ2JhKDAsMCwwLDEpJztcblxuICAgIC8vY2xpcCByYW5nZSBieSBwbGFuZXQgYXJlYS5cbiAgICB0aGlzLmN0eC5jbGlwKCk7XG5cbiAgICAvLyBEcmF3IHNoYWRvd1xuICAgIHRoaXMuY3R4LmJlZ2luUGF0aCgpO1xuICAgIHRoaXMuY3R4LmxpbmVXaWR0aCA9IHNoYWRvd0xpbmVXaWR0aDtcbiAgICB0aGlzLmN0eC5zdHJva2VTdHlsZSA9ICdyZ2JhKDAsMCwwLDEpJztcbiAgICB0aGlzLmN0eC5hcmMoeCwgeSwgc2hhZG93UmFkaXVzLCAwLCBNYXRoLlBJKjIpO1xuICAgIHRoaXMuY3R4LnN0cm9rZSgpO1xuICAgIHRoaXMuY3R4LnN0cm9rZSgpO1xuICAgIHRoaXMuY3R4LnN0cm9rZSgpO1xuICAgIHRoaXMuY3R4LnN0cm9rZSgpO1xuICAgIHRoaXMuY3R4LnN0cm9rZSgpO1xuICAgIHRoaXMuY3R4LnN0cm9rZSgpO1xuXG4gICAgdGhpcy5jdHgucmVzdG9yZSgpO1xuICB9XG5cbiAgY3JlYXRlR3JhZGllbnQoKSB7XG4gICAgbGV0IGdyYWQgPSB0aGlzLmN0eC5jcmVhdGVSYWRpYWxHcmFkaWVudCh0aGlzLnNjYWxlZFgsIHRoaXMuc2NhbGVkWSwgdGhpcy5zY2FsZWRSLzQsIHRoaXMuc2NhbGVkWCwgdGhpcy5zY2FsZWRZLCB0aGlzLnNjYWxlZFIpO1xuICAgIC8vIGdyYWQuYWRkQ29sb3JTdG9wKDAsXCIjRkY3XCIpO1xuICAgIC8vIGdyYWQuYWRkQ29sb3JTdG9wKDAuNixcIiNGRjRcIik7XG4gICAgLy8gZ3JhZC5hZGRDb2xvclN0b3AoMC44LFwiI0ZGMFwiKTtcbiAgICAvLyBncmFkLmFkZENvbG9yU3RvcCgxLFwiI0RDMFwiKTtcblxuICAgIGxldCBzdGVwMSA9IHtcbiAgICAgIHI6IHRoaXMuY29sb3IuciArIE1hdGguZmxvb3IoKDI1NSAtIHRoaXMuY29sb3IucikgKiAwLjI2KSxcbiAgICAgIGc6IHRoaXMuY29sb3IuZyArIE1hdGguZmxvb3IoKDI1NSAtIHRoaXMuY29sb3IuZykgKiAwLjI2KSxcbiAgICAgIGI6IHRoaXMuY29sb3IuYiArIE1hdGguZmxvb3IoKDI1NSAtIHRoaXMuY29sb3IuYikgKiAwLjI2KVxuICAgIH07XG5cbiAgICBsZXQgc3RlcDIgPSB7XG4gICAgICByOiB0aGlzLmNvbG9yLnIgKyAgKyBNYXRoLmZsb29yKCgyNTUgLSB0aGlzLmNvbG9yLnIpICogMC4xNyksXG4gICAgICBnOiB0aGlzLmNvbG9yLmcgKyAgKyBNYXRoLmZsb29yKCgyNTUgLSB0aGlzLmNvbG9yLnIpICogMC4xNyksXG4gICAgICBiOiB0aGlzLmNvbG9yLmIgKyAgKyBNYXRoLmZsb29yKCgyNTUgLSB0aGlzLmNvbG9yLnIpICogMC4xNylcbiAgICB9O1xuXG4gICAgbGV0IHN0ZXAzID0ge1xuICAgICAgcjogdGhpcy5jb2xvci5yLFxuICAgICAgZzogdGhpcy5jb2xvci5nLFxuICAgICAgYjogdGhpcy5jb2xvci5iXG4gICAgfTtcblxuXG4gICAgZ3JhZC5hZGRDb2xvclN0b3AoMC4yLCAncmdiYSgnKyBzdGVwMS5yICsnLCAnKyBzdGVwMS5nICsnLCAnKyBzdGVwMS5iICsnLCAxKScpO1xuICAgIGdyYWQuYWRkQ29sb3JTdG9wKDAuOCwgJ3JnYmEoJysgc3RlcDIuciArJywgJysgc3RlcDIuZyArJywgJysgc3RlcDIuYiArJywgMSknKTtcbiAgICBncmFkLmFkZENvbG9yU3RvcCgxLCAncmdiYSgnKyBzdGVwMy5yICsnLCAnKyBzdGVwMy5nICsnLCAnKyBzdGVwMy5iICsnLCAxKScpO1xuXG4gICAgcmV0dXJuIGdyYWQ7XG4gIH1cblxuICBoZXhUb1JHQihoZXgpIHtcbiAgICBsZXQgcmVzdWx0ID0gL14jPyhbYS1mXFxkXXsyfSkoW2EtZlxcZF17Mn0pKFthLWZcXGRdezJ9KSQvaS5leGVjKGhleCk7XG4gICAgcmV0dXJuIHJlc3VsdCA/IHtcbiAgICAgICAgcjogcGFyc2VJbnQocmVzdWx0WzFdLCAxNiksXG4gICAgICAgIGc6IHBhcnNlSW50KHJlc3VsdFsyXSwgMTYpLFxuICAgICAgICBiOiBwYXJzZUludChyZXN1bHRbM10sIDE2KVxuICAgIH0gOiBudWxsO1xuICB9XG59O1xuIiwiaW1wb3J0IENlbGVzdGlhbEJvZHkgZnJvbSAnLi9DZWxlc3RpYWxCb2R5JztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGxhbmV0IGV4dGVuZHMgQ2VsZXN0aWFsQm9keSB7XG5cbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIHdvcmxkKSB7XG4gICAgc3VwZXIoc2V0dGluZ3MsIHdvcmxkKTtcblxuICAgIHRoaXMuZ3JhZCA9IHRoaXMuY3JlYXRlR3JhZGllbnQoKTtcbiAgfVxuXG4gIGRyYXcobGlnaHRTb3VyY2UsIGRyYXdTaGFkb3cpIHtcbiAgICBsaWdodFNvdXJjZSA9IGxpZ2h0U291cmNlIHx8IG51bGw7XG4gICAgZHJhd1NoYWRvdyA9IGRyYXdTaGFkb3cgPT0gZmFsc2UgPyBmYWxzZTp0cnVlO1xuXG4gICAgdGhpcy5yZVNjYWxlKCk7XG5cbiAgICBpZiAodGhpcy53b3JsZC5uZWVkc1VwZGF0ZSkge1xuICAgICAgdGhpcy5ncmFkID0gdGhpcy5jcmVhdGVHcmFkaWVudCgpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnNjYWxlZFIgPCAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbGV0IHgsIHk7XG4gICAgc3dpdGNoICh0aGlzLmNlbnRlcikge1xuICAgICAgY2FzZSBmYWxzZTpcbiAgICAgICAgeCA9IHRoaXMuc2NhbGVkWDtcbiAgICAgICAgeSA9IHRoaXMuc2NhbGVkWTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIHRydWU6XG4gICAgICAgIHggPSB0aGlzLndvcmxkLmNlbnRlci54O1xuICAgICAgICB5ID0gdGhpcy53b3JsZC5jZW50ZXIueTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgdGhpcy5jdHguYmVnaW5QYXRoKCk7XG4gICAgdGhpcy5jdHguZmlsbFN0eWxlID0gdGhpcy5ncmFkO1xuICAgIHRoaXMuY3R4LmFyYyh4LCB5LCB0aGlzLnNjYWxlZFIsIDAsIE1hdGguUEkgKiAyLCBmYWxzZSk7XG4gICAgdGhpcy5jdHguZmlsbCgpO1xuXG4gICAgaWYgKGxpZ2h0U291cmNlICYmIGRyYXdTaGFkb3cpIHtcbiAgICAgIHRoaXMuZHJhd1NoYWRvdyhsaWdodFNvdXJjZSk7XG4gICAgfVxuXG5cblxuICAgIC8vIERlYnVnIGRyYXcgb3JiaXRcbiAgICBpZiAodGhpcy5kZWJ1Z09yYml0ICYmICF0aGlzLmNlbnRlcikge1xuXG4gICAgICAvLyBTaG93IG9yYml0IHByZWRpY3Rpb25cbiAgICAgIGxldCBwcmVkaWN0ID0gbmV3IFBsYW5ldCh7XG4gICAgICAgIHg6IHRoaXMueCxcbiAgICAgICAgeTogdGhpcy55LFxuICAgICAgICBtYXNzOiB0aGlzLm1hc3MsXG4gICAgICAgIGRpcmVjdGlvbjogdGhpcy5nZXRIZWFkaW5nKCksXG4gICAgICAgIHNwZWVkOiB0aGlzLmdldFNwZWVkKCksXG4gICAgICAgIGNvbG9yOiBcIiNmZmZmZmZcIixcbiAgICAgICAgY2VudGVyOiBmYWxzZVxuICAgICAgfSwgdGhpcy53b3JsZCk7XG5cbiAgICAgIGZvciAobGV0IHByPTA7IHByPD0yMDAwOyBwcisrKSB7XG5cbiAgICAgICAgcHJlZGljdC51cGRhdGUoKTtcbiAgICAgICAgcHJlZGljdC5ncmF2aXRhdGVUbyhsaWdodFNvdXJjZSk7XG4gICAgICAgIHByZWRpY3QuZHJhdyhsaWdodFNvdXJjZSwgZmFsc2UpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG59O1xuIiwiaW1wb3J0IENlbGVzdGlhbEJvZHkgZnJvbSAnLi9DZWxlc3RpYWxCb2R5JztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGxhbmV0IGV4dGVuZHMgQ2VsZXN0aWFsQm9keSB7XG5cbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIHdvcmxkKSB7XG4gICAgc3VwZXIoc2V0dGluZ3MsIHdvcmxkKTtcblxuICAgIHRoaXMuZ3JhZCA9IHRoaXMuY3JlYXRlR3JhZGllbnQoKTtcbiAgfVxuXG4gIGRyYXcoKSB7XG4gICAgdGhpcy5yZVNjYWxlKCk7XG5cbiAgICBpZiAodGhpcy5zY2FsZWRSIDwgMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLndvcmxkLm5lZWRzVXBkYXRlKSB7XG4gICAgICB0aGlzLmdyYWQgPSB0aGlzLmNyZWF0ZUdyYWRpZW50KCk7XG4gICAgfVxuXG4gICAgdGhpcy5jdHguZmlsbFN0eWxlID0gdGhpcy5ncmFkO1xuICAgIHRoaXMuY3R4LmJlZ2luUGF0aCgpO1xuICAgIHRoaXMuY3R4LmFyYyh0aGlzLnNjYWxlZFgsIHRoaXMuc2NhbGVkWSwgdGhpcy5zY2FsZWRSLCAwLCBNYXRoLlBJICogMik7XG4gICAgdGhpcy5jdHguZmlsbCgpO1xuICB9XG5cbn07XG4iLCIvKlxuICogIEZlYXR1cmUgVG9nZ2xpbmdcbiAqXG4gKiAgQWN0aXZldGUvSGlkZSBmZWF0dXJlcyB0aGF0IGFyZSBpbiBwcm9jZXNzIG9mIGRldmVsb3BtZW50IG9yIHVuZGVyIHRlc3RpbmdcbiAqICBPbmNlIGEgZmVhdHVyZSBpcyBhY2NlcHRlZCB0byBiZSBpbmNsdWRkZWQgbXVzdCBiZSByZW1vdmVkIGZyb20gdGhlXG4gKiAgZmVhdHVyZSB0b2dnbGUgc2NoZW1lXG4gKi9cblxuIGNvbnN0IEZFQVRVUkVfVE9HR0xFID0ge1xuICAgRlBTX0NPTlRST0w6IHRydWUgICAgICAgICAgICAgICAgLy8gRlBTIGNvbnRyb2xsIGZvciBBbmltYXRpb25QbGF5ZXIgY2xhc3NcbiB9O1xuXG4gZXhwb3J0IGRlZmF1bHQgRkVBVFVSRV9UT0dHTEU7XG4iLCJpbXBvcnQgRkVBVFVSRV9UT0dHTEUgZnJvbSAnLi4vLi4vc3JjL2ZlYXR1cmUtdG9nZ2xlJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQW5pbWF0aW9uUGxheWVyIHtcblxuICBjb25zdHJ1Y3RvcihzZXR0aW5ncykge1xuICAgIHNldHRpbmdzID0gc2V0dGluZ3MgfHwge307XG5cbiAgICB0aGlzLndpbmRvdyA9IHNldHRpbmdzLndpbmRvd0VsZW1lbnQgfHwgd2luZG93O1xuICAgIHRoaXMucmVxdWVzdElkID0gbnVsbDtcbiAgICB0aGlzLnBsYXlpbmcgPSBmYWxzZTtcblxuICAgIC8vIEZQUyBjb250cm9sXG4gICAgdGhpcy5mcHMgPSBzZXR0aW5ncy5mcHMgfHwgOTA7XG4gICAgdGhpcy5ub3c7XG4gICAgdGhpcy5sYXN0VGltZSA9IERhdGUubm93KCk7XG4gICAgdGhpcy5pbnRlcnZhbCA9IDEwMDAvdGhpcy5mcHM7XG4gICAgdGhpcy5kZWx0YTtcblxuICAgIHRoaXMucmVnaXN0ZXJFdmVudHMoKTtcbiAgfVxuXG4gIHJlZ2lzdGVyRXZlbnRzKCkge1xuICAgIC8vIEFuaW1hdGlvbiBjb250cm9sOiBLZXlEb3duXG4gICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCAoZSkgPT4ge1xuICAgICAgLy9jb25zb2xlLmxvZyhcIktleSBwcmVzc2VkOiBcIiwgZS5rZXlDb2RlKTtcbiAgICAgIHN3aXRjaCAoZS5rZXlDb2RlKSB7XG4gICAgICAgIGNhc2UgMjc6ICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXNjXG4gICAgICAgIGlmICh0aGlzLnBsYXlpbmcpIHtcbiAgICAgICAgICB0aGlzLnN0b3AoKTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIj4gU2NlbmUgc3RvcHBlZFwiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnBsYXkoKTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIj4gUGxheWluZyBzY2VuZVwiKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIDEzOlxuICAgICAgICB0aGlzLnN0b3AoKTtcbiAgICAgICAgdGhpcy5wbGF5KCk7XG4gICAgICAgIHRoaXMuc3RvcCgpO1xuICAgICAgICBjb25zb2xlLmxvZyhcIj4gU3RlcCBmb3J3YXJkXCIpO1xuICAgICAgICBicmVhaztcblxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHBsYXkoKSB7XG4gICAgdGhpcy5wbGF5aW5nID0gdHJ1ZTtcbiAgICB0aGlzLnVwZGF0ZUZuKCk7XG4gIH1cblxuICBzdG9wKCkge1xuICAgIGlmICghdGhpcy5wbGF5aW5nKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHRoaXMud2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMucmVxdWVzdElkKTtcbiAgICB0aGlzLnBsYXlpbmcgPSBmYWxzZTtcbiAgICB0aGlzLnJlcXVlc3RJZCA9IG51bGw7XG4gIH1cblxuICBzZXRVcGRhdGVGbih1cGRhdGVGbikge1xuICAgIHRoaXMudXBkYXRlRm4gPSAoXG4gICAgICAoKSA9PiB7XG4gICAgICAgIHRoaXMucmVxdWVzdElkID0gdGhpcy53aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMudXBkYXRlRm4pO1xuICAgICAgICB0aGlzLm5vdyA9IERhdGUubm93KCk7XG4gICAgICAgIHRoaXMuZGVsdGEgPSB0aGlzLm5vdyAtIHRoaXMubGFzdFRpbWU7XG5cbiAgICAgICAgaWYgKHRoaXMuZGVsdGEgPiB0aGlzLmludGVydmFsKSB7XG4gICAgICAgICAgdGhpcy5sYXN0VGltZSA9IHRoaXMubm93IC0gKHRoaXMuZGVsdGEgJSB0aGlzLmludGVydmFsKTtcbiAgICAgICAgICB1cGRhdGVGbih0aGlzLmRlbHRhLCB0aGlzLmxhc3RUaW1lKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm47XG5cblxuICAgICAgICB1cGRhdGVGbigpO1xuXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICB1cGRhdGVGbigpIHtcbiAgICAgIGNvbnNvbGUud2FybihcIlBsYXllciB1cGRhdGUgZnVuY3Rpb24gaGFzIG5vdCBiZWVuIHNldC5cIik7XG4gICAgfVxuICB9XG4iLCJpbXBvcnQgRkVBVFVSRV9UT0dHTEUgZnJvbSAnLi4vLi4vc3JjL2ZlYXR1cmUtdG9nZ2xlJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGFydGljbGUge1xuXG4gIC8qXG4gICAqICAgUGFzcyAnYm94Qm91bmNlJyBhcyB7IHc6IDx3aXRoPiwgaDogPGhlaWdodD4gfSB0byBtYWtlIHBhcnRpY2xlIGJvdW5jZSBpbnNpZGUgYSBib3hcbiAgICpcbiAgICoqL1xuICAgIGNvbnN0cnVjdG9yKHNldHRpbmdzKSB7XG4gICAgICAgIHRoaXMueCA9IHNldHRpbmdzLnggfHwgMDtcbiAgICAgICAgdGhpcy55ID0gc2V0dGluZ3MueSB8fCAwO1xuICAgICAgICB0aGlzLnZ4ID0gKE1hdGguY29zKHNldHRpbmdzLmRpcmVjdGlvbikgKiBzZXR0aW5ncy5zcGVlZCkgfHwgMDtcbiAgICAgICAgdGhpcy52eSA9IChNYXRoLnNpbihzZXR0aW5ncy5kaXJlY3Rpb24pICogc2V0dGluZ3Muc3BlZWQpIHx8IDA7XG4gICAgICAgIHRoaXMuZ3Jhdml0eSA9IHNldHRpbmdzLmdyYXZpdHkgfHwgMDtcbiAgICAgICAgdGhpcy5tYXNzID0gc2V0dGluZ3MubWFzcyB8fCAxO1xuICAgICAgICB0aGlzLnJhZGl1cyA9IHNldHRpbmdzLnJhZGl1cyB8fCBzZXR0aW5ncy5tYXNzICogMC44NztcbiAgICAgICAgdGhpcy5mcmljdGlvbiA9IHNldHRpbmdzLmZyaWN0aW9uIHx8IDE7XG4gICAgICAgIHRoaXMuc3ByaW5ncyA9IFtdO1xuICAgICAgICB0aGlzLmdyYXZpdGF0aW9ucyA9IFtdO1xuICAgICAgICB0aGlzLnBvc2l0aW9uVXBkYXRlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmNvbG9yID0gc2V0dGluZ3MuY29sb3IgfHwgJ3JnYmEoMCwwLDAsMC42KSc7XG4gICAgICAgIHRoaXMuYm94Qm91bmNlID0gc2V0dGluZ3MuYm94Qm91bmNlIHx8IGZhbHNlO1xuICAgIH1cblxuICAgIC8qXG4gICAgICogIFVwZGF0ZXMgdGhlIHN0YXRlIG9mIHRoZSBwYXJ0aWNsZVxuICAgICAqL1xuICAgIHVwZGF0ZSgpIHtcbiAgICAgICAgbGV0IHggPSB0aGlzLng7XG4gICAgICAgIGxldCB5ID0gdGhpcy55O1xuXG4gICAgICAgIHRoaXMuaGFuZGxlU3ByaW5ncygpO1xuICAgICAgICB0aGlzLmhhbmRsZUdyYXZpdGF0aW9ucygpO1xuICAgICAgICB0aGlzLnZ5ICs9IHRoaXMuZ3Jhdml0eTtcbiAgICAgICAgdGhpcy52eCAqPSB0aGlzLmZyaWN0aW9uO1xuICAgICAgICB0aGlzLnZ5ICo9IHRoaXMuZnJpY3Rpb247XG4gICAgICAgIHRoaXMueCArPSB0aGlzLnZ4O1xuICAgICAgICB0aGlzLnkgKz0gdGhpcy52eTtcblxuICAgICAgICBpZiAodGhpcy5ib3hCb3VuY2UpIHtcbiAgICAgICAgICB0aGlzLmNoZWNrQm9yZGVycyh0aGlzLmJveEJvdW5jZS53LCB0aGlzLmJveEJvdW5jZS5oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh4ICE9PSB0aGlzLnggJiYgeSAhPT0gdGhpcy55KSB7XG4gICAgICAgICAgdGhpcy5wb3NpdGlvblVwZGF0ZWQgPSB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKlxuICAgICAqICBHZXRzIHRoZSBsZW5ndGggb2YgdGhlIHZlbG9jaXR5IHZlY3Rvciwgd2hpY2ggZXF1YWxzIHRvIHRoZSBoeXBvdGVudXNlXG4gICAgICovXG4gICAgZ2V0U3BlZWQoKSB7XG4gICAgICAgIHJldHVybiBNYXRoLnNxcnQodGhpcy52eCAqIHRoaXMudnggKyB0aGlzLnZ5ICogdGhpcy52eSk7XG4gICAgfVxuXG4gICAgLypcbiAgICAgKiAgVXNpbmcgdGhlIGFjdHVhbCBWZWxvY2l0eSB2ZWN0b3IncyBhbmdsZSwgc2V0cyBhIG5ldyBsZW5ndGggZm9yIGl0XG4gICAgICovXG4gICAgc2V0U3BlZWQoc3BlZWQpIHtcbiAgICAgICAgbGV0IGhlYWRpbmcgPSB0aGlzLmdldEhlYWRpbmcoKTtcbiAgICAgICAgdGhpcy52eCA9IE1hdGguY29zKGhlYWRpbmcpICogc3BlZWQ7XG4gICAgICAgIHRoaXMudnkgPSBNYXRoLnNpbihoZWFkaW5nKSAqIHNwZWVkO1xuICAgIH1cblxuICAgIC8qXG4gICAgICogIEdldHMgdGhlIGFuZ2xlIGRpcmVjdGlvbiBvZiB0aGUgdmVsb2NpdHkgdmVjdG9yXG4gICAgICovXG4gICAgZ2V0SGVhZGluZygpIHtcbiAgICAgICAgcmV0dXJuIE1hdGguYXRhbjIodGhpcy52eSwgdGhpcy52eCk7XG4gICAgfVxuXG4gICAgLypcbiAgICAgKiAgQ2hhbmdlcyB0aGUgVmVsb2NpdHkgdmVjdG9yJ3MgYW5nbGUgYW5kIHJlY2FsY3VsYXRlIGNvb3JkaW5hdGVzXG4gICAgICovXG4gICAgc2V0SGVhZGluZyhoZWFkaW5nKSB7XG4gICAgICAgIGxldCBzcGVlZCA9IHRoaXMuZ2V0U3BlZWQoKTtcbiAgICAgICAgdGhpcy52eCA9IE1hdGguY29zKGhlYWRpbmcpICogc3BlZWQ7XG4gICAgICAgIHRoaXMudnkgPSBNYXRoLnNpbihoZWFkaW5nKSAqIHNwZWVkO1xuICAgIH1cblxuICAgIC8qXG4gICAgICogIFN1bXMgdG8gdGhlIFZlbG9jaXR5IHZlY3RvciB4IGFuZCB5IHZhbHVlc1xuICAgICAqL1xuICAgIGFjY2VsZXJhdGUoeCwgeSkge1xuICAgICAgICB0aGlzLnZ4ICs9IHg7XG4gICAgICAgIHRoaXMudnkgKz0geTtcbiAgICB9XG5cbiAgICAvKlxuICAgICogIEJvdW5jZSBpZiB0aGUgcGFydGljbGUgaGl0cyB0aGUgYm94IChpLmUuIHNjcmVlbikgYm9yZGVyc1xuICAgICovXG4gICAgY2hlY2tCb3JkZXJzKHdpZHRoLCBoZWlnaHQpIHtcbiAgICAgIGlmICh0aGlzLnggKyB0aGlzLnJhZGl1cyA+PSB3aWR0aCkge1xuICAgICAgICB0aGlzLnggPSB3aWR0aCAtIHRoaXMucmFkaXVzO1xuICAgICAgICB0aGlzLnZ4ICo9ICAtMTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy54IC0gdGhpcy5yYWRpdXMgPD0gMCkge1xuICAgICAgICB0aGlzLnggPSB0aGlzLnJhZGl1cztcbiAgICAgICAgdGhpcy52eCAqPSAtMTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMueSArIHRoaXMucmFkaXVzID49IGhlaWdodCkge1xuICAgICAgICB0aGlzLnkgPSBoZWlnaHQgLSB0aGlzLnJhZGl1cztcbiAgICAgICAgdGhpcy52eSAqPSAgLTE7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMueSAtIHRoaXMucmFkaXVzIDw9IDApIHtcbiAgICAgICAgdGhpcy55ID0gdGhpcy5yYWRpdXM7XG4gICAgICAgIHRoaXMudnkgKj0gLTE7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLypcbiAgICAgKiAgQ2FsY3VsYXRlcyB0aGUgYW5nbGUgYmV0d2VlbiB0aGlzIHBhcnRpY2xlIGFuZCAncDInXG4gICAgICovXG4gICAgYW5nbGVUbyhwMikge1xuICAgICAgICByZXR1cm4gTWF0aC5hdGFuMihwMi55IC0gdGhpcy55LCBwMi54IC0gdGhpcy54KTtcbiAgICB9XG5cbiAgICAvKlxuICAgICAqICBDYWxjdWxhdGVzIHRoZSBkaXN0YW5jZSB0byBhIGdpdmVuIHBhcnRpY2xlXG4gICAgICovXG4gICAgZGlzdGFuY2VUbyhwKSB7XG4gICAgICAgIGxldCBkeCA9IHAueCAtIHRoaXMueDtcbiAgICAgICAgbGV0IGR5ID0gcC55IC0gdGhpcy55O1xuICAgICAgICByZXR1cm4gTWF0aC5zcXJ0KGR4ICogZHggKyBkeSAqIGR5KTtcbiAgICB9XG5cbiAgICAvKlxuICAgICAqICBDYWxjdWxhdGVzIGFuZCBhcHBsaWVzIGEgZ3Jhdml0YXRpb24gdmVjdG9yIHRvIGEgZ2l2ZW4gcGFydGljbGVcbiAgICAgKi9cbiAgICAgZ3Jhdml0YXRlVG8ocCwgZ3Jhdml0eUZhY3Rvcikge1xuICAgICAgICAgZ3Jhdml0eUZhY3RvciA9IGdyYXZpdHlGYWN0b3IgfHwgMC4wNDtcblxuICAgICAgICAgbGV0IHJhZGl1c1N1bSA9IHRoaXMucmFkaXVzICsgcC5yYWRpdXM7XG4gICAgICAgICBsZXQgbWFzc0ZhY3RvciA9IHRoaXMubWFzcyAqIHAubWFzcztcblxuICAgICAgICAgbGV0IGR4ID0gcC54IC0gdGhpcy54O1xuICAgICAgICAgbGV0IGR5ID0gcC55IC0gdGhpcy55O1xuICAgICAgICAgbGV0IGRpc3RTUSA9IChkeCAqIGR4KSArIChkeSAqIGR5KTtcbiAgICAgICAgIGxldCBkaXN0ID0gTWF0aC5zcXJ0KGRpc3RTUSk7XG4gICAgICAgICBsZXQgc3VyZmFjZURpc3QgPSBkaXN0IC0gcmFkaXVzU3VtO1xuXG4gICAgICAgICAvLyBDYW5jZWwgZ3Jhdml0YXRpb24gb25jZSBvYmplY3RzIGNvbGxpZGVcbiAgICAgICAgIC8vIFRPRE86IFZlcmlmeSBpZiB3ZSBjYW4gc2F2ZSB0aGUgTWF0aC5zcXJ0KCkgY29tcGFyaW5nIHNxdWFyZXNcbiAgICAgICAgIGlmIChkaXN0IDwgcmFkaXVzU3VtICsgNSkge1xuICAgICAgICAgICByZXR1cm47XG4gICAgICAgICB9XG5cbiAgICAgICAgIC8vbGV0IGZvcmNlID0gKHAubWFzcykgLyBkaXN0U1E7IC8vIEZvcmNlID0gbWFzcyAvIHNxdWFyZSBvZiB0aGUgZGlzdGFuY2VcbiAgICAgICAgIGxldCBmb3JjZSA9IGdyYXZpdHlGYWN0b3IgKiBtYXNzRmFjdG9yIC8gKHN1cmZhY2VEaXN0ICogc3VyZmFjZURpc3QpO1xuXG4gICAgICAgICBsZXQgYXggPSAoZHggLyBzdXJmYWNlRGlzdCkgKiBmb3JjZTtcbiAgICAgICAgIGxldCBheSA9IChkeSAvIHN1cmZhY2VEaXN0KSAqIGZvcmNlO1xuXG4gICAgICAgICB0aGlzLnZ4ICs9IGF4O1xuICAgICAgICAgdGhpcy52eSArPSBheTtcbiAgICAgfVxuXG4gICAgLypcbiAgICAgKiAgUmVnaXN0ZXJzIGEgcGFydGljbGUgdG8gZ3Jhdml0YXRlIHRvXG4gICAgICovXG4gICAgYWRkR3Jhdml0YXRpb24ocCkge1xuICAgICAgICB0aGlzLnJlbW92ZUdyYXZpdGF0aW9uKHApO1xuICAgICAgICB0aGlzLmdyYXZpdGF0aW9ucy5wdXNoKHApO1xuICAgIH1cblxuICAgIC8qXG4gICAgICogIFVucmVnaXN0ZXJzIGEgZ3Jhdml0YXRpb24gcGFydGljbGVcbiAgICAgKi9cbiAgICByZW1vdmVHcmF2aXRhdGlvbihwKSB7XG4gICAgICAgIGxldCBsZW5ndGggPSB0aGlzLmdyYXZpdGF0aW9ucy5sZW5ndGg7XG4gICAgICAgIGZvciAobGV0IGk9MDsgaTxsZW5ndGg7IGkrKyl7XG4gICAgICAgICAgICBpZiAodGhpcy5ncmF2aXRhdGlvbnNbaV0gPT09IHApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmdyYXZpdGF0aW9ucy5zbGljZShpLCAxKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qXG4gICAgICogIEdyYXZpdGF0ZXMgdG8gZWFjaCByZWdpc3RlcmVkIGdyYXZpdGF0aW9uIHBhcnRpY2xlXG4gICAgICovXG4gICAgaGFuZGxlR3Jhdml0YXRpb25zKCkge1xuICAgICAgICBsZXQgbGVuZ3RoID0gdGhpcy5ncmF2aXRhdGlvbnMubGVuZ3RoO1xuICAgICAgICBmb3IgKGxldCBpPTA7IGk8bGVuZ3RoOyBpKyspe1xuICAgICAgICAgICAgdGhpcy5ncmF2aXRhdGVUbyh0aGlzLmdyYXZpdGF0aW9uc1tpXSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKlxuICAgICAqICBDYWxjdWxhdGVzIGFuZCBhcHBsaWVzIGEgc3ByaW5nIHZlY3RvciB0byBhIGdpdmVuIHBvaW50XG4gICAgICovXG4gICAgc3ByaW5nVG8ocG9pbnQsIGssIGxlbmd0aCkge1xuICAgICAgICBsZXQgZHggPSBwb2ludC54IC0gdGhpcy54O1xuICAgICAgICBsZXQgZHkgPSBwb2ludC55IC0gdGhpcy55O1xuICAgICAgICBsZXQgZGlzdGFuY2UgPSBNYXRoLnNxcnQoZHggKiBkeCArIGR5ICogZHkpO1xuICAgICAgICBsZXQgZm9yY2UgPSAoZGlzdGFuY2UgLSBsZW5ndGggfHwgMCkgKiBrO1xuICAgICAgICAvLyBJbnN0ZWFkIG9mIGdldHRpbmcgY29zIC8gc2luIG9mIGFuZ2xlLCBkaXZpZGUgc2lkZXMgYnkgaHlwb3RlbnVzZVxuICAgICAgICB0aGlzLnZ4ICs9IChkeCAvIGRpc3RhbmNlKSAqIGZvcmNlO1xuICAgICAgICB0aGlzLnZ5ICs9IChkeSAvIGRpc3RhbmNlKSAqIGZvcmNlO1xuICAgIH1cblxuICAgIC8qXG4gICAgICogIFJlZ2lzdGVycyBhIG5ldyBzcHJpbmcgcG9pbnRcbiAgICAgKi9cbiAgICBhZGRTcHJpbmcocG9pbnQsIGssIGxlbmd0aCkge1xuICAgICAgICB0aGlzLnJlbW92ZVNwcmluZyhwb2ludCk7XG4gICAgICAgIHRoaXMuc3ByaW5ncy5wdXNoKHtcbiAgICAgICAgICAgIHBvaW50OiBwb2ludCxcbiAgICAgICAgICAgIGs6IGssXG4gICAgICAgICAgICBsZW5ndGg6IGxlbmd0aCB8fCAwXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qXG4gICAgICogIFVucmVnaXN0ZXJzIGEgc3ByaW5nIHBvaW50XG4gICAgICovXG4gICAgcmVtb3ZlU3ByaW5nKHBvaW50KSB7XG4gICAgICAgIGxldCBsZW5ndGggPSB0aGlzLnNwcmluZ3MubGVuZ3RoO1xuICAgICAgICBmb3IgKGxldCBpPTA7IGk8bGVuZ3RoOyBpKyspe1xuICAgICAgICAgICAgaWYgKHRoaXMuc3ByaW5nc1tpXS5wb2ludCA9PT0gcG9pbnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNwcmluZ3Muc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuXG4gICAgLypcbiAgICAgKiAgU3ByaW5ncyB0byBlYWNoIHJlZ2lzdGVyZWQgc3ByaW5nIHBvaW50XG4gICAgICovXG4gICAgaGFuZGxlU3ByaW5ncygpIHtcbiAgICAgICAgbGV0IGxlbmd0aCA9IHRoaXMuc3ByaW5ncy5sZW5ndGg7XG4gICAgICAgIGZvciAobGV0IGk9MDsgaTxsZW5ndGg7IGkrKyl7XG4gICAgICAgICAgICBsZXQgc3ByaW5nID0gdGhpcy5zcHJpbmdzW2ldO1xuICAgICAgICAgICAgdGhpcy5zcHJpbmdUbyhzcHJpbmcucG9pbnQsIHNwcmluZy5rLCBzcHJpbmcubGVuZ3RoKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiJdfQ=="}