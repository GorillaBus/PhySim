{"version":3,"sources":["node_modules/browser-pack/_prelude.js","projects/perceptron-1/app.js","projects/perceptron-1/lib/Perceptron.js","projects/perceptron-1/lib/PerceptronTrainer.js","src/feature-toggle.js","src/lib/AnimationPlayer.js","src/lib/Utils.js"],"names":[],"mappings":"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","file":"app.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","\nimport AnimationPlayer from '../../src/lib/AnimationPlayer';\nimport Utils from '../../src/lib/Utils';\nimport Perceptron from './lib/Perceptron';\nimport PerceptronTrainer from './lib/PerceptronTrainer';\n\nwindow.onload = () => {\n    const canvas = document.getElementById(\"canvas\");\n    const ctx = canvas.getContext(\"2d\");\n    const width = window.innerWidth;\n    const height = window.innerHeight-4;\n    const center = { x: width/2, y: height/2 };\n\n    canvas.height = height;\n    canvas.width = width;\n\n    let player = new AnimationPlayer();\n    let ptron = new Perceptron(3, 0.0000001);\n    let trainers = new Array(200);\n    let count = 0;\n\n    // Line in function of X\n    function f(x) {\n      return 2*x+1;\n    }\n\n    ctx.translate(center.x, center.y);\n\n    // Draw the line\n    ctx.moveTo(-center.x, f(-center.x));\n    ctx.lineTo(center.x, f(center.x));\n    ctx.stroke();\n\n\n    // Setup - TODO: why don't we pass a 'setup' function to the player?\n    for (let i=0;i<trainers.length;i++) {\n      let x = Utils.randomRange(-center.x, center.x);\n      let y = Utils.randomRange(-center.y, center.y);\n\n      let answer =  1;\n      if (y < f(x)) {\n        answer = -1;\n      }\n      trainers[i] = new PerceptronTrainer(x, y, answer);\n    }\n\n    // Demo player setup\n    player.setUpdateFn(update);\n    player.play();\n\n\n\n\n          for (let i=0; i<trainers.length; i++) {\n            //ptron.train(trainers[i].inputs, trainers[i].answer);\n\n            let ins = trainers[i].inputs;\n            let guess = ptron.feedForward(ins);\n\n            // Draw\n            ctx.beginPath();\n            ctx.arc(ins[0], ins[1], 8, 0, Math.PI * 2, false);\n\n            if (guess < 0) {\n              ctx.fillStyle = \"red\";\n              ctx.fill();\n            } else {\n              ctx.fillStyle = \"green\";\n              ctx.fill();\n            }\n          }\n\n\n    // Frame drawing function\n    function update() {\n      //ctx.clearRect(-center.x, -center.y, width, height);\n\n      //console.log(ptron.weights);\n\n\n      for (let i=0; i<trainers.length; i++) {\n        ptron.train(trainers[i].inputs, trainers[i].answer);\n\n        let ins = trainers[i].inputs;\n        let guess = ptron.feedForward(ins);\n\n        // Draw\n        ctx.beginPath();\n        ctx.arc(ins[0], ins[1], 8, 0, Math.PI * 2, false);\n\n        if (guess < 0) {\n          ctx.fillStyle = \"red\";\n          ctx.fill();\n        } else {\n          ctx.fillStyle = \"green\";\n          ctx.fill();\n        }\n      }\n\n\n      // ptron.train(trainers[count].inputs, trainers[count].answer);\n      // count = (count+1) % trainers.length;\n      //\n      // for (let i=0;i<count;i++) {\n      //\n      //   let ins = trainers[i].inputs;\n      //   let guess = ptron.feedForward(ins);\n      //\n      //   // Draw\n      //   ctx.beginPath();\n      //   ctx.arc(ins[0], ins[1], 8, 0, Math.PI * 2, false);\n      //\n      //   if (guess < 0) {\n      //     ctx.fillStyle = \"red\";\n      //     ctx.fill();\n      //   } else {\n      //     ctx.fillStyle = \"green\";\n      //     ctx.fill();\n      //   }\n      // }\n\n    }\n\n    // Animation control: KeyDown\n    document.body.addEventListener(\"keydown\", (e) => {\n        //console.log(\"Key pressed: \", e.keyCode);\n        switch (e.keyCode) {\n            case 27:                        // Esc\n                if (player.playing) {\n                    player.stop();\n                    console.log(\"> Scene stopped\");\n                } else {\n                    player.play();\n                    console.log(\"> Playing scene\");\n                }\n                break;\n            case 13:\n              player.play();\n              player.stop();\n              console.log(\"Wep!\");\n            default:\n                break;\n        }\n    });\n\n};\n","import Utils from '../../../src/lib/Utils';\n\nexport default class Perceptron {\n\n  // Creates random weights for the amount of inputs\n  constructor(n, learningConstant) {\n    this.weights = new Array(n);\n    this.c = learningConstant || 0.01;\n    for (let i=0;i<this.weights.length;i++) {\n      this.weights[i] = Utils.randomRange(-1, 1);\n    }\n  }\n\n\n  // Process inputs: multiply per weights, sum and send to the activate function\n  feedForward(inputs) {\n    let sum = 0;\n    for (let i=0;i<this.weights.length;i++) {\n      sum += inputs[i] * this.weights[i];\n    }\n\n    return this.activate(sum);\n  }\n\n  // Activation function\n  activate(sum) {\n    return sum > 0 ? 1:-1;\n  }\n\n  // Training function: requires inputs array and a known value\n  train(inputs, desired) {\n    let guess = this.feedForward(inputs);\n    let error = desired - guess;\n\n    for (let i=0;i<this.weights.length;i++) {\n      let correction = this.c * error * inputs[i];\n      this.weights[i] += correction;\n    }\n  }\n\n}\n","export default class PerceptronTrainer {\n\n  constructor(x, y, answer) {\n    this.inputs = [x, y, 1];\n    this.answer = answer;\n  }\n\n}\n","/*\n *  Feature Toggling\n *\n *  Activete/Hide features that are in process of development or under testing\n *  Once a feature is accepted to be includded must be removed from the\n *  feature toggle scheme\n */\n\n const FEATURE_TOGGLE = {\n   FPS_CONTROL: true                // FPS controll for AnimationPlayer class\n };\n\n export default FEATURE_TOGGLE;\n","import FEATURE_TOGGLE from '../../src/feature-toggle';\n\nexport default class AnimationPlayer {\n\n  constructor(settings) {\n    settings = settings || {};\n\n    this.window = settings.windowElement || window;\n    this.requestId = null;\n    this.playing = false;\n\n    // FPS control\n    this.fps = settings.fps || 90;\n    this.now;\n    this.lastTime = Date.now();\n    this.interval = 1000/this.fps;\n    this.delta;\n\n    this.registerEvents();\n  }\n\n  registerEvents() {\n    // Animation control: KeyDown\n    document.body.addEventListener(\"keydown\", (e) => {\n      //console.log(\"Key pressed: \", e.keyCode);\n      switch (e.keyCode) {\n        case 27:                        // Esc\n        if (this.playing) {\n          this.stop();\n          console.log(\"> Scene stopped\");\n        } else {\n          this.play();\n          console.log(\"> Playing scene\");\n        }\n        break;\n\n        case 13:\n        this.stop();\n        this.play();\n        this.stop();\n        console.log(\"> Step forward\");\n        break;\n\n        default:\n        break;\n      }\n    });\n  }\n\n  play() {\n    this.playing = true;\n    this.updateFn();\n  }\n\n  stop() {\n    if (!this.playing) {\n      return false;\n    }\n    this.window.cancelAnimationFrame(this.requestId);\n    this.playing = false;\n    this.requestId = null;\n  }\n\n  setUpdateFn(updateFn) {\n    this.updateFn = (\n      () => {\n        this.requestId = this.window.requestAnimationFrame(this.updateFn);\n        this.now = Date.now();\n        this.delta = this.now - this.lastTime;\n\n        if (this.delta > this.interval) {\n          this.lastTime = this.now - (this.delta % this.interval);\n          updateFn(this.delta, this.lastTime);\n        }\n        return;\n\n\n        updateFn();\n\n      });\n    }\n\n    updateFn() {\n      console.warn(\"Player update function has not been set.\");\n    }\n  }\n","import FEATURE_TOGGLE from '../../src/feature-toggle';\n\nclass Utils {\n\n  constructor() {\n    this.cache = {};\n  }\n\n  cacheStore(caller, key, value) {\n    if (!this.cache.hasOwnProperty(caller)) {\n      this.cache[caller] = {};\n    }\n    this.cache[caller][key] = value;\n  }\n\n  cacheRetrieve(caller, key) {\n    let fnCache = this.cache[caller] || [];\n    let value = fnCache[key] || false;\n    return value;\n  }\n\n  /*\n   *  Get 'n' points from a circular shaped 'Particle' object\n   */\n  getCirclePoints(p, n, radius) {\n    n = n || 8;\n    radius = radius || p.radius || 0;\n\n    let angle = -1;\n    let angleStep = (Math.PI * 2) / n;\n    let points = [];\n\n    for (let i=0; i<n; i++) {\n      let cData = this.cacheRetrieve(\"getCirclePoints\", angle);\n      let cos = cData.cos || Math.cos(angle);\n      let sin = cData.sin || Math.sin(angle);\n      let pt = {\n        x: p.x + (cos * p.radius),\n        y: p.y + (sin * p.radius)\n      };\n      points.push(pt);\n      if (!cData) {\n        this.cacheStore(\"getCirclePoints\", angle, {cos: cos, sin: sin});\n      }\n      angle += angleStep;\n    }\n\n    // Add the center point\n    return points;\n  }\n\n  montecarlo() {\n    while(true) {\n      let r1 = Math.random();\n      let p = r1;\n      let r2 = Math.random();\n      if (r2 < p) {\n        return r1;\n      }\n    }\n  }\n\n  lerp(norm, min, max) {\n    return (max - min) * norm + min;\n  }\n\n  quadraticBezier(p0, p1, p2, t, pFinal) {\n    pFinal = pFinal || {};\n    pFinal.x = Math.pow(1 - t, 2) * p0.x + (1 - t) * 2 * t * p1.x + t * t * p2.x;\n    pFinal.y = Math.pow(1 - t, 2) * p0.y + (1 - t) * 2 * t * p1.y + t * t * p2.y;\n    return pFinal;\n  }\n\n  cubicBezier(p0, p1, p2, p3, t, pFinal) {\n    pFinal = pFinal || {};\n    pFinal.x = Math.pow(1 - t, 3) * p0.x + Math.pow(1 - t, 2) * 3 * t * p1.x + (1 - t) * 3 * t * t * p2.x + t * t * t * p3.x;\n    pFinal.y = Math.pow(1 - t, 3) * p0.y + Math.pow(1 - t, 2) * 3 * t * p1.y + (1 - t) * 3 * t * t * p2.y + t * t * t * p3.y;\n    return pFinal;\n  }\n\n  distance(p0, p1) {\n    let dx = p0.x - p1.x;\n    let dy = p0.y - p1.y;\n    return Math.sqrt(dx * dx + dy * dy);\n  }\n\n  distanceXY(x0, y0, x1, y1) {\n    let dx = x1 - x0;\n    let dy = y1 - y0;\n    return Math.sqrt(dx * dx + dy * dy);\n  }\n\n  // TODO: Check if and why we need to parseInt() the result\n  mapRange(value, low1, high1, low2, high2) {\n    return result = low2 + (high2 - low2) * (value - low1) / (high1 - low1);\n    let result = low2 + (high2 - low2) * (value - low1) / (high1 - low1);\n    if (low2 === parseInt(low2, 10) || high2 === parseInt(high2, 10)) {\n      result = parseInt(result);\n    }\n    return result;\n  }\n\n  inRange(value, min, max) {\n    return value >= Math.min(min, max) && value <= Math.max(min, max);\n  }\n\n  rangeIntersect(min0, max0, min1, max1) {\n    return  Math.max(min0, max0) >= Math.min(min1, max1) &&\n    Math.min(min0, max0) <= Math.max(min1, max1);\n  }\n\n  randomRange(min, max) {\n    return min + Math.random() * (max - min);\n  }\n\n  constrain(e,t,r) {\n    return e>r?r:e<t?t:e;\n  }\n\n  circleCollision(c0, c1) {\n    return this.distance(c0, c1) <= c0.radius + c1.radius;\n  }\n\n  rectangleCollision(r0, r1) {\n    return  this.rangeIntersect(r0.x, r0.x + r0.width, r1.x, r1.x + r1.width) &&\n    this.rangeIntersect(r0.y, r0.y + r0.height, r1.y, r1.y + r1.height);\n  }\n\n  circlePointCollision(px, py, circle) {\n    return this.distanceXY(px, py, circle.x, circle.y) < circle.radius;\n  }\n\n  rectanglePointCollision(px, py, rect) {\n    return  this.inRange(px, rect.x, rect.x + rect.width) &&\n    this.inRange(py, rect.y, rect.y + rect.height);\n  }\n\n  uniqueID() {\n    function s4() {\n      return Math.floor((1 + Math.random()) * 0x10000)\n        .toString(16)\n        .substring(1);\n    }\n    return s4() + s4() + '-' + s4() + '-' + s4() + '-' +\n      s4() + '-' + s4() + s4() + s4();\n  }\n\n  randomColor() {\n    return \"#000000\".replace(/0/g,function(){return (~~(Math.random()*16)).toString(16);});\n  }\n}\n\nlet instance = new Utils();\n\nexport default instance;\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJwcm9qZWN0cy9wZXJjZXB0cm9uLTEvYXBwLmpzIiwicHJvamVjdHMvcGVyY2VwdHJvbi0xL2xpYi9QZXJjZXB0cm9uLmpzIiwicHJvamVjdHMvcGVyY2VwdHJvbi0xL2xpYi9QZXJjZXB0cm9uVHJhaW5lci5qcyIsInNyYy9mZWF0dXJlLXRvZ2dsZS5qcyIsInNyYy9saWIvQW5pbWF0aW9uUGxheWVyLmpzIiwic3JjL2xpYi9VdGlscy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7O0FDQ0E7Ozs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7Ozs7OztBQUVBLE9BQU8sTUFBUCxHQUFnQixZQUFNO0FBQ2xCLE1BQU0sU0FBUyxTQUFTLGNBQVQsQ0FBd0IsUUFBeEIsQ0FBZjtBQUNBLE1BQU0sTUFBTSxPQUFPLFVBQVAsQ0FBa0IsSUFBbEIsQ0FBWjtBQUNBLE1BQU0sUUFBUSxPQUFPLFVBQXJCO0FBQ0EsTUFBTSxTQUFTLE9BQU8sV0FBUCxHQUFtQixDQUFsQztBQUNBLE1BQU0sU0FBUyxFQUFFLEdBQUcsUUFBTSxDQUFYLEVBQWMsR0FBRyxTQUFPLENBQXhCLEVBQWY7O0FBRUEsU0FBTyxNQUFQLEdBQWdCLE1BQWhCO0FBQ0EsU0FBTyxLQUFQLEdBQWUsS0FBZjs7QUFFQSxNQUFJLFNBQVMsK0JBQWI7QUFDQSxNQUFJLFFBQVEseUJBQWUsQ0FBZixFQUFrQixTQUFsQixDQUFaO0FBQ0EsTUFBSSxXQUFXLElBQUksS0FBSixDQUFVLEdBQVYsQ0FBZjtBQUNBLE1BQUksUUFBUSxDQUFaOztBQUVBO0FBQ0EsV0FBUyxDQUFULENBQVcsQ0FBWCxFQUFjO0FBQ1osV0FBTyxJQUFFLENBQUYsR0FBSSxDQUFYO0FBQ0Q7O0FBRUQsTUFBSSxTQUFKLENBQWMsT0FBTyxDQUFyQixFQUF3QixPQUFPLENBQS9COztBQUVBO0FBQ0EsTUFBSSxNQUFKLENBQVcsQ0FBQyxPQUFPLENBQW5CLEVB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LENBQWtCLElBQWxCLEVBQXVCLFlBQVU7QUFBQyxlQUFPLENBQUMsQ0FBQyxFQUFFLEtBQUssTUFBTCxLQUFjLEVBQWhCLENBQUYsRUFBdUIsUUFBdkIsQ0FBZ0MsRUFBaEMsQ0FBUDtBQUE0QyxPQUE5RSxDQUFQO0FBQ0Q7Ozs7OztBQUdILElBQUksV0FBVyxJQUFJLEtBQUosRUFBZjs7a0JBRWUsUSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJcbmltcG9ydCBBbmltYXRpb25QbGF5ZXIgZnJvbSAnLi4vLi4vc3JjL2xpYi9BbmltYXRpb25QbGF5ZXInO1xuaW1wb3J0IFV0aWxzIGZyb20gJy4uLy4uL3NyYy9saWIvVXRpbHMnO1xuaW1wb3J0IFBlcmNlcHRyb24gZnJvbSAnLi9saWIvUGVyY2VwdHJvbic7XG5pbXBvcnQgUGVyY2VwdHJvblRyYWluZXIgZnJvbSAnLi9saWIvUGVyY2VwdHJvblRyYWluZXInO1xuXG53aW5kb3cub25sb2FkID0gKCkgPT4ge1xuICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2FudmFzXCIpO1xuICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XG4gICAgY29uc3Qgd2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICBjb25zdCBoZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQtNDtcbiAgICBjb25zdCBjZW50ZXIgPSB7IHg6IHdpZHRoLzIsIHk6IGhlaWdodC8yIH07XG5cbiAgICBjYW52YXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgIGNhbnZhcy53aWR0aCA9IHdpZHRoO1xuXG4gICAgbGV0IHBsYXllciA9IG5ldyBBbmltYXRpb25QbGF5ZXIoKTtcbiAgICBsZXQgcHRyb24gPSBuZXcgUGVyY2VwdHJvbigzLCAwLjAwMDAwMDEpO1xuICAgIGxldCB0cmFpbmVycyA9IG5ldyBBcnJheSgyMDApO1xuICAgIGxldCBjb3VudCA9IDA7XG5cbiAgICAvLyBMaW5lIGluIGZ1bmN0aW9uIG9mIFhcbiAgICBmdW5jdGlvbiBmKHgpIHtcbiAgICAgIHJldHVybiAyKngrMTtcbiAgICB9XG5cbiAgICBjdHgudHJhbnNsYXRlKGNlbnRlci54LCBjZW50ZXIueSk7XG5cbiAgICAvLyBEcmF3IHRoZSBsaW5lXG4gICAgY3R4Lm1vdmVUbygtY2VudGVyLngsIGYoLWNlbnRlci54KSk7XG4gICAgY3R4LmxpbmVUbyhjZW50ZXIueCwgZihjZW50ZXIueCkpO1xuICAgIGN0eC5zdHJva2UoKTtcblxuXG4gICAgLy8gU2V0dXAgLSBUT0RPOiB3aHkgZG9uJ3Qgd2UgcGFzcyBhICdzZXR1cCcgZnVuY3Rpb24gdG8gdGhlIHBsYXllcj9cbiAgICBmb3IgKGxldCBpPTA7aTx0cmFpbmVycy5sZW5ndGg7aSsrKSB7XG4gICAgICBsZXQgeCA9IFV0aWxzLnJhbmRvbVJhbmdlKC1jZW50ZXIueCwgY2VudGVyLngpO1xuICAgICAgbGV0IHkgPSBVdGlscy5yYW5kb21SYW5nZSgtY2VudGVyLnksIGNlbnRlci55KTtcblxuICAgICAgbGV0IGFuc3dlciA9ICAxO1xuICAgICAgaWYgKHkgPCBmKHgpKSB7XG4gICAgICAgIGFuc3dlciA9IC0xO1xuICAgICAgfVxuICAgICAgdHJhaW5lcnNbaV0gPSBuZXcgUGVyY2VwdHJvblRyYWluZXIoeCwgeSwgYW5zd2VyKTtcbiAgICB9XG5cbiAgICAvLyBEZW1vIHBsYXllciBzZXR1cFxuICAgIHBsYXllci5zZXRVcGRhdGVGbih1cGRhdGUpO1xuICAgIHBsYXllci5wbGF5KCk7XG5cblxuXG5cbiAgICAgICAgICBmb3IgKGxldCBpPTA7IGk8dHJhaW5lcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIC8vcHRyb24udHJhaW4odHJhaW5lcnNbaV0uaW5wdXRzLCB0cmFpbmVyc1tpXS5hbnN3ZXIpO1xuXG4gICAgICAgICAgICBsZXQgaW5zID0gdHJhaW5lcnNbaV0uaW5wdXRzO1xuICAgICAgICAgICAgbGV0IGd1ZXNzID0gcHRyb24uZmVlZEZvcndhcmQoaW5zKTtcblxuICAgICAgICAgICAgLy8gRHJhd1xuICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICAgICAgY3R4LmFyYyhpbnNbMF0sIGluc1sxXSwgOCwgMCwgTWF0aC5QSSAqIDIsIGZhbHNlKTtcblxuICAgICAgICAgICAgaWYgKGd1ZXNzIDwgMCkge1xuICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gXCJyZWRcIjtcbiAgICAgICAgICAgICAgY3R4LmZpbGwoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBcImdyZWVuXCI7XG4gICAgICAgICAgICAgIGN0eC5maWxsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG5cbiAgICAvLyBGcmFtZSBkcmF3aW5nIGZ1bmN0aW9uXG4gICAgZnVuY3Rpb24gdXBkYXRlKCkge1xuICAgICAgLy9jdHguY2xlYXJSZWN0KC1jZW50ZXIueCwgLWNlbnRlci55LCB3aWR0aCwgaGVpZ2h0KTtcblxuICAgICAgLy9jb25zb2xlLmxvZyhwdHJvbi53ZWlnaHRzKTtcblxuXG4gICAgICBmb3IgKGxldCBpPTA7IGk8dHJhaW5lcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgcHRyb24udHJhaW4odHJhaW5lcnNbaV0uaW5wdXRzLCB0cmFpbmVyc1tpXS5hbnN3ZXIpO1xuXG4gICAgICAgIGxldCBpbnMgPSB0cmFpbmVyc1tpXS5pbnB1dHM7XG4gICAgICAgIGxldCBndWVzcyA9IHB0cm9uLmZlZWRGb3J3YXJkKGlucyk7XG5cbiAgICAgICAgLy8gRHJhd1xuICAgICAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgICAgIGN0eC5hcmMoaW5zWzBdLCBpbnNbMV0sIDgsIDAsIE1hdGguUEkgKiAyLCBmYWxzZSk7XG5cbiAgICAgICAgaWYgKGd1ZXNzIDwgMCkge1xuICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBcInJlZFwiO1xuICAgICAgICAgIGN0eC5maWxsKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IFwiZ3JlZW5cIjtcbiAgICAgICAgICBjdHguZmlsbCgpO1xuICAgICAgICB9XG4gICAgICB9XG5cblxuICAgICAgLy8gcHRyb24udHJhaW4odHJhaW5lcnNbY291bnRdLmlucHV0cywgdHJhaW5lcnNbY291bnRdLmFuc3dlcik7XG4gICAgICAvLyBjb3VudCA9IChjb3VudCsxKSAlIHRyYWluZXJzLmxlbmd0aDtcbiAgICAgIC8vXG4gICAgICAvLyBmb3IgKGxldCBpPTA7aTxjb3VudDtpKyspIHtcbiAgICAgIC8vXG4gICAgICAvLyAgIGxldCBpbnMgPSB0cmFpbmVyc1tpXS5pbnB1dHM7XG4gICAgICAvLyAgIGxldCBndWVzcyA9IHB0cm9uLmZlZWRGb3J3YXJkKGlucyk7XG4gICAgICAvL1xuICAgICAgLy8gICAvLyBEcmF3XG4gICAgICAvLyAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICAgIC8vICAgY3R4LmFyYyhpbnNbMF0sIGluc1sxXSwgOCwgMCwgTWF0aC5QSSAqIDIsIGZhbHNlKTtcbiAgICAgIC8vXG4gICAgICAvLyAgIGlmIChndWVzcyA8IDApIHtcbiAgICAgIC8vICAgICBjdHguZmlsbFN0eWxlID0gXCJyZWRcIjtcbiAgICAgIC8vICAgICBjdHguZmlsbCgpO1xuICAgICAgLy8gICB9IGVsc2Uge1xuICAgICAgLy8gICAgIGN0eC5maWxsU3R5bGUgPSBcImdyZWVuXCI7XG4gICAgICAvLyAgICAgY3R4LmZpbGwoKTtcbiAgICAgIC8vICAgfVxuICAgICAgLy8gfVxuXG4gICAgfVxuXG4gICAgLy8gQW5pbWF0aW9uIGNvbnRyb2w6IEtleURvd25cbiAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIChlKSA9PiB7XG4gICAgICAgIC8vY29uc29sZS5sb2coXCJLZXkgcHJlc3NlZDogXCIsIGUua2V5Q29kZSk7XG4gICAgICAgIHN3aXRjaCAoZS5rZXlDb2RlKSB7XG4gICAgICAgICAgICBjYXNlIDI3OiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVzY1xuICAgICAgICAgICAgICAgIGlmIChwbGF5ZXIucGxheWluZykge1xuICAgICAgICAgICAgICAgICAgICBwbGF5ZXIuc3RvcCgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIj4gU2NlbmUgc3RvcHBlZFwiKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBwbGF5ZXIucGxheSgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIj4gUGxheWluZyBzY2VuZVwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDEzOlxuICAgICAgICAgICAgICBwbGF5ZXIucGxheSgpO1xuICAgICAgICAgICAgICBwbGF5ZXIuc3RvcCgpO1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIldlcCFcIik7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfSk7XG5cbn07XG4iLCJpbXBvcnQgVXRpbHMgZnJvbSAnLi4vLi4vLi4vc3JjL2xpYi9VdGlscyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBlcmNlcHRyb24ge1xuXG4gIC8vIENyZWF0ZXMgcmFuZG9tIHdlaWdodHMgZm9yIHRoZSBhbW91bnQgb2YgaW5wdXRzXG4gIGNvbnN0cnVjdG9yKG4sIGxlYXJuaW5nQ29uc3RhbnQpIHtcbiAgICB0aGlzLndlaWdodHMgPSBuZXcgQXJyYXkobik7XG4gICAgdGhpcy5jID0gbGVhcm5pbmdDb25zdGFudCB8fCAwLjAxO1xuICAgIGZvciAobGV0IGk9MDtpPHRoaXMud2VpZ2h0cy5sZW5ndGg7aSsrKSB7XG4gICAgICB0aGlzLndlaWdodHNbaV0gPSBVdGlscy5yYW5kb21SYW5nZSgtMSwgMSk7XG4gICAgfVxuICB9XG5cblxuICAvLyBQcm9jZXNzIGlucHV0czogbXVsdGlwbHkgcGVyIHdlaWdodHMsIHN1bSBhbmQgc2VuZCB0byB0aGUgYWN0aXZhdGUgZnVuY3Rpb25cbiAgZmVlZEZvcndhcmQoaW5wdXRzKSB7XG4gICAgbGV0IHN1bSA9IDA7XG4gICAgZm9yIChsZXQgaT0wO2k8dGhpcy53ZWlnaHRzLmxlbmd0aDtpKyspIHtcbiAgICAgIHN1bSArPSBpbnB1dHNbaV0gKiB0aGlzLndlaWdodHNbaV07XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuYWN0aXZhdGUoc3VtKTtcbiAgfVxuXG4gIC8vIEFjdGl2YXRpb24gZnVuY3Rpb25cbiAgYWN0aXZhdGUoc3VtKSB7XG4gICAgcmV0dXJuIHN1bSA+IDAgPyAxOi0xO1xuICB9XG5cbiAgLy8gVHJhaW5pbmcgZnVuY3Rpb246IHJlcXVpcmVzIGlucHV0cyBhcnJheSBhbmQgYSBrbm93biB2YWx1ZVxuICB0cmFpbihpbnB1dHMsIGRlc2lyZWQpIHtcbiAgICBsZXQgZ3Vlc3MgPSB0aGlzLmZlZWRGb3J3YXJkKGlucHV0cyk7XG4gICAgbGV0IGVycm9yID0gZGVzaXJlZCAtIGd1ZXNzO1xuXG4gICAgZm9yIChsZXQgaT0wO2k8dGhpcy53ZWlnaHRzLmxlbmd0aDtpKyspIHtcbiAgICAgIGxldCBjb3JyZWN0aW9uID0gdGhpcy5jICogZXJyb3IgKiBpbnB1dHNbaV07XG4gICAgICB0aGlzLndlaWdodHNbaV0gKz0gY29ycmVjdGlvbjtcbiAgICB9XG4gIH1cblxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGVyY2VwdHJvblRyYWluZXIge1xuXG4gIGNvbnN0cnVjdG9yKHgsIHksIGFuc3dlcikge1xuICAgIHRoaXMuaW5wdXRzID0gW3gsIHksIDFdO1xuICAgIHRoaXMuYW5zd2VyID0gYW5zd2VyO1xuICB9XG5cbn1cbiIsIi8qXG4gKiAgRmVhdHVyZSBUb2dnbGluZ1xuICpcbiAqICBBY3RpdmV0ZS9IaWRlIGZlYXR1cmVzIHRoYXQgYXJlIGluIHByb2Nlc3Mgb2YgZGV2ZWxvcG1lbnQgb3IgdW5kZXIgdGVzdGluZ1xuICogIE9uY2UgYSBmZWF0dXJlIGlzIGFjY2VwdGVkIHRvIGJlIGluY2x1ZGRlZCBtdXN0IGJlIHJlbW92ZWQgZnJvbSB0aGVcbiAqICBmZWF0dXJlIHRvZ2dsZSBzY2hlbWVcbiAqL1xuXG4gY29uc3QgRkVBVFVSRV9UT0dHTEUgPSB7XG4gICBGUFNfQ09OVFJPTDogdHJ1ZSAgICAgICAgICAgICAgICAvLyBGUFMgY29udHJvbGwgZm9yIEFuaW1hdGlvblBsYXllciBjbGFzc1xuIH07XG5cbiBleHBvcnQgZGVmYXVsdCBGRUFUVVJFX1RPR0dMRTtcbiIsImltcG9ydCBGRUFUVVJFX1RPR0dMRSBmcm9tICcuLi8uLi9zcmMvZmVhdHVyZS10b2dnbGUnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBbmltYXRpb25QbGF5ZXIge1xuXG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzKSB7XG4gICAgc2V0dGluZ3MgPSBzZXR0aW5ncyB8fCB7fTtcblxuICAgIHRoaXMud2luZG93ID0gc2V0dGluZ3Mud2luZG93RWxlbWVudCB8fCB3aW5kb3c7XG4gICAgdGhpcy5yZXF1ZXN0SWQgPSBudWxsO1xuICAgIHRoaXMucGxheWluZyA9IGZhbHNlO1xuXG4gICAgLy8gRlBTIGNvbnRyb2xcbiAgICB0aGlzLmZwcyA9IHNldHRpbmdzLmZwcyB8fCA5MDtcbiAgICB0aGlzLm5vdztcbiAgICB0aGlzLmxhc3RUaW1lID0gRGF0ZS5ub3coKTtcbiAgICB0aGlzLmludGVydmFsID0gMTAwMC90aGlzLmZwcztcbiAgICB0aGlzLmRlbHRhO1xuXG4gICAgdGhpcy5yZWdpc3RlckV2ZW50cygpO1xuICB9XG5cbiAgcmVnaXN0ZXJFdmVudHMoKSB7XG4gICAgLy8gQW5pbWF0aW9uIGNvbnRyb2w6IEtleURvd25cbiAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIChlKSA9PiB7XG4gICAgICAvL2NvbnNvbGUubG9nKFwiS2V5IHByZXNzZWQ6IFwiLCBlLmtleUNvZGUpO1xuICAgICAgc3dpdGNoIChlLmtleUNvZGUpIHtcbiAgICAgICAgY2FzZSAyNzogICAgICAgICAgICAgICAgICAgICAgICAvLyBFc2NcbiAgICAgICAgaWYgKHRoaXMucGxheWluZykge1xuICAgICAgICAgIHRoaXMuc3RvcCgpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiPiBTY2VuZSBzdG9wcGVkXCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMucGxheSgpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiPiBQbGF5aW5nIHNjZW5lXCIpO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgMTM6XG4gICAgICAgIHRoaXMuc3RvcCgpO1xuICAgICAgICB0aGlzLnBsYXkoKTtcbiAgICAgICAgdGhpcy5zdG9wKCk7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiPiBTdGVwIGZvcndhcmRcIik7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgcGxheSgpIHtcbiAgICB0aGlzLnBsYXlpbmcgPSB0cnVlO1xuICAgIHRoaXMudXBkYXRlRm4oKTtcbiAgfVxuXG4gIHN0b3AoKSB7XG4gICAgaWYgKCF0aGlzLnBsYXlpbmcpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgdGhpcy53aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5yZXF1ZXN0SWQpO1xuICAgIHRoaXMucGxheWluZyA9IGZhbHNlO1xuICAgIHRoaXMucmVxdWVzdElkID0gbnVsbDtcbiAgfVxuXG4gIHNldFVwZGF0ZUZuKHVwZGF0ZUZuKSB7XG4gICAgdGhpcy51cGRhdGVGbiA9IChcbiAgICAgICgpID0+IHtcbiAgICAgICAgdGhpcy5yZXF1ZXN0SWQgPSB0aGlzLndpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy51cGRhdGVGbik7XG4gICAgICAgIHRoaXMubm93ID0gRGF0ZS5ub3coKTtcbiAgICAgICAgdGhpcy5kZWx0YSA9IHRoaXMubm93IC0gdGhpcy5sYXN0VGltZTtcblxuICAgICAgICBpZiAodGhpcy5kZWx0YSA+IHRoaXMuaW50ZXJ2YWwpIHtcbiAgICAgICAgICB0aGlzLmxhc3RUaW1lID0gdGhpcy5ub3cgLSAodGhpcy5kZWx0YSAlIHRoaXMuaW50ZXJ2YWwpO1xuICAgICAgICAgIHVwZGF0ZUZuKHRoaXMuZGVsdGEsIHRoaXMubGFzdFRpbWUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybjtcblxuXG4gICAgICAgIHVwZGF0ZUZuKCk7XG5cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHVwZGF0ZUZuKCkge1xuICAgICAgY29uc29sZS53YXJuKFwiUGxheWVyIHVwZGF0ZSBmdW5jdGlvbiBoYXMgbm90IGJlZW4gc2V0LlwiKTtcbiAgICB9XG4gIH1cbiIsImltcG9ydCBGRUFUVVJFX1RPR0dMRSBmcm9tICcuLi8uLi9zcmMvZmVhdHVyZS10b2dnbGUnO1xuXG5jbGFzcyBVdGlscyB7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5jYWNoZSA9IHt9O1xuICB9XG5cbiAgY2FjaGVTdG9yZShjYWxsZXIsIGtleSwgdmFsdWUpIHtcbiAgICBpZiAoIXRoaXMuY2FjaGUuaGFzT3duUHJvcGVydHkoY2FsbGVyKSkge1xuICAgICAgdGhpcy5jYWNoZVtjYWxsZXJdID0ge307XG4gICAgfVxuICAgIHRoaXMuY2FjaGVbY2FsbGVyXVtrZXldID0gdmFsdWU7XG4gIH1cblxuICBjYWNoZVJldHJpZXZlKGNhbGxlciwga2V5KSB7XG4gICAgbGV0IGZuQ2FjaGUgPSB0aGlzLmNhY2hlW2NhbGxlcl0gfHwgW107XG4gICAgbGV0IHZhbHVlID0gZm5DYWNoZVtrZXldIHx8IGZhbHNlO1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuXG4gIC8qXG4gICAqICBHZXQgJ24nIHBvaW50cyBmcm9tIGEgY2lyY3VsYXIgc2hhcGVkICdQYXJ0aWNsZScgb2JqZWN0XG4gICAqL1xuICBnZXRDaXJjbGVQb2ludHMocCwgbiwgcmFkaXVzKSB7XG4gICAgbiA9IG4gfHwgODtcbiAgICByYWRpdXMgPSByYWRpdXMgfHwgcC5yYWRpdXMgfHwgMDtcblxuICAgIGxldCBhbmdsZSA9IC0xO1xuICAgIGxldCBhbmdsZVN0ZXAgPSAoTWF0aC5QSSAqIDIpIC8gbjtcbiAgICBsZXQgcG9pbnRzID0gW107XG5cbiAgICBmb3IgKGxldCBpPTA7IGk8bjsgaSsrKSB7XG4gICAgICBsZXQgY0RhdGEgPSB0aGlzLmNhY2hlUmV0cmlldmUoXCJnZXRDaXJjbGVQb2ludHNcIiwgYW5nbGUpO1xuICAgICAgbGV0IGNvcyA9IGNEYXRhLmNvcyB8fCBNYXRoLmNvcyhhbmdsZSk7XG4gICAgICBsZXQgc2luID0gY0RhdGEuc2luIHx8IE1hdGguc2luKGFuZ2xlKTtcbiAgICAgIGxldCBwdCA9IHtcbiAgICAgICAgeDogcC54ICsgKGNvcyAqIHAucmFkaXVzKSxcbiAgICAgICAgeTogcC55ICsgKHNpbiAqIHAucmFkaXVzKVxuICAgICAgfTtcbiAgICAgIHBvaW50cy5wdXNoKHB0KTtcbiAgICAgIGlmICghY0RhdGEpIHtcbiAgICAgICAgdGhpcy5jYWNoZVN0b3JlKFwiZ2V0Q2lyY2xlUG9pbnRzXCIsIGFuZ2xlLCB7Y29zOiBjb3MsIHNpbjogc2lufSk7XG4gICAgICB9XG4gICAgICBhbmdsZSArPSBhbmdsZVN0ZXA7XG4gICAgfVxuXG4gICAgLy8gQWRkIHRoZSBjZW50ZXIgcG9pbnRcbiAgICByZXR1cm4gcG9pbnRzO1xuICB9XG5cbiAgbW9udGVjYXJsbygpIHtcbiAgICB3aGlsZSh0cnVlKSB7XG4gICAgICBsZXQgcjEgPSBNYXRoLnJhbmRvbSgpO1xuICAgICAgbGV0IHAgPSByMTtcbiAgICAgIGxldCByMiA9IE1hdGgucmFuZG9tKCk7XG4gICAgICBpZiAocjIgPCBwKSB7XG4gICAgICAgIHJldHVybiByMTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBsZXJwKG5vcm0sIG1pbiwgbWF4KSB7XG4gICAgcmV0dXJuIChtYXggLSBtaW4pICogbm9ybSArIG1pbjtcbiAgfVxuXG4gIHF1YWRyYXRpY0JlemllcihwMCwgcDEsIHAyLCB0LCBwRmluYWwpIHtcbiAgICBwRmluYWwgPSBwRmluYWwgfHwge307XG4gICAgcEZpbmFsLnggPSBNYXRoLnBvdygxIC0gdCwgMikgKiBwMC54ICsgKDEgLSB0KSAqIDIgKiB0ICogcDEueCArIHQgKiB0ICogcDIueDtcbiAgICBwRmluYWwueSA9IE1hdGgucG93KDEgLSB0LCAyKSAqIHAwLnkgKyAoMSAtIHQpICogMiAqIHQgKiBwMS55ICsgdCAqIHQgKiBwMi55O1xuICAgIHJldHVybiBwRmluYWw7XG4gIH1cblxuICBjdWJpY0JlemllcihwMCwgcDEsIHAyLCBwMywgdCwgcEZpbmFsKSB7XG4gICAgcEZpbmFsID0gcEZpbmFsIHx8IHt9O1xuICAgIHBGaW5hbC54ID0gTWF0aC5wb3coMSAtIHQsIDMpICogcDAueCArIE1hdGgucG93KDEgLSB0LCAyKSAqIDMgKiB0ICogcDEueCArICgxIC0gdCkgKiAzICogdCAqIHQgKiBwMi54ICsgdCAqIHQgKiB0ICogcDMueDtcbiAgICBwRmluYWwueSA9IE1hdGgucG93KDEgLSB0LCAzKSAqIHAwLnkgKyBNYXRoLnBvdygxIC0gdCwgMikgKiAzICogdCAqIHAxLnkgKyAoMSAtIHQpICogMyAqIHQgKiB0ICogcDIueSArIHQgKiB0ICogdCAqIHAzLnk7XG4gICAgcmV0dXJuIHBGaW5hbDtcbiAgfVxuXG4gIGRpc3RhbmNlKHAwLCBwMSkge1xuICAgIGxldCBkeCA9IHAwLnggLSBwMS54O1xuICAgIGxldCBkeSA9IHAwLnkgLSBwMS55O1xuICAgIHJldHVybiBNYXRoLnNxcnQoZHggKiBkeCArIGR5ICogZHkpO1xuICB9XG5cbiAgZGlzdGFuY2VYWSh4MCwgeTAsIHgxLCB5MSkge1xuICAgIGxldCBkeCA9IHgxIC0geDA7XG4gICAgbGV0IGR5ID0geTEgLSB5MDtcbiAgICByZXR1cm4gTWF0aC5zcXJ0KGR4ICogZHggKyBkeSAqIGR5KTtcbiAgfVxuXG4gIC8vIFRPRE86IENoZWNrIGlmIGFuZCB3aHkgd2UgbmVlZCB0byBwYXJzZUludCgpIHRoZSByZXN1bHRcbiAgbWFwUmFuZ2UodmFsdWUsIGxvdzEsIGhpZ2gxLCBsb3cyLCBoaWdoMikge1xuICAgIHJldHVybiByZXN1bHQgPSBsb3cyICsgKGhpZ2gyIC0gbG93MikgKiAodmFsdWUgLSBsb3cxKSAvIChoaWdoMSAtIGxvdzEpO1xuICAgIGxldCByZXN1bHQgPSBsb3cyICsgKGhpZ2gyIC0gbG93MikgKiAodmFsdWUgLSBsb3cxKSAvIChoaWdoMSAtIGxvdzEpO1xuICAgIGlmIChsb3cyID09PSBwYXJzZUludChsb3cyLCAxMCkgfHwgaGlnaDIgPT09IHBhcnNlSW50KGhpZ2gyLCAxMCkpIHtcbiAgICAgIHJlc3VsdCA9IHBhcnNlSW50KHJlc3VsdCk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICBpblJhbmdlKHZhbHVlLCBtaW4sIG1heCkge1xuICAgIHJldHVybiB2YWx1ZSA+PSBNYXRoLm1pbihtaW4sIG1heCkgJiYgdmFsdWUgPD0gTWF0aC5tYXgobWluLCBtYXgpO1xuICB9XG5cbiAgcmFuZ2VJbnRlcnNlY3QobWluMCwgbWF4MCwgbWluMSwgbWF4MSkge1xuICAgIHJldHVybiAgTWF0aC5tYXgobWluMCwgbWF4MCkgPj0gTWF0aC5taW4obWluMSwgbWF4MSkgJiZcbiAgICBNYXRoLm1pbihtaW4wLCBtYXgwKSA8PSBNYXRoLm1heChtaW4xLCBtYXgxKTtcbiAgfVxuXG4gIHJhbmRvbVJhbmdlKG1pbiwgbWF4KSB7XG4gICAgcmV0dXJuIG1pbiArIE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluKTtcbiAgfVxuXG4gIGNvbnN0cmFpbihlLHQscikge1xuICAgIHJldHVybiBlPnI/cjplPHQ/dDplO1xuICB9XG5cbiAgY2lyY2xlQ29sbGlzaW9uKGMwLCBjMSkge1xuICAgIHJldHVybiB0aGlzLmRpc3RhbmNlKGMwLCBjMSkgPD0gYzAucmFkaXVzICsgYzEucmFkaXVzO1xuICB9XG5cbiAgcmVjdGFuZ2xlQ29sbGlzaW9uKHIwLCByMSkge1xuICAgIHJldHVybiAgdGhpcy5yYW5nZUludGVyc2VjdChyMC54LCByMC54ICsgcjAud2lkdGgsIHIxLngsIHIxLnggKyByMS53aWR0aCkgJiZcbiAgICB0aGlzLnJhbmdlSW50ZXJzZWN0KHIwLnksIHIwLnkgKyByMC5oZWlnaHQsIHIxLnksIHIxLnkgKyByMS5oZWlnaHQpO1xuICB9XG5cbiAgY2lyY2xlUG9pbnRDb2xsaXNpb24ocHgsIHB5LCBjaXJjbGUpIHtcbiAgICByZXR1cm4gdGhpcy5kaXN0YW5jZVhZKHB4LCBweSwgY2lyY2xlLngsIGNpcmNsZS55KSA8IGNpcmNsZS5yYWRpdXM7XG4gIH1cblxuICByZWN0YW5nbGVQb2ludENvbGxpc2lvbihweCwgcHksIHJlY3QpIHtcbiAgICByZXR1cm4gIHRoaXMuaW5SYW5nZShweCwgcmVjdC54LCByZWN0LnggKyByZWN0LndpZHRoKSAmJlxuICAgIHRoaXMuaW5SYW5nZShweSwgcmVjdC55LCByZWN0LnkgKyByZWN0LmhlaWdodCk7XG4gIH1cblxuICB1bmlxdWVJRCgpIHtcbiAgICBmdW5jdGlvbiBzNCgpIHtcbiAgICAgIHJldHVybiBNYXRoLmZsb29yKCgxICsgTWF0aC5yYW5kb20oKSkgKiAweDEwMDAwKVxuICAgICAgICAudG9TdHJpbmcoMTYpXG4gICAgICAgIC5zdWJzdHJpbmcoMSk7XG4gICAgfVxuICAgIHJldHVybiBzNCgpICsgczQoKSArICctJyArIHM0KCkgKyAnLScgKyBzNCgpICsgJy0nICtcbiAgICAgIHM0KCkgKyAnLScgKyBzNCgpICsgczQoKSArIHM0KCk7XG4gIH1cblxuICByYW5kb21Db2xvcigpIHtcbiAgICByZXR1cm4gXCIjMDAwMDAwXCIucmVwbGFjZSgvMC9nLGZ1bmN0aW9uKCl7cmV0dXJuICh+fihNYXRoLnJhbmRvbSgpKjE2KSkudG9TdHJpbmcoMTYpO30pO1xuICB9XG59XG5cbmxldCBpbnN0YW5jZSA9IG5ldyBVdGlscygpO1xuXG5leHBvcnQgZGVmYXVsdCBpbnN0YW5jZTtcbiJdfQ=="}