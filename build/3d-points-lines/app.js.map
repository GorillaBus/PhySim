{"version":3,"sources":["node_modules/browser-pack/_prelude.js","projects/3d-points-lines/app.js","src/feature-toggle.js","src/lib/AnimationPlayer.js"],"names":[],"mappings":"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","file":"app.js","sourceRoot":"/source/","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","import AnimationPlayer from '../../src/lib/AnimationPlayer';\n\nwindow.onload = () => {\n    const canvas = document.getElementById(\"canvas\");\n    const ctx = canvas.getContext(\"2d\");\n    const width = window.innerWidth;\n    const height = window.innerHeight-4;\n    const center = { x: width/2, y: height/2 };\n\n    canvas.height = height;\n    canvas.width = width;\n\n    let player = new AnimationPlayer({ fps: 90 });\n\n    let fl = 900;\n    let points = [];\n    let centerZ = 1500;\n    let needsUpdate = true;\n\n    points[0] = { x: -500, y: -500, z: 500 };\n    points[1] = { x: 500, y: -500, z: 500 };\n    points[2] = { x: 500, y: -500, z: -500 };\n    points[3] = { x: -500, y: -500, z: -500 };\n    points[4] = { x: -500, y: 500, z: 500 };\n    points[5] = { x: 500, y: 500, z: 500 };\n    points[6] = { x: 500, y: 500, z: -500 };\n    points[7] = { x: -500, y: 500, z: -500 };\n\n    // Demo player setup\n    player.setUpdateFn(update);\n    player.play();\n\n    ctx.translate(center.x, center.y);\n\n    // Frame drawing function\n    function update() {\n      if (needsUpdate) {\n        ctx.clearRect(-center.x, -center.y, width, height);\n\n        project();\n\n        ctx.beginPath();\n        drawLine(0,1,2,3,0);\n        drawLine(4,5,6,7,4);\n        drawLine(0,4);\n        drawLine(1,5);\n        drawLine(2,6);\n        drawLine(3,7);\n        ctx.stroke();\n        needsUpdate = false;\n      }\n    }\n\n    function project() {\n      for (let i=0;i<points.length;i++) {\n        let p = points[i];\n        let scale = fl / (fl + p.z + centerZ);\n\n        p.sx = p.x * scale;\n        p.sy = p.y * scale;\n      }\n    }\n\n    function drawLine() {\n      let p = points[arguments[0]];\n      ctx.moveTo(p.sx, p.sy);\n\n      for (let i=1;i<arguments.length;i++) {\n        p = points[arguments[i]];\n        ctx.lineTo(p.sx, p.sy);\n      }\n    }\n\n    function translateModel(x, y, z) {\n      for (let i=0;i<points.length;i++) {\n        points[i].x += x || 0;\n        points[i].y += y || 0;\n        points[i].z += z || 0;\n      }\n      needsUpdate = true;\n    }\n\n    /**\n     *  Rotate X axis:\n     *    y1 = y * cos(angle) - z * sin(angle)\n     *    z1 = z * cos(angle) + y * sin(angle)\n     */\n    function rotateX(angle) {\n      let cos = Math.cos(angle);\n      let sin = Math.sin(angle);\n\n      for (let i=0; i<points.length; i++) {\n        let p = points[i];\n        let y = p.y * cos - p.z * sin;\n        let z = p.z * cos + p.y * sin;\n        p.y = y;\n        p.z = z;\n      }\n      needsUpdate = true;\n    }\n\n    /**\n     *  Rotate Z axis:\n     *    x1 = x * cos(angle) - y * sin(angle)\n     *    y1 = y * cos(angle) + x * sin(angle)\n     */\n    function rotateZ(angle) {\n      let cos = Math.cos(angle);\n      let sin = Math.sin(angle);\n\n      for (let i=0; i<points.length; i++) {\n        let p = points[i];\n        let x = p.x * cos - p.y * sin;\n        let y = p.y * cos + p.x * sin;\n        p.x = x;\n        p.y = y;\n      }\n      needsUpdate = true;\n    }\n\n    /**\n     *  Rotate X axis:\n     *    y1 = y * cos(angle) - z * sin(angle)\n     *    z1 = z * cos(angle) + y * sin(angle)\n     */\n    function rotateX(angle) {\n      let cos = Math.cos(angle);\n      let sin = Math.sin(angle);\n\n      for (let i=0; i<points.length; i++) {\n        let p = points[i];\n        let y = p.y * cos - p.z * sin;\n        let z = p.z * cos + p.y * sin;\n        p.y = y;\n        p.z = z;\n      }\n      needsUpdate = true;\n    }\n\n    /**\n     *  Rotate Y axis:\n     *    x1 = x * cos(angle) - z * sin(angle)\n     *    z1 = z * cos(angle) + x * sin(angle)\n     */\n    function rotateY(angle) {\n      let cos = Math.cos(angle);\n      let sin = Math.sin(angle);\n\n      for (let i=0; i<points.length; i++) {\n        let p = points[i];\n        let x = p.x * cos - p.z * sin;\n        let z = p.z * cos + p.x * sin;\n        p.x = x;\n        p.z = z;\n      }\n      needsUpdate = true;\n    }\n\n\n    document.body.addEventListener(\"keydown\", (e) => {\n        switch (e.keyCode) {\n          case 37: // Left\n            if (event.shiftKey) {\n              rotateY(0.05);\n            } else if (event.altKey) {\n              rotateZ(0.05);\n            } else {\n              translateModel(-20, 0, 0);\n            }\n          break;\n\n          case 39: // Right\n            if (event.shiftKey) {\n              rotateY(-0.05);\n            } else if (event.altKey) {\n              rotateZ(-0.05);\n            } else {\n              translateModel(20, 0, 0);\n            }\n          break;\n\n          case 38: // Up\n            if (event.ctrlKey) {\n              translateModel(0, 0, 20);\n            } else if (event.shiftKey) {\n              rotateX(0.05);\n            } else {\n              translateModel(0, -20, 0);\n            }\n          break;\n\n          case 40: // Down\n            if (event.ctrlKey) {\n              translateModel(0, 0, -20);\n            } else if (event.shiftKey) {\n              rotateX(-0.05);\n            } else {\n              translateModel(0, 20, 0);\n            }\n          break;\n\n        }\n    });\n\n    // Animation control: KeyDown\n    document.body.addEventListener(\"keydown\", (e) => {\n        //console.log(\"Key pressed: \", e.keyCode);\n        switch (e.keyCode) {\n          case 27:                        // Esc\n            if (player.playing) {\n                player.stop();\n                console.log(\"> Scene stopped\");\n            } else {\n                player.play();\n                console.log(\"> Playing scene\");\n            }\n            break;\n          default:\n            break;\n        }\n    });\n\n};\n","/*\n *  Feature Toggling\n *\n *  Activete/Hide features that are in process of development or under testing\n *  Once a feature is accepted to be includded must be removed from the\n *  feature toggle scheme\n */\n\n const FEATURE_TOGGLE = {\n   FPS_CONTROL: true                // FPS controll for AnimationPlayer class\n };\n\n export default FEATURE_TOGGLE;\n","import FEATURE_TOGGLE from '../../src/feature-toggle';\n\nexport default class AnimationPlayer {\n\n    constructor(settings) {\n        settings = settings || {};\n\n        this.window = settings.windowElement || window;\n        this.requestId = null;\n        this.playing = false;\n\n        // FPS control\n        if (FEATURE_TOGGLE.FPS_CONTROL) {\n          this.fps = settings.fps || 90;\n          this.now;\n          this.lastTime = Date.now();\n          this.interval = 1000/this.fps;\n          this.delta;\n        }\n\n    }\n\n    play() {\n        this.playing = true;\n        this.updateFn();\n    }\n\n    stop() {\n        if (!this.playing) {\n            return false;\n        }\n        this.window.cancelAnimationFrame(this.requestId);\n        this.playing = false;\n        this.requestId = null;\n    }\n\n    setUpdateFn(updateFn) {\n        this.updateFn = (\n            () => {\n                this.requestId = this.window.requestAnimationFrame(this.updateFn);\n\n                // FPS control\n                if (FEATURE_TOGGLE.FPS_CONTROL) {\n                  this.now = Date.now();\n                  this.delta = this.now - this.lastTime;\n\n                  if (this.delta > this.interval) {\n                    this.lastTime = this.now - (this.delta % this.interval);\n                    updateFn();\n                  }\n                  return;\n                }\n\n                updateFn();\n\n            });\n    }\n\n    updateFn() {\n        console.warn(\"Player update function has not been set.\");\n    }\n}\n"]}