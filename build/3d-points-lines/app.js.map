{"version":3,"sources":["node_modules/browser-pack/_prelude.js","projects/3d-points-lines/app.js","src/feature-toggle.js","src/lib/AnimationPlayer.js"],"names":[],"mappings":"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","file":"app.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","import AnimationPlayer from '../../src/lib/AnimationPlayer';\n\nwindow.onload = () => {\n    const canvas = document.getElementById(\"canvas\");\n    const ctx = canvas.getContext(\"2d\");\n    const width = window.innerWidth;\n    const height = window.innerHeight-4;\n    const center = { x: width/2, y: height/2 };\n\n    canvas.height = height;\n    canvas.width = width;\n\n    let player = new AnimationPlayer({ fps: 90 });\n\n    let fl = 900;\n    let points = [];\n    let centerZ = 1000;\n    let needsUpdate = true;\n\n    points[0] = { x: -500, y: -500, z: 500 };\n    points[1] = { x: 500, y: -500, z: 500 };\n    points[2] = { x: 500, y: -500, z: -500 };\n    points[3] = { x: -500, y: -500, z: -500 };\n    points[4] = { x: -500, y: 500, z: 500 };\n    points[5] = { x: 500, y: 500, z: 500 };\n    points[6] = { x: 500, y: 500, z: -500 };\n    points[7] = { x: -500, y: 500, z: -500 };\n\n    // Demo player setup\n    player.setUpdateFn(update);\n    player.play();\n\n    ctx.translate(center.x, center.y);\n\n    // Frame drawing function\n    function update() {\n      if (needsUpdate) {\n        ctx.clearRect(-center.x, -center.y, width, height);\n\n        project();\n\n        ctx.beginPath();\n        drawLine(0,1,2,3,0);\n        drawLine(4,5,6,7,4);\n        drawLine(0,4);\n        drawLine(1,5);\n        drawLine(2,6);\n        drawLine(3,7);\n        ctx.stroke();\n        needsUpdate = false;\n      }\n    }\n\n    function project() {\n      for (let i=0;i<points.length;i++) {\n        let p = points[i];\n        let scale = fl / (fl + p.z + centerZ);\n\n        p.sx = p.x * scale;\n        p.sy = p.y * scale;\n      }\n    }\n\n    function drawLine() {\n      let p = points[arguments[0]];\n      ctx.moveTo(p.sx, p.sy);\n\n      for (let i=1;i<arguments.length;i++) {\n        p = points[arguments[i]];\n        ctx.lineTo(p.sx, p.sy);\n      }\n    }\n\n    function translateModel(x, y, z) {\n      for (let i=0;i<points.length;i++) {\n        points[i].x += x || 0;\n        points[i].y += y || 0;\n        points[i].z += z || 0;\n      }\n      needsUpdate = true;\n    }\n\n    /**\n     *  Rotate X axis:\n     *    y1 = y * cos(angle) - z * sin(angle)\n     *    z1 = z * cos(angle) + y * sin(angle)\n     */\n    function rotateX(angle) {\n      let cos = Math.cos(angle);\n      let sin = Math.sin(angle);\n\n      for (let i=0; i<points.length; i++) {\n        let p = points[i];\n        let y = p.y * cos - p.z * sin;\n        let z = p.z * cos + p.y * sin;\n        p.y = y;\n        p.z = z;\n      }\n      needsUpdate = true;\n    }\n\n    /**\n     *  Rotate Z axis:\n     *    x1 = x * cos(angle) - y * sin(angle)\n     *    y1 = y * cos(angle) + x * sin(angle)\n     */\n    function rotateZ(angle) {\n      let cos = Math.cos(angle);\n      let sin = Math.sin(angle);\n\n      for (let i=0; i<points.length; i++) {\n        let p = points[i];\n        let x = p.x * cos - p.y * sin;\n        let y = p.y * cos + p.x * sin;\n        p.x = x;\n        p.y = y;\n      }\n      needsUpdate = true;\n    }\n\n    /**\n     *  Rotate X axis:\n     *    y1 = y * cos(angle) - z * sin(angle)\n     *    z1 = z * cos(angle) + y * sin(angle)\n     */\n    function rotateX(angle) {\n      let cos = Math.cos(angle);\n      let sin = Math.sin(angle);\n\n      for (let i=0; i<points.length; i++) {\n        let p = points[i];\n        let y = p.y * cos - p.z * sin;\n        let z = p.z * cos + p.y * sin;\n        p.y = y;\n        p.z = z;\n      }\n      needsUpdate = true;\n    }\n\n    /**\n     *  Rotate Y axis:\n     *    x1 = x * cos(angle) - z * sin(angle)\n     *    z1 = z * cos(angle) + x * sin(angle)\n     */\n    function rotateY(angle) {\n      let cos = Math.cos(angle);\n      let sin = Math.sin(angle);\n\n      for (let i=0; i<points.length; i++) {\n        let p = points[i];\n        let x = p.x * cos - p.z * sin;\n        let z = p.z * cos + p.x * sin;\n        p.x = x;\n        p.z = z;\n      }\n      needsUpdate = true;\n    }\n\n\n    document.body.addEventListener(\"keydown\", (e) => {\n        switch (e.keyCode) {\n          case 37: // Left\n            if (event.shiftKey) {\n              rotateY(0.05);\n            } else if (event.altKey) {\n              rotateZ(0.05);\n            } else {\n              translateModel(-20, 0, 0);\n            }\n          break;\n\n          case 39: // Right\n            if (event.shiftKey) {\n              rotateY(-0.05);\n            } else if (event.altKey) {\n              rotateZ(-0.05);\n            } else {\n              translateModel(20, 0, 0);\n            }\n          break;\n\n          case 38: // Up\n            if (event.ctrlKey) {\n              translateModel(0, 0, 20);\n            } else if (event.shiftKey) {\n              rotateX(0.05);\n            } else {\n              translateModel(0, -20, 0);\n            }\n          break;\n\n          case 40: // Down\n            if (event.ctrlKey) {\n              translateModel(0, 0, -20);\n            } else if (event.shiftKey) {\n              rotateX(-0.05);\n            } else {\n              translateModel(0, 20, 0);\n            }\n          break;\n\n        }\n    });\n\n    // Animation control: KeyDown\n    document.body.addEventListener(\"keydown\", (e) => {\n        //console.log(\"Key pressed: \", e.keyCode);\n        switch (e.keyCode) {\n          case 27:                        // Esc\n            if (player.playing) {\n                player.stop();\n                console.log(\"> Scene stopped\");\n            } else {\n                player.play();\n                console.log(\"> Playing scene\");\n            }\n            break;\n          default:\n            break;\n        }\n    });\n\n};\n","/*\n *  Feature Toggling\n *\n *  Activete/Hide features that are in process of development or under testing\n *  Once a feature is accepted to be includded must be removed from the\n *  feature toggle scheme\n */\n\n const FEATURE_TOGGLE = {\n   FPS_CONTROL: true                // FPS controll for AnimationPlayer class\n };\n\n export default FEATURE_TOGGLE;\n","import FEATURE_TOGGLE from '../../src/feature-toggle';\n\nexport default class AnimationPlayer {\n\n  constructor(settings) {\n    settings = settings || {};\n\n    this.window = settings.windowElement || window;\n    this.requestId = null;\n    this.playing = false;\n\n    // FPS control\n    this.fps = settings.fps || 90;\n    this.now;\n    this.lastTime = Date.now();\n    this.interval = 1000/this.fps;\n    this.delta;\n\n    this.registerEvents();\n  }\n\n  registerEvents() {\n    // Animation control: KeyDown\n    document.body.addEventListener(\"keydown\", (e) => {\n      //console.log(\"Key pressed: \", e.keyCode);\n      switch (e.keyCode) {\n        case 27:                        // Esc\n        if (this.playing) {\n          this.stop();\n          console.log(\"> Scene stopped\");\n        } else {\n          this.play();\n          console.log(\"> Playing scene\");\n        }\n        break;\n\n        case 13:\n        this.stop();\n        this.play();\n        this.stop();\n        console.log(\"> Step forward\");\n        break;\n\n        default:\n        break;\n      }\n    });\n  }\n\n  play() {\n    this.playing = true;\n    this.updateFn();\n  }\n\n  stop() {\n    if (!this.playing) {\n      return false;\n    }\n    this.window.cancelAnimationFrame(this.requestId);\n    this.playing = false;\n    this.requestId = null;\n  }\n\n  setUpdateFn(updateFn) {\n    this.updateFn = (\n      () => {\n        this.requestId = this.window.requestAnimationFrame(this.updateFn);\n        this.now = Date.now();\n        this.delta = this.now - this.lastTime;\n\n        if (this.delta > this.interval) {\n          this.lastTime = this.now - (this.delta % this.interval);\n          updateFn(this.delta, this.lastTime);\n        }\n        return;\n\n\n        updateFn();\n\n      });\n    }\n\n    updateFn() {\n      console.warn(\"Player update function has not been set.\");\n    }\n  }\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJwcm9qZWN0cy8zZC1wb2ludHMtbGluZXMvYXBwLmpzIiwic3JjL2ZlYXR1cmUtdG9nZ2xlLmpzIiwic3JjL2xpYi9BbmltYXRpb25QbGF5ZXIuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7OztBQ0FBOzs7Ozs7QUFFQSxPQUFPLE1BQVAsR0FBZ0IsWUFBTTtBQUNsQixNQUFNLFNBQVMsU0FBUyxjQUFULENBQXdCLFFBQXhCLENBQWY7QUFDQSxNQUFNLE1BQU0sT0FBTyxVQUFQLENBQWtCLElBQWxCLENBQVo7QUFDQSxNQUFNLFFBQVEsT0FBTyxVQUFyQjtBQUNBLE1BQU0sU0FBUyxPQUFPLFdBQVAsR0FBbUIsQ0FBbEM7QUFDQSxNQUFNLFNBQVMsRUFBRSxHQUFHLFFBQU0sQ0FBWCxFQUFjLEdBQUcsU0FBTyxDQUF4QixFQUFmOztBQUVBLFNBQU8sTUFBUCxHQUFnQixNQUFoQjtBQUNBLFNBQU8sS0FBUCxHQUFlLEtBQWY7O0FBRUEsTUFBSSxTQUFTLDhCQUFvQixFQUFFLEtBQUssRUFBUCxFQUFwQixDQUFiOztBQUVBLE1BQUksS0FBSyxHQUFUO0FBQ0EsTUFBSSxTQUFTLEVBQWI7QUFDQSxNQUFJLFVBQVUsSUFBZDtBQUNBLE1BQUksY0FBYyxJQUFsQjs7QUFFQSxTQUFPLENBQVAsSUFBWSxFQUFFLEdBQUcsQ0FBQyxHQUFOLEVBQVcsR0FBRyxDQUFDLEdBQWYsRUFBb0IsR0FBRyxHQUF2QixFQUFaO0FBQ0EsU0FBTyxDQUFQLElBQVksRUFBRSxHQUFHLEdBQUwsRUFBVSxHQUFHLENBQUMsR0FBZCxFQUFtQixHQUFHLEdBQXRCLEVBQVo7QUFDQSxTQUFPLENBQVAsSUFBWSxFQUFFLEdBQUcsR0FBTCxFQUFVLEdBQUcsQ0FBQyxHQUFkLEVBQW1CLEdBQUcsQ0FBQyxHQUF2QixFQUFaO0FBQ0EsU0FBTyxDQUFQLElBQVksRUFBRSxHQUFHLENBQUMsR0FBTixFQUFXLEdB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OzsyQkFFTTtBQUNMLFVBQUksQ0FBQyxLQUFLLE9BQVYsRUFBbUI7QUFDakIsZUFBTyxLQUFQO0FBQ0Q7QUFDRCxXQUFLLE1BQUwsQ0FBWSxvQkFBWixDQUFpQyxLQUFLLFNBQXRDO0FBQ0EsV0FBSyxPQUFMLEdBQWUsS0FBZjtBQUNBLFdBQUssU0FBTCxHQUFpQixJQUFqQjtBQUNEOzs7Z0NBRVcsUSxFQUFVO0FBQUE7O0FBQ3BCLFdBQUssUUFBTCxHQUNFLFlBQU07QUFDSixlQUFLLFNBQUwsR0FBaUIsT0FBSyxNQUFMLENBQVkscUJBQVosQ0FBa0MsT0FBSyxRQUF2QyxDQUFqQjtBQUNBLGVBQUssR0FBTCxHQUFXLEtBQUssR0FBTCxFQUFYO0FBQ0EsZUFBSyxLQUFMLEdBQWEsT0FBSyxHQUFMLEdBQVcsT0FBSyxRQUE3Qjs7QUFFQSxZQUFJLE9BQUssS0FBTCxHQUFhLE9BQUssUUFBdEIsRUFBZ0M7QUFDOUIsaUJBQUssUUFBTCxHQUFnQixPQUFLLEdBQUwsR0FBWSxPQUFLLEtBQUwsR0FBYSxPQUFLLFFBQTlDO0FBQ0EsbUJBQVMsT0FBSyxLQUFkLEVBQXFCLE9BQUssUUFBMUI7QUFDRDtBQUNEOztBQUdBO0FBRUQsT0FmSDtBQWdCQzs7OytCQUVVO0FBQ1QsY0FBUSxJQUFSLENBQWEsMENBQWI7QUFDRDs7Ozs7O2tCQWxGZ0IsZSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJpbXBvcnQgQW5pbWF0aW9uUGxheWVyIGZyb20gJy4uLy4uL3NyYy9saWIvQW5pbWF0aW9uUGxheWVyJztcblxud2luZG93Lm9ubG9hZCA9ICgpID0+IHtcbiAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNhbnZhc1wiKTtcbiAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuICAgIGNvbnN0IHdpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XG4gICAgY29uc3QgaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0LTQ7XG4gICAgY29uc3QgY2VudGVyID0geyB4OiB3aWR0aC8yLCB5OiBoZWlnaHQvMiB9O1xuXG4gICAgY2FudmFzLmhlaWdodCA9IGhlaWdodDtcbiAgICBjYW52YXMud2lkdGggPSB3aWR0aDtcblxuICAgIGxldCBwbGF5ZXIgPSBuZXcgQW5pbWF0aW9uUGxheWVyKHsgZnBzOiA5MCB9KTtcblxuICAgIGxldCBmbCA9IDkwMDtcbiAgICBsZXQgcG9pbnRzID0gW107XG4gICAgbGV0IGNlbnRlclogPSAxMDAwO1xuICAgIGxldCBuZWVkc1VwZGF0ZSA9IHRydWU7XG5cbiAgICBwb2ludHNbMF0gPSB7IHg6IC01MDAsIHk6IC01MDAsIHo6IDUwMCB9O1xuICAgIHBvaW50c1sxXSA9IHsgeDogNTAwLCB5OiAtNTAwLCB6OiA1MDAgfTtcbiAgICBwb2ludHNbMl0gPSB7IHg6IDUwMCwgeTogLTUwMCwgejogLTUwMCB9O1xuICAgIHBvaW50c1szXSA9IHsgeDogLTUwMCwgeTogLTUwMCwgejogLTUwMCB9O1xuICAgIHBvaW50c1s0XSA9IHsgeDogLTUwMCwgeTogNTAwLCB6OiA1MDAgfTtcbiAgICBwb2ludHNbNV0gPSB7IHg6IDUwMCwgeTogNTAwLCB6OiA1MDAgfTtcbiAgICBwb2ludHNbNl0gPSB7IHg6IDUwMCwgeTogNTAwLCB6OiAtNTAwIH07XG4gICAgcG9pbnRzWzddID0geyB4OiAtNTAwLCB5OiA1MDAsIHo6IC01MDAgfTtcblxuICAgIC8vIERlbW8gcGxheWVyIHNldHVwXG4gICAgcGxheWVyLnNldFVwZGF0ZUZuKHVwZGF0ZSk7XG4gICAgcGxheWVyLnBsYXkoKTtcblxuICAgIGN0eC50cmFuc2xhdGUoY2VudGVyLngsIGNlbnRlci55KTtcblxuICAgIC8vIEZyYW1lIGRyYXdpbmcgZnVuY3Rpb25cbiAgICBmdW5jdGlvbiB1cGRhdGUoKSB7XG4gICAgICBpZiAobmVlZHNVcGRhdGUpIHtcbiAgICAgICAgY3R4LmNsZWFyUmVjdCgtY2VudGVyLngsIC1jZW50ZXIueSwgd2lkdGgsIGhlaWdodCk7XG5cbiAgICAgICAgcHJvamVjdCgpO1xuXG4gICAgICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgZHJhd0xpbmUoMCwxLDIsMywwKTtcbiAgICAgICAgZHJhd0xpbmUoNCw1LDYsNyw0KTtcbiAgICAgICAgZHJhd0xpbmUoMCw0KTtcbiAgICAgICAgZHJhd0xpbmUoMSw1KTtcbiAgICAgICAgZHJhd0xpbmUoMiw2KTtcbiAgICAgICAgZHJhd0xpbmUoMyw3KTtcbiAgICAgICAgY3R4LnN0cm9rZSgpO1xuICAgICAgICBuZWVkc1VwZGF0ZSA9IGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHByb2plY3QoKSB7XG4gICAgICBmb3IgKGxldCBpPTA7aTxwb2ludHMubGVuZ3RoO2krKykge1xuICAgICAgICBsZXQgcCA9IHBvaW50c1tpXTtcbiAgICAgICAgbGV0IHNjYWxlID0gZmwgLyAoZmwgKyBwLnogKyBjZW50ZXJaKTtcblxuICAgICAgICBwLnN4ID0gcC54ICogc2NhbGU7XG4gICAgICAgIHAuc3kgPSBwLnkgKiBzY2FsZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkcmF3TGluZSgpIHtcbiAgICAgIGxldCBwID0gcG9pbnRzW2FyZ3VtZW50c1swXV07XG4gICAgICBjdHgubW92ZVRvKHAuc3gsIHAuc3kpO1xuXG4gICAgICBmb3IgKGxldCBpPTE7aTxhcmd1bWVudHMubGVuZ3RoO2krKykge1xuICAgICAgICBwID0gcG9pbnRzW2FyZ3VtZW50c1tpXV07XG4gICAgICAgIGN0eC5saW5lVG8ocC5zeCwgcC5zeSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdHJhbnNsYXRlTW9kZWwoeCwgeSwgeikge1xuICAgICAgZm9yIChsZXQgaT0wO2k8cG9pbnRzLmxlbmd0aDtpKyspIHtcbiAgICAgICAgcG9pbnRzW2ldLnggKz0geCB8fCAwO1xuICAgICAgICBwb2ludHNbaV0ueSArPSB5IHx8IDA7XG4gICAgICAgIHBvaW50c1tpXS56ICs9IHogfHwgMDtcbiAgICAgIH1cbiAgICAgIG5lZWRzVXBkYXRlID0gdHJ1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiAgUm90YXRlIFggYXhpczpcbiAgICAgKiAgICB5MSA9IHkgKiBjb3MoYW5nbGUpIC0geiAqIHNpbihhbmdsZSlcbiAgICAgKiAgICB6MSA9IHogKiBjb3MoYW5nbGUpICsgeSAqIHNpbihhbmdsZSlcbiAgICAgKi9cbiAgICBmdW5jdGlvbiByb3RhdGVYKGFuZ2xlKSB7XG4gICAgICBsZXQgY29zID0gTWF0aC5jb3MoYW5nbGUpO1xuICAgICAgbGV0IHNpbiA9IE1hdGguc2luKGFuZ2xlKTtcblxuICAgICAgZm9yIChsZXQgaT0wOyBpPHBvaW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBsZXQgcCA9IHBvaW50c1tpXTtcbiAgICAgICAgbGV0IHkgPSBwLnkgKiBjb3MgLSBwLnogKiBzaW47XG4gICAgICAgIGxldCB6ID0gcC56ICogY29zICsgcC55ICogc2luO1xuICAgICAgICBwLnkgPSB5O1xuICAgICAgICBwLnogPSB6O1xuICAgICAgfVxuICAgICAgbmVlZHNVcGRhdGUgPSB0cnVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqICBSb3RhdGUgWiBheGlzOlxuICAgICAqICAgIHgxID0geCAqIGNvcyhhbmdsZSkgLSB5ICogc2luKGFuZ2xlKVxuICAgICAqICAgIHkxID0geSAqIGNvcyhhbmdsZSkgKyB4ICogc2luKGFuZ2xlKVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHJvdGF0ZVooYW5nbGUpIHtcbiAgICAgIGxldCBjb3MgPSBNYXRoLmNvcyhhbmdsZSk7XG4gICAgICBsZXQgc2luID0gTWF0aC5zaW4oYW5nbGUpO1xuXG4gICAgICBmb3IgKGxldCBpPTA7IGk8cG9pbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGxldCBwID0gcG9pbnRzW2ldO1xuICAgICAgICBsZXQgeCA9IHAueCAqIGNvcyAtIHAueSAqIHNpbjtcbiAgICAgICAgbGV0IHkgPSBwLnkgKiBjb3MgKyBwLnggKiBzaW47XG4gICAgICAgIHAueCA9IHg7XG4gICAgICAgIHAueSA9IHk7XG4gICAgICB9XG4gICAgICBuZWVkc1VwZGF0ZSA9IHRydWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogIFJvdGF0ZSBYIGF4aXM6XG4gICAgICogICAgeTEgPSB5ICogY29zKGFuZ2xlKSAtIHogKiBzaW4oYW5nbGUpXG4gICAgICogICAgejEgPSB6ICogY29zKGFuZ2xlKSArIHkgKiBzaW4oYW5nbGUpXG4gICAgICovXG4gICAgZnVuY3Rpb24gcm90YXRlWChhbmdsZSkge1xuICAgICAgbGV0IGNvcyA9IE1hdGguY29zKGFuZ2xlKTtcbiAgICAgIGxldCBzaW4gPSBNYXRoLnNpbihhbmdsZSk7XG5cbiAgICAgIGZvciAobGV0IGk9MDsgaTxwb2ludHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGV0IHAgPSBwb2ludHNbaV07XG4gICAgICAgIGxldCB5ID0gcC55ICogY29zIC0gcC56ICogc2luO1xuICAgICAgICBsZXQgeiA9IHAueiAqIGNvcyArIHAueSAqIHNpbjtcbiAgICAgICAgcC55ID0geTtcbiAgICAgICAgcC56ID0gejtcbiAgICAgIH1cbiAgICAgIG5lZWRzVXBkYXRlID0gdHJ1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiAgUm90YXRlIFkgYXhpczpcbiAgICAgKiAgICB4MSA9IHggKiBjb3MoYW5nbGUpIC0geiAqIHNpbihhbmdsZSlcbiAgICAgKiAgICB6MSA9IHogKiBjb3MoYW5nbGUpICsgeCAqIHNpbihhbmdsZSlcbiAgICAgKi9cbiAgICBmdW5jdGlvbiByb3RhdGVZKGFuZ2xlKSB7XG4gICAgICBsZXQgY29zID0gTWF0aC5jb3MoYW5nbGUpO1xuICAgICAgbGV0IHNpbiA9IE1hdGguc2luKGFuZ2xlKTtcblxuICAgICAgZm9yIChsZXQgaT0wOyBpPHBvaW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBsZXQgcCA9IHBvaW50c1tpXTtcbiAgICAgICAgbGV0IHggPSBwLnggKiBjb3MgLSBwLnogKiBzaW47XG4gICAgICAgIGxldCB6ID0gcC56ICogY29zICsgcC54ICogc2luO1xuICAgICAgICBwLnggPSB4O1xuICAgICAgICBwLnogPSB6O1xuICAgICAgfVxuICAgICAgbmVlZHNVcGRhdGUgPSB0cnVlO1xuICAgIH1cblxuXG4gICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCAoZSkgPT4ge1xuICAgICAgICBzd2l0Y2ggKGUua2V5Q29kZSkge1xuICAgICAgICAgIGNhc2UgMzc6IC8vIExlZnRcbiAgICAgICAgICAgIGlmIChldmVudC5zaGlmdEtleSkge1xuICAgICAgICAgICAgICByb3RhdGVZKDAuMDUpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChldmVudC5hbHRLZXkpIHtcbiAgICAgICAgICAgICAgcm90YXRlWigwLjA1KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRyYW5zbGF0ZU1vZGVsKC0yMCwgMCwgMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIDM5OiAvLyBSaWdodFxuICAgICAgICAgICAgaWYgKGV2ZW50LnNoaWZ0S2V5KSB7XG4gICAgICAgICAgICAgIHJvdGF0ZVkoLTAuMDUpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChldmVudC5hbHRLZXkpIHtcbiAgICAgICAgICAgICAgcm90YXRlWigtMC4wNSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0cmFuc2xhdGVNb2RlbCgyMCwgMCwgMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIDM4OiAvLyBVcFxuICAgICAgICAgICAgaWYgKGV2ZW50LmN0cmxLZXkpIHtcbiAgICAgICAgICAgICAgdHJhbnNsYXRlTW9kZWwoMCwgMCwgMjApO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChldmVudC5zaGlmdEtleSkge1xuICAgICAgICAgICAgICByb3RhdGVYKDAuMDUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdHJhbnNsYXRlTW9kZWwoMCwgLTIwLCAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgNDA6IC8vIERvd25cbiAgICAgICAgICAgIGlmIChldmVudC5jdHJsS2V5KSB7XG4gICAgICAgICAgICAgIHRyYW5zbGF0ZU1vZGVsKDAsIDAsIC0yMCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LnNoaWZ0S2V5KSB7XG4gICAgICAgICAgICAgIHJvdGF0ZVgoLTAuMDUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdHJhbnNsYXRlTW9kZWwoMCwgMjAsIDApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIEFuaW1hdGlvbiBjb250cm9sOiBLZXlEb3duXG4gICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCAoZSkgPT4ge1xuICAgICAgICAvL2NvbnNvbGUubG9nKFwiS2V5IHByZXNzZWQ6IFwiLCBlLmtleUNvZGUpO1xuICAgICAgICBzd2l0Y2ggKGUua2V5Q29kZSkge1xuICAgICAgICAgIGNhc2UgMjc6ICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXNjXG4gICAgICAgICAgICBpZiAocGxheWVyLnBsYXlpbmcpIHtcbiAgICAgICAgICAgICAgICBwbGF5ZXIuc3RvcCgpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiPiBTY2VuZSBzdG9wcGVkXCIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwbGF5ZXIucGxheSgpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiPiBQbGF5aW5nIHNjZW5lXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfSk7XG5cbn07XG4iLCIvKlxuICogIEZlYXR1cmUgVG9nZ2xpbmdcbiAqXG4gKiAgQWN0aXZldGUvSGlkZSBmZWF0dXJlcyB0aGF0IGFyZSBpbiBwcm9jZXNzIG9mIGRldmVsb3BtZW50IG9yIHVuZGVyIHRlc3RpbmdcbiAqICBPbmNlIGEgZmVhdHVyZSBpcyBhY2NlcHRlZCB0byBiZSBpbmNsdWRkZWQgbXVzdCBiZSByZW1vdmVkIGZyb20gdGhlXG4gKiAgZmVhdHVyZSB0b2dnbGUgc2NoZW1lXG4gKi9cblxuIGNvbnN0IEZFQVRVUkVfVE9HR0xFID0ge1xuICAgRlBTX0NPTlRST0w6IHRydWUgICAgICAgICAgICAgICAgLy8gRlBTIGNvbnRyb2xsIGZvciBBbmltYXRpb25QbGF5ZXIgY2xhc3NcbiB9O1xuXG4gZXhwb3J0IGRlZmF1bHQgRkVBVFVSRV9UT0dHTEU7XG4iLCJpbXBvcnQgRkVBVFVSRV9UT0dHTEUgZnJvbSAnLi4vLi4vc3JjL2ZlYXR1cmUtdG9nZ2xlJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQW5pbWF0aW9uUGxheWVyIHtcblxuICBjb25zdHJ1Y3RvcihzZXR0aW5ncykge1xuICAgIHNldHRpbmdzID0gc2V0dGluZ3MgfHwge307XG5cbiAgICB0aGlzLndpbmRvdyA9IHNldHRpbmdzLndpbmRvd0VsZW1lbnQgfHwgd2luZG93O1xuICAgIHRoaXMucmVxdWVzdElkID0gbnVsbDtcbiAgICB0aGlzLnBsYXlpbmcgPSBmYWxzZTtcblxuICAgIC8vIEZQUyBjb250cm9sXG4gICAgdGhpcy5mcHMgPSBzZXR0aW5ncy5mcHMgfHwgOTA7XG4gICAgdGhpcy5ub3c7XG4gICAgdGhpcy5sYXN0VGltZSA9IERhdGUubm93KCk7XG4gICAgdGhpcy5pbnRlcnZhbCA9IDEwMDAvdGhpcy5mcHM7XG4gICAgdGhpcy5kZWx0YTtcblxuICAgIHRoaXMucmVnaXN0ZXJFdmVudHMoKTtcbiAgfVxuXG4gIHJlZ2lzdGVyRXZlbnRzKCkge1xuICAgIC8vIEFuaW1hdGlvbiBjb250cm9sOiBLZXlEb3duXG4gICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCAoZSkgPT4ge1xuICAgICAgLy9jb25zb2xlLmxvZyhcIktleSBwcmVzc2VkOiBcIiwgZS5rZXlDb2RlKTtcbiAgICAgIHN3aXRjaCAoZS5rZXlDb2RlKSB7XG4gICAgICAgIGNhc2UgMjc6ICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXNjXG4gICAgICAgIGlmICh0aGlzLnBsYXlpbmcpIHtcbiAgICAgICAgICB0aGlzLnN0b3AoKTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIj4gU2NlbmUgc3RvcHBlZFwiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnBsYXkoKTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIj4gUGxheWluZyBzY2VuZVwiKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIDEzOlxuICAgICAgICB0aGlzLnN0b3AoKTtcbiAgICAgICAgdGhpcy5wbGF5KCk7XG4gICAgICAgIHRoaXMuc3RvcCgpO1xuICAgICAgICBjb25zb2xlLmxvZyhcIj4gU3RlcCBmb3J3YXJkXCIpO1xuICAgICAgICBicmVhaztcblxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHBsYXkoKSB7XG4gICAgdGhpcy5wbGF5aW5nID0gdHJ1ZTtcbiAgICB0aGlzLnVwZGF0ZUZuKCk7XG4gIH1cblxuICBzdG9wKCkge1xuICAgIGlmICghdGhpcy5wbGF5aW5nKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHRoaXMud2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMucmVxdWVzdElkKTtcbiAgICB0aGlzLnBsYXlpbmcgPSBmYWxzZTtcbiAgICB0aGlzLnJlcXVlc3RJZCA9IG51bGw7XG4gIH1cblxuICBzZXRVcGRhdGVGbih1cGRhdGVGbikge1xuICAgIHRoaXMudXBkYXRlRm4gPSAoXG4gICAgICAoKSA9PiB7XG4gICAgICAgIHRoaXMucmVxdWVzdElkID0gdGhpcy53aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMudXBkYXRlRm4pO1xuICAgICAgICB0aGlzLm5vdyA9IERhdGUubm93KCk7XG4gICAgICAgIHRoaXMuZGVsdGEgPSB0aGlzLm5vdyAtIHRoaXMubGFzdFRpbWU7XG5cbiAgICAgICAgaWYgKHRoaXMuZGVsdGEgPiB0aGlzLmludGVydmFsKSB7XG4gICAgICAgICAgdGhpcy5sYXN0VGltZSA9IHRoaXMubm93IC0gKHRoaXMuZGVsdGEgJSB0aGlzLmludGVydmFsKTtcbiAgICAgICAgICB1cGRhdGVGbih0aGlzLmRlbHRhLCB0aGlzLmxhc3RUaW1lKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm47XG5cblxuICAgICAgICB1cGRhdGVGbigpO1xuXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICB1cGRhdGVGbigpIHtcbiAgICAgIGNvbnNvbGUud2FybihcIlBsYXllciB1cGRhdGUgZnVuY3Rpb24gaGFzIG5vdCBiZWVuIHNldC5cIik7XG4gICAgfVxuICB9XG4iXX0="}